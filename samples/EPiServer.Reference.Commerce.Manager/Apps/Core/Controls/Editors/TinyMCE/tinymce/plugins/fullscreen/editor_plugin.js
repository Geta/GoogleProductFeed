(function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(f,b){var d=this,c={},e;d.editor=f;f.addCommand("mceFullScreen",function(){var h,g=a.doc.documentElement;if(f.getParam("fullscreen_is_enabled")){if(f.getParam("fullscreen_new_window")){closeFullscreen();}else{a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",d.resizeFunc);tinyMCE.get(f.getParam("fullscreen_editor_id")).setContent(f.getContent({format:"raw"}),{format:"raw"});tinyMCE.remove(f);a.remove("mce_fullscreen_container");g.style.overflow=f.getParam("fullscreen_html_overflow");a.setStyle(a.doc.body,"overflow",f.getParam("fullscreen_overflow"));a.win.scrollTo(f.getParam("fullscreen_scrollx"),f.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings;},10);}return;}if(f.getParam("fullscreen_new_window")){h=a.win.open(b+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight);}catch(i){}}else{tinyMCE.oldSettings=tinyMCE.settings;c.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto";c.fullscreen_html_overflow=a.getStyle(g,"overflow",1);e=a.getViewPort();c.fullscreen_scrollx=e.x;c.fullscreen_scrolly=e.y;if(tinymce.isOpera&&c.fullscreen_overflow=="visible"){c.fullscreen_overflow="auto";}if(tinymce.isIE&&c.fullscreen_overflow=="scroll"){c.fullscreen_overflow="auto";}if(tinymce.isIE&&(c.fullscreen_html_overflow=="visible"||c.fullscreen_html_overflow=="scroll")){c.fullscreen_html_overflow="auto";}if(c.fullscreen_overflow=="0px"){c.fullscreen_overflow="";}a.setStyle(a.doc.body,"overflow","hidden");g.style.overflow="hidden";e=a.getViewPort();a.win.scrollTo(0,0);if(tinymce.isIE){e.h-=1;}n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+(tinymce.isIE6||(tinymce.isIE&&!a.boxModel)?"absolute":"fixed")+";top:0;left:0;width:"+e.w+"px;height:"+e.h+"px;z-index:200000;"});a.add(n,"div",{id:"mce_fullscreen"});tinymce.each(f.settings,function(k,j){c[j]=k;});c.id="mce_fullscreen";c.width=n.clientWidth;c.height=n.clientHeight-15;c.fullscreen_is_enabled=true;c.fullscreen_editor_id=f.id;c.theme_advanced_resizing=false;c.save_onsavecallback=function(){f.setContent(tinyMCE.get(c.id).getContent({format:"raw"}),{format:"raw"});f.execCommand("mceSave");};tinymce.each(f.getParam("fullscreen_settings"),function(l,j){c[j]=l;});if(c.theme_advanced_toolbar_location==="external"){c.theme_advanced_toolbar_location="top";}d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",c);d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(f.getContent());d.fullscreenEditor.focus();});d.fullscreenEditor.render();d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container");d.fullscreenElement.update();d.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var j=tinymce.DOM.getViewPort(),k=d.fullscreenEditor,m,l;m=k.dom.getSize(k.getContainer().firstChild);l=k.dom.getSize(k.getContainer().getElementsByTagName("iframe")[0]);k.theme.resizeTo(j.w-m.w+l.w,j.h-m.h+l.h);});}});f.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});f.onNodeChange.add(function(g,h){h.setActive("fullscreen",g.getParam("fullscreen_is_enabled"));});},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin);})();