(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(e,b){var c=this;c.editor=e;function d(f){var g=[];a(f.split(/,/),function(h){g.push({title:"advlist."+(h=="default"?"def":h.replace(/-/g,"_")),styles:{listStyleType:h=="default"?"":h}});});return g;}c.numlist=e.getParam("advlist_number_styles")||d("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");c.bullist=e.getParam("advlist_bullet_styles")||d("default,circle,disc,square");},createControl:function(e,d){var f=this,c,b;if(e=="numlist"||e=="bullist"){if(f[e][0].title=="advlist.def"){b=f[e][0];}function g(j,i){var k=true;a(i.styles,function(m,l){if(f.editor.dom.getStyle(j,l)!=m){k=false;return false;}});return k;}function h(){var j,l=f.editor,i=l.dom,k=l.selection;j=i.getParent(k.getNode(),"ol,ul");if(!j||j.nodeName==(e=="bullist"?"OL":"UL")||g(j,b)){l.execCommand(e=="bullist"?"InsertUnorderedList":"InsertOrderedList");}if(b){j=i.getParent(k.getNode(),"ol,ul");if(j){i.setStyles(j,b.styles);j.removeAttribute("_mce_style");}}}c=d.createSplitButton(e,{title:"advanced."+e+"_desc","class":"mce_"+e,onclick:function(){h();}});c.onRenderMenu.add(function(i,j){j.onShowMenu.add(function(){var m=f.editor.dom,l=m.getParent(f.editor.selection.getNode(),"ol,ul"),k;if(l||b){k=f[e];a(j.items,function(n){var o=true;n.setSelected(0);if(l&&!n.isDisabled()){a(k,function(p){if(p.id==n.id){if(!g(l,p)){o=false;return false;}}});if(o){n.setSelected(1);}}});if(!l){j.items[b.id].setSelected(1);}}});j.add({id:f.editor.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle"}).setDisabled(1);a(f[e],function(k){k.id=f.editor.dom.uniqueId();j.add({id:k.id,title:k.title,onclick:function(){b=k;h();}});});});return c;}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin);})();