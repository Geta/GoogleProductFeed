(function(g){var d=g.DOM,c=g.dom.Event,f=g.extend,a=g.each,h=g.util.Cookie,b,e=g.explode;g.ThemeManager.requireLangPack("advanced");g.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(i,j){var m=this,l,n,k;m.editor=i;m.url=j;m.onResolveName=new g.util.Dispatcher(this);m.settings=l=f({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",readonly:i.settings.readonly},i.settings);if(!l.font_size_style_values){l.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt";}if(g.is(l.theme_advanced_font_sizes,"string")){l.font_size_style_values=g.explode(l.font_size_style_values);l.font_size_classes=g.explode(l.font_size_classes||"");k={};i.settings.theme_advanced_font_sizes=l.theme_advanced_font_sizes;a(i.getParam("theme_advanced_font_sizes","","hash"),function(q,p){var o;if(p==q&&q>=1&&q<=7){p=q+" ("+m.sizes[q-1]+"pt)";o=l.font_size_classes[q-1];q=l.font_size_style_values[q-1]||(m.sizes[q-1]+"pt");}if(/^\s*\./.test(q)){o=q.replace(/\./g,"");}k[p]=o?{"class":o}:{fontSize:q};});l.theme_advanced_font_sizes=k;}if((n=l.theme_advanced_path_location)&&n!="none"){l.theme_advanced_statusbar_location=l.theme_advanced_path_location;}if(l.theme_advanced_statusbar_location=="none"){l.theme_advanced_statusbar_location=0;}i.onInit.add(function(){if(!i.settings.readonly){i.onNodeChange.add(m._nodeChanged,m);}if(i.settings.content_css!==false){i.dom.loadCSS(i.baseURI.toAbsolute(j+"/skins/"+i.settings.skin+"/content.css"));}});i.onSetProgressState.add(function(p,s,r){var t,q=p.id,o;if(s){m.progressTimer=setTimeout(function(){t=p.getContainer();t=t.insertBefore(d.create("DIV",{style:"position:relative"}),t.firstChild);o=d.get(p.id+"_tbl");d.add(t,"div",{id:q+"_blocker","class":"mceBlocker",style:{width:o.clientWidth+2,height:o.clientHeight+2}});d.add(t,"div",{id:q+"_progress","class":"mceProgress",style:{left:o.clientWidth/2,top:o.clientHeight/2}});},r||0);}else{d.remove(q+"_blocker");d.remove(q+"_progress");clearTimeout(m.progressTimer);}});d.loadCSS(l.editor_css?i.documentBaseURI.toAbsolute(l.editor_css):j+"/skins/"+i.settings.skin+"/ui.css");if(l.skin_variant){d.loadCSS(j+"/skins/"+i.settings.skin+"/ui_"+l.skin_variant+".css");}},createControl:function(l,i){var k,j;if(j=i.createControl(l)){return j;}switch(l){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu();}if((k=this.controls[l])){return i.createButton(l,{title:"advanced."+k[0],cmd:k[1],ui:k[2],value:k[3]});}},execCommand:function(k,j,i){var l=this["_"+k];if(l){l.call(this,j,i);return true;}return false;},_importClasses:function(k){var j=this.editor,i=j.controlManager.get("styleselect");if(i.getLength()==0){a(j.dom.getClasses(),function(m,l){var n="style_"+l;j.formatter.register(n,{inline:"span",attributes:{"class":m["class"]},selector:"*"});i.add(m["class"],n);});}},_createStyleSelect:function(m){var k=this,i=k.editor,l=i.controlManager,j;j=l.createListBox("styleselect",{title:"advanced.style_select",onselect:function(p){var n,o=[];a(j.items,function(q){o.push(q.value);});i.focus();i.undoManager.add();n=i.formatter.matchAll(o);if(!p||n[0]==p){i.formatter.remove(n[0]);}else{i.formatter.apply(p);}i.undoManager.add();i.nodeChanged();return false;}});i.onInit.add(function(){var o=0,n=i.getParam("style_formats");if(n){a(n,function(p){var r,q=0;a(p,function(){q++;});if(q>1){r=p.name=p.name||"style_"+(o++);i.formatter.register(r,p);j.add(p.title,r);}else{j.add(p.title);}});}else{a(i.getParam("theme_advanced_styles","","hash"),function(p,r){var q;if(p){q="style_"+(o++);i.formatter.register(q,{inline:"span",classes:p,selector:"*"});j.add(k.editor.translate(r),q);}});}});if(j.getLength()==0){j.onPostRender.add(function(o,p){if(!j.NativeListBox){c.add(p.id+"_text","focus",k._importClasses,k);c.add(p.id+"_text","mousedown",k._importClasses,k);c.add(p.id+"_open","focus",k._importClasses,k);c.add(p.id+"_open","mousedown",k._importClasses,k);}else{c.add(p.id,"focus",k._importClasses,k);}});}return j;},_createFontSelect:function(){var j,i=this,k=i.editor;j=k.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(l){var m=j.items[j.selectedIndex];if(!l&&m){k.execCommand("FontName",false,m.value);return;}k.execCommand("FontName",false,l);j.select(function(n){return l==n;});return false;}});if(j){a(k.getParam("theme_advanced_fonts",i.settings.theme_advanced_fonts,"hash"),function(m,l){j.add(k.translate(l),m,{style:m.indexOf("dings")==-1?"font-family:"+m:""});});}return j;},_createFontSizeSelect:function(){var l=this,n=l.editor,m,j=0,k=[];m=n.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(i){var o=m.items[m.selectedIndex];if(!i&&o){o=o.value;if(o["class"]){n.formatter.toggle("fontsize_class",{value:o["class"]});n.undoManager.add();n.nodeChanged();}else{n.execCommand("FontSize",false,o.fontSize);}return;}if(i["class"]){n.focus();n.undoManager.add();n.formatter.toggle("fontsize_class",{value:i["class"]});n.undoManager.add();n.nodeChanged();}else{n.execCommand("FontSize",false,i.fontSize);}m.select(function(p){return i==p;});return false;}});if(m){a(l.settings.theme_advanced_font_sizes,function(p,i){var o=p.fontSize;if(o>=1&&o<=7){o=l.sizes[parseInt(o)-1]+"pt";}m.add(i,p,{style:"font-size:"+o,"class":"mceFontSize"+(j++)+(" "+(p["class"]||""))});});}return m;},_createBlockFormats:function(){var j,k={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},i=this;j=i.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"});if(j){a(i.editor.getParam("theme_advanced_blockformats",i.settings.theme_advanced_blockformats,"hash"),function(m,l){j.add(i.editor.translate(l!=m?l:k[m]),m,{"class":"mce_formatPreview mce_"+m});});}return j;},_createForeColorMenu:function(){var l,k=this,j=k.settings,i={},m;if(j.theme_advanced_more_colors){i.more_colors_func=function(){k._mceColorPicker(0,{color:l.value,func:function(n){l.setColor(n);}});};}if(m=j.theme_advanced_text_colors){i.colors=m;}if(j.theme_advanced_default_foreground_color){i.default_color=j.theme_advanced_default_foreground_color;}i.title="advanced.forecolor_desc";i.cmd="ForeColor";i.scope=this;l=k.editor.controlManager.createColorSplitButton("forecolor",i);return l;},_createBackColorMenu:function(){var l,k=this,j=k.settings,i={},m;if(j.theme_advanced_more_colors){i.more_colors_func=function(){k._mceColorPicker(0,{color:l.value,func:function(n){l.setColor(n);}});};}if(m=j.theme_advanced_background_colors){i.colors=m;}if(j.theme_advanced_default_background_color){i.default_color=j.theme_advanced_default_background_color;}i.title="advanced.backcolor_desc";i.cmd="HiliteColor";i.scope=this;l=k.editor.controlManager.createColorSplitButton("backcolor",i);return l;},renderUI:function(r){var m,q,i,w=this,k=w.editor,v=w.settings,j,u,l;m=u=d.create("span",{id:k.id+"_parent","class":"mceEditor "+k.settings.skin+"Skin"+(v.skin_variant?" "+k.settings.skin+"Skin"+w._ufirst(v.skin_variant):"")});if(!d.boxModel){m=d.add(m,"div",{"class":"mceOldBoxModel"});}m=j=d.add(m,"table",{id:k.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});m=i=d.add(m,"tbody");switch((v.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":q=w._rowLayout(v,i,r);break;case"customlayout":q=k.execCallback("theme_advanced_custom_layout",v,i,r,u);break;default:q=w._simpleLayout(v,i,r,u);}m=r.targetNode;l=d.stdMode?j.getElementsByTagName("tr"):j.rows;d.addClass(l[0],"mceFirst");d.addClass(l[l.length-1],"mceLast");a(d.select("tr",i),function(o){d.addClass(o.firstChild,"mceFirst");d.addClass(o.childNodes[o.childNodes.length-1],"mceLast");});if(d.get(v.theme_advanced_toolbar_container)){d.get(v.theme_advanced_toolbar_container).appendChild(u);}else{d.insertAfter(u,m);}c.add(k.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){w._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return c.cancel(n);}});if(!k.getParam("accessibility_focus")){c.add(d.add(u,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(k.id).focus();});}if(v.theme_advanced_toolbar_location=="external"){r.deltaHeight=0;}w.deltaHeight=r.deltaHeight;r.targetNode=null;return{iframeContainer:q,editorContainer:k.id+"_parent",sizeContainer:j,deltaHeight:r.deltaHeight};},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:g.majorVersion+"."+g.minorVersion};},resizeBy:function(i,j){var k=d.get(this.editor.id+"_tbl");this.resizeTo(k.clientWidth+i,k.clientHeight+j);},resizeTo:function(o,i,j){var k=this.editor,l=this.settings,m=d.get(k.id+"_tbl"),n=d.get(k.id+"_ifr");o=Math.max(l.theme_advanced_resizing_min_width||100,o);i=Math.max(l.theme_advanced_resizing_min_height||100,i);o=Math.min(l.theme_advanced_resizing_max_width||65535,o);i=Math.min(l.theme_advanced_resizing_max_height||65535,i);d.setStyle(m,"height","");d.setStyle(n,"height",i);if(l.theme_advanced_resize_horizontal){d.setStyle(m,"width","");d.setStyle(n,"width",o);if(o<m.clientWidth){o=m.clientWidth;d.setStyle(n,"width",m.clientWidth);}}if(j&&l.theme_advanced_resizing_use_cookie){h.setHash("TinyMCE_"+k.id+"_size",{cw:o,ch:i});}},destroy:function(){var i=this.editor.id;c.clear(i+"_resize");c.clear(i+"_path_row");c.clear(i+"_external_close");},_simpleLayout:function(w,i,m,r){var x=this,j=x.editor,k=w.theme_advanced_toolbar_location,u=w.theme_advanced_statusbar_location,l,q,v,y;if(w.readonly){l=d.add(i,"tr");l=q=d.add(l,"td",{"class":"mceIframeContainer"});return q;}if(k=="top"){x._addToolbars(i,m);}if(k=="external"){l=y=d.create("div",{style:"position:relative"});l=d.add(l,"div",{id:j.id+"_external","class":"mceExternalToolbar"});d.add(l,"a",{id:j.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});l=d.add(l,"table",{id:j.id+"_tblext",cellSpacing:0,cellPadding:0});v=d.add(l,"tbody");if(r.firstChild.className=="mceOldBoxModel"){r.firstChild.appendChild(y);}else{r.insertBefore(y,r.firstChild);}x._addToolbars(v,m);j.onMouseUp.add(function(){var n=d.get(j.id+"_external");d.show(n);d.hide(b);var o=c.add(j.id+"_external_close","click",function(){d.hide(j.id+"_external");c.remove(j.id+"_external_close","click",o);});d.show(n);d.setStyle(n,"top",0-d.getRect(j.id+"_tblext").h-1);d.hide(n);d.show(n);n.style.filter="";b=j.id+"_external";n=null;});}if(u=="top"){x._addStatusBar(i,m);}if(!w.theme_advanced_toolbar_container){l=d.add(i,"tr");l=q=d.add(l,"td",{"class":"mceIframeContainer"});}if(k=="bottom"){x._addToolbars(i,m);}if(u=="bottom"){x._addStatusBar(i,m);}return q;},_rowLayout:function(u,i,m){var v=this,j=v.editor,k,x,l=j.controlManager,p,q,w,r;k=u.theme_advanced_containers_default_class||"";x=u.theme_advanced_containers_default_align||"center";a(e(u.theme_advanced_containers||""),function(o,n){var s=u["theme_advanced_container_"+o]||"";switch(s.toLowerCase()){case"mceeditor":p=d.add(i,"tr");p=q=d.add(p,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":v._addStatusBar(i,m);break;default:r=(u["theme_advanced_container_"+o+"_align"]||x).toLowerCase();r="mce"+v._ufirst(r);p=d.add(d.add(i,"tr"),"td",{"class":"mceToolbar "+(u["theme_advanced_container_"+o+"_class"]||k)+" "+r||x});w=l.createToolbar("toolbar"+n);v._addControls(s,w);d.setHTML(p,w.renderHTML());m.deltaHeight-=u.theme_advanced_row_height;}});return q;},_addControls:function(n,i){var m=this,l=m.settings,k,j=m.editor.controlManager;if(l.theme_advanced_disable&&!m._disabled){k={};a(e(l.theme_advanced_disable),function(o){k[o]=1;});m._disabled=k;}else{k=m._disabled;}a(e(n),function(o){var p;if(k&&k[o]){return;}if(o=="tablecontrols"){a(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(q){q=m.createControl(q,j);if(q){i.add(q);}});return;}p=m.createControl(o,j);if(p){i.add(p);}});},_addToolbars:function(A,y){var p=this,w,k,j=p.editor,m=p.settings,q,r=j.controlManager,l,x,u=[],z;z=m.theme_advanced_toolbar_align.toLowerCase();z="mce"+p._ufirst(z);x=d.add(d.add(A,"tr"),"td",{"class":"mceToolbar "+z});if(!j.getParam("accessibility_focus")){u.push(d.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+j.id+"').focus();"},"<!-- IE -->"));}u.push(d.createHTML("a",{href:"#",accesskey:"q",title:j.getLang("advanced.toolbar_focus")},"<!-- IE -->"));for(w=1;(q=m["theme_advanced_buttons"+w]);w++){k=r.createToolbar("toolbar"+w,{"class":"mceToolbarRow"+w});if(m["theme_advanced_buttons"+w+"_add"]){q+=","+m["theme_advanced_buttons"+w+"_add"];}if(m["theme_advanced_buttons"+w+"_add_before"]){q=m["theme_advanced_buttons"+w+"_add_before"]+","+q;}p._addControls(q,k);u.push(k.renderHTML());y.deltaHeight-=m.theme_advanced_row_height;}u.push(d.createHTML("a",{href:"#",accesskey:"z",title:j.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+j.id+"').focus();"},"<!-- IE -->"));d.setHTML(x,u.join(""));},_addStatusBar:function(i,m){var l,u=this,j=u.editor,q=u.settings,p,v,w,k;l=d.add(i,"tr");l=k=d.add(l,"td",{"class":"mceStatusbar"});l=d.add(l,"div",{id:j.id+"_path_row"},q.theme_advanced_path?j.translate("advanced.path")+": ":"&#160;");d.add(l,"a",{href:"#",accesskey:"x"});if(q.theme_advanced_resizing){d.add(k,"a",{id:j.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});if(q.theme_advanced_resizing_use_cookie){j.onPostRender.add(function(){var n=h.getHash("TinyMCE_"+j.id+"_size"),r=d.get(j.id+"_tbl");if(!n){return;}u.resizeTo(n.cw,n.ch);});}j.onPostRender.add(function(){c.add(j.id+"_resize","click",function(n){n.preventDefault();});c.add(j.id+"_resize","mousedown",function(D){var x,t,s,z,r,n,E,o,F,y,B;function A(G){G.preventDefault();F=E+(G.screenX-r);y=o+(G.screenY-n);u.resizeTo(F,y);}function C(G){c.remove(d.doc,"mousemove",x);c.remove(j.getDoc(),"mousemove",t);c.remove(d.doc,"mouseup",s);c.remove(j.getDoc(),"mouseup",z);F=E+(G.screenX-r);y=o+(G.screenY-n);u.resizeTo(F,y,true);}D.preventDefault();r=D.screenX;n=D.screenY;B=d.get(u.editor.id+"_ifr");E=F=B.clientWidth;o=y=B.clientHeight;x=c.add(d.doc,"mousemove",A);t=c.add(j.getDoc(),"mousemove",A);s=c.add(d.doc,"mouseup",C);z=c.add(j.getDoc(),"mouseup",C);});});}m.deltaHeight-=21;l=i=null;},_nodeChanged:function(C,m,x,z,u){var q=this,j,l=0,r,A,o=q.settings,i,y,w,k,B;g.each(q.stateControls,function(n){m.setActive(n,C.queryCommandState(q.controls[n][1]));});function D(t){var n,p=u.parents,s=t;if(typeof(t)=="string"){s=function(v){return v.nodeName==t;};}for(n=0;n<p.length;n++){if(s(p[n])){return p[n];}}}m.setActive("visualaid",C.hasVisual);m.setDisabled("undo",!C.undoManager.hasUndo()&&!C.typing);m.setDisabled("redo",!C.undoManager.hasRedo());m.setDisabled("outdent",!C.queryCommandState("Outdent"));j=D("A");if(A=m.get("link")){if(!j||!j.name){A.setDisabled(!j&&z);A.setActive(!!j);}}if(A=m.get("unlink")){A.setDisabled(!j&&z);A.setActive(!!j&&!j.name);}if(A=m.get("anchor")){A.setActive(!!j&&j.name);}j=D("IMG");if(A=m.get("image")){A.setActive(!!j&&x.className.indexOf("mceItem")==-1);}if(A=m.get("styleselect")){q._importClasses();k=[];a(A.items,function(n){k.push(n.value);});B=C.formatter.matchAll(k);A.select(B[0]);}if(A=m.get("formatselect")){j=D(d.isBlock);if(j){A.select(j.nodeName.toLowerCase());}}D(function(p){if(p.nodeName==="SPAN"){if(!i&&p.className){i=p.className;}if(!y&&p.style.fontSize){y=p.style.fontSize;}if(!w&&p.style.fontFamily){w=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase();}}return false;});if(A=m.get("fontselect")){A.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==w;});}if(A=m.get("fontsizeselect")){if(o.theme_advanced_runtime_fontsize&&!y&&!i){y=C.dom.getStyle(x,"fontSize",true);}A.select(function(n){if(n.fontSize&&n.fontSize===y){return true;}if(n["class"]&&n["class"]===i){return true;}});}if(o.theme_advanced_path&&o.theme_advanced_statusbar_location){j=d.get(C.id+"_path")||d.add(C.id+"_path_row","span",{id:C.id+"_path"});d.setHTML(j,"");D(function(E){var p=E.nodeName.toLowerCase(),t,v,s="";if(E.nodeType!=1||E.nodeName==="BR"||(d.hasClass(E,"mceItemHidden")||d.hasClass(E,"mceItemRemoved"))){return;}if(r=d.getAttrib(E,"mce_name")){p=r;}if(g.isIE&&E.scopeName!=="HTML"){p=E.scopeName+":"+p;}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(r=d.getAttrib(E,"src")){s+="src: "+r+" ";}break;case"a":if(r=d.getAttrib(E,"name")){s+="name: "+r+" ";p+="#"+r;}if(r=d.getAttrib(E,"href")){s+="href: "+r+" ";}break;case"font":if(r=d.getAttrib(E,"face")){s+="font: "+r+" ";}if(r=d.getAttrib(E,"size")){s+="size: "+r+" ";}if(r=d.getAttrib(E,"color")){s+="color: "+r+" ";}break;case"span":if(r=d.getAttrib(E,"style")){s+="style: "+r+" ";}break;}if(r=d.getAttrib(E,"id")){s+="id: "+r+" ";}if(r=E.className){r=r.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(r){s+="class: "+r+" ";if(d.isBlock(E)||p=="img"||p=="span"){p+="."+r;}}}p=p.replace(/(html:)/g,"");p={name:p,node:E,title:s};q.onResolveName.dispatch(q,p);s=p.title;p=p.name;v=d.create("a",{href:"javascript:;",onmousedown:"return false;",title:s,"class":"mcePath_"+(l++)},p);if(j.hasChildNodes()){j.insertBefore(d.doc.createTextNode(" \u00bb "),j.firstChild);j.insertBefore(v,j.firstChild);}else{j.appendChild(v);}},C.getBody());}},_sel:function(i){this.editor.execCommand("mceSelectNodeDepth",false,i);},_mceInsertAnchor:function(i,j){var k=this.editor;k.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(k.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(k.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url});},_mceCharMap:function(){var i=this.editor;i.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(i.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(i.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url});},_mceHelp:function(){var i=this.editor;i.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:true},{theme_url:this.url});},_mceColorPicker:function(i,j){var k=this.editor;j=j||{};k.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(k.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(k.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:j.color,func:j.func,theme_url:this.url});},_mceCodeEditor:function(i,j){var k=this.editor;k.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(k.getParam("theme_advanced_source_editor_width",720)),height:parseInt(k.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url});},_mceImage:function(i,j){var k=this.editor;if(k.dom.getAttrib(k.selection.getNode(),"class").indexOf("mceItem")!=-1){return;}k.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(k.getLang("advanced.image_delta_width",0)),height:275+parseInt(k.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url});},_mceLink:function(i,j){var k=this.editor;k.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(k.getLang("advanced.link_delta_width",0)),height:200+parseInt(k.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url});},_mceNewDocument:function(){var i=this.editor;i.windowManager.confirm("advanced.newdocument",function(j){if(j){i.execCommand("mceSetContent",false,"");}});},_mceForeColor:function(){var i=this;this._mceColorPicker(0,{color:i.fgColor,func:function(j){i.fgColor=j;i.editor.execCommand("ForeColor",false,j);}});},_mceBackColor:function(){var i=this;this._mceColorPicker(0,{color:i.bgColor,func:function(j){i.bgColor=j;i.editor.execCommand("HiliteColor",false,j);}});},_ufirst:function(i){return i.substring(0,1).toUpperCase()+i.substring(1);}});g.ThemeManager.add("advanced",g.themes.AdvancedTheme);}(tinymce));