(function(){tinymce.create("tinymce.plugins.Save",{init:function(c,a){var b=this;b.editor=c;c.addCommand("mceSave",b._save,b);c.addCommand("mceCancel",b._cancel,b);c.addButton("save",{title:"save.save_desc",cmd:"mceSave"});c.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"});c.onNodeChange.add(b._nodeChange,b);c.addShortcut("ctrl+s",c.getLang("save.save_desc"),"mceSave");},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion};},_nodeChange:function(c,b,a){var c=this.editor;if(c.getParam("save_enablewhendirty")){b.setDisabled("save",!c.isDirty());b.setDisabled("cancel",!c.isDirty());}},_save:function(){var e=this.editor,b,a,c,d;b=tinymce.DOM.get(e.id).form||tinymce.DOM.getParent(e.id,"form");if(e.getParam("save_enablewhendirty")&&!e.isDirty()){return;}tinyMCE.triggerSave();if(a=e.getParam("save_onsavecallback")){if(e.execCallback("save_onsavecallback",e)){e.startContent=tinymce.trim(e.getContent({format:"raw"}));e.nodeChanged();}return;}if(b){e.isNotDirty=true;if(b.onsubmit==null||b.onsubmit()!=false){b.submit();}e.nodeChanged();}else{e.windowManager.alert("Error: No form element found.");}},_cancel:function(){var c=this.editor,b,a=tinymce.trim(c.startContent);if(b=c.getParam("save_oncancelcallback")){c.execCallback("save_oncancelcallback",c);return;}c.setContent(a);c.undoManager.clear();c.nodeChanged();}});tinymce.PluginManager.add("save",tinymce.plugins.Save);})();