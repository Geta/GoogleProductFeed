(function(b,a){b.create("tinymce.plugins.epiWindowManager",{init:function(c,d){c.onBeforeRenderUI.add(function(){c.windowManager=new b.epiWindowManager(c);});},getInfo:function(){return{longname:"EPiServer Window Manager",author:"EPiServer AB",authorurl:"http://www.episerver.com",infourl:"http://www.episerver.com",version:"1.0"};}});b.create("tinymce.epiWindowManager:tinymce.WindowManager",{epiWindowManager:function(c){this.parent(c);},open:function(j,g){var h=this,d=h.editor,i;j=j||{};g=g||{};if(!j.type){h.bookmark=d.selection.getBookmark(1);}j.width=parseInt(j.width||320)+(b.isIE?18:0);j.height=parseInt(j.height||240)+(b.isIE?8:0);g.mce_inline=true;g.mce_auto_focus=j.auto_focus;i=j.url||j.file;h.features=j;h.params=g;h.onOpen.dispatch(h,j,g);window.top.tinymce=b;window.top.tinyMCE=tinyMCE;var e=this;var c=function(){e.onClose.dispatch(this);d.windowManager.onClose.dispatch();};d.windowManager.onOpen.dispatch();EPi.CreateDialog(i,c,null,null,j);},close:function(c){EPi.GetDialog(c).Close();},resizeBy:function(c,d,e){e.setTimeout(function(){var g=e.document;if(g==null||g.body==null){return;}var i=g.documentElement.clientHeight!==0?g.documentElement.clientHeight:g.documentElement.offsetHeight;var f=a(g.body);var h=b.isIE?15:20;var j=f.outerHeight()+f.offset().top+h-i;e.resizeBy(0,j>0?j:0);},10);},setTitle:function(d,c){},focus:function(c){}});b.PluginManager.add("epiwindowmanager",b.plugins.epiWindowManager);}(tinymce,epiJQuery));