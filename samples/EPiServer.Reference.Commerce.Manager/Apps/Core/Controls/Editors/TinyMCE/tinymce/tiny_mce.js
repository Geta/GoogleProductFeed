(function(b){var e=/^\s*|\s*$/g,c,a="B".replace(/A(.)|B/,"$1")==="$1";var d={majorVersion:"3",minorVersion:"3.9.3",releaseDate:"2010-12-20",isEPiServerUIVersion:true,_init:function(){var r=this,q=document,l=navigator,f=l.userAgent,g,h,j,k,m,s;r.isOpera=b.opera&&opera.buildNumber;r.isWebKit=/WebKit/.test(f);r.isIE=!r.isWebKit&&!r.isOpera&&(/MSIE/gi).test(f)&&(/Explorer/gi).test(l.appName);r.isIE6=r.isIE&&/MSIE [56]/.test(f);r.isGecko=!r.isWebKit&&/Gecko/.test(f);r.isMac=f.indexOf("Mac")!=-1;r.isAir=/adobeair/i.test(f);r.isIDevice=/(iPad|iPhone)/.test(f);if(b.tinyMCEPreInit){r.suffix=tinyMCEPreInit.suffix;r.baseURL=tinyMCEPreInit.base;r.query=tinyMCEPreInit.query;return;}r.suffix="";h=q.getElementsByTagName("base");for(g=0;g<h.length;g++){if(s=h[g].href){if(/^https?:\/\/[^\/]+$/.test(s)){s+="/";}k=s?s.match(/.*\//)[0]:"";}}function o(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){r.suffix="_src";}if((m=i.src.indexOf("?"))!=-1){r.query=i.src.substring(m+1);}r.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(k&&r.baseURL.indexOf("://")==-1&&r.baseURL.indexOf("/")!==0){r.baseURL=k+r.baseURL;}return r.baseURL;}return null;}h=q.getElementsByTagName("script");for(g=0;g<h.length;g++){if(o(h[g])){return;}}j=q.getElementsByTagName("head")[0];if(j){h=j.getElementsByTagName("script");for(g=0;g<h.length;g++){if(o(h[g])){return;}}}return;},is:function(f,g){if(!g){return f!==c;}if(g=="array"&&(f.hasOwnProperty&&f instanceof Array)){return true;}return typeof(f)==g;},each:function(i,f,g){var j,h;if(!i){return 0;}g=g||i;if(i.length!==c){for(j=0,h=i.length;j<h;j++){if(f.call(g,i[j],j,i)===false){return 0;}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(g,i[j],j,i)===false){return 0;}}}}return 1;},trim:function(f){return(f?""+f:"").replace(e,"");},create:function(k,i){var l=this,n,m,j,g,f,h=0;k=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(k);j=k[3].match(/(^|\.)(\w+)$/i)[2];m=l.createNS(k[3].replace(/\.\w+$/,""));if(m[j]){return;}if(k[2]=="static"){m[j]=i;if(this.onCreate){this.onCreate(k[2],k[3],m[j]);}return;}if(!i[j]){i[j]=function(){};h=1;}m[j]=i[j];l.extend(m[j].prototype,i);if(k[5]){n=l.resolve(k[5]).prototype;g=k[5].match(/\.(\w+)$/i)[1];f=m[j];if(h){m[j]=function(){return n[g].apply(this,arguments);};}else{m[j]=function(){this.parent=n[g];return f.apply(this,arguments);};}m[j].prototype[j]=m[j];l.each(n,function(p,o){m[j].prototype[o]=n[o];});l.each(i,function(p,o){if(n[o]){m[j].prototype[o]=function(){this.parent=n[o];return p.apply(this,arguments);};}else{if(o!=j){m[j].prototype[o]=p;}}});}l.each(i["static"],function(p,o){m[j][o]=p;});if(this.onCreate){this.onCreate(k[2],k[3],m[j].prototype);}},walk:function(i,g,j,h){h=h||this;if(i){if(j){i=i[j];}d.each(i,function(f,k){if(g.call(h,f,k,j)===false){return false;}d.walk(f,g,j,h);});}},createNS:function(j,f){var g,h;f=f||b;j=j.split(".");for(g=0;g<j.length;g++){h=j[g];if(!f[h]){f[h]={};}f=f[h];}return f;},resolve:function(j,f){var g,h;f=f||b;j=j.split(".");for(g=0,h=j.length;g<h;g++){f=f[j[g]];if(!f){break;}}return f;},addUnload:function(g,i){var j=this;g={func:g,scope:i||this};if(!j.unloads){function h(){var l=j.unloads,f,m;if(l){for(m in l){f=l[m];if(f&&f.func){f.func.call(f.scope,1);}}if(b.detachEvent){b.detachEvent("onbeforeunload",k);b.detachEvent("onunload",h);}else{if(b.removeEventListener){b.removeEventListener("unload",h,false);}}j.unloads=f=l=w=h=0;if(b.CollectGarbage){CollectGarbage();}}}function k(){var f=document;if(f.readyState=="interactive"){function l(){f.detachEvent("onstop",l);if(h){h();}f=0;}if(f){f.attachEvent("onstop",l);}b.setTimeout(function(){if(f){f.detachEvent("onstop",l);}},0);}}if(b.attachEvent){b.attachEvent("onunload",h);b.attachEvent("onbeforeunload",k);}else{if(b.addEventListener){b.addEventListener("unload",h,false);}}j.unloads=[g];}else{j.unloads.push(g);}return g;},removeUnload:function(g){var i=this.unloads,h=null;d.each(i,function(f,j){if(f&&f.func==g){i.splice(j,1);h=g;return false;}});return h;},explode:function(g,f){return g?d.map(g.split(f||","),d.trim):g;},_addVer:function(f){var g;if(!this.query){return f;}g=(f.indexOf("?")==-1?"?":"&")+this.query;if(f.indexOf("#")==-1){return f+g;}return f.replace("#",g+"#");},_replace:function(g,h,f){if(a){return f.replace(g,function(){var l=h,k=arguments,j;for(j=0;j<k.length-2;j++){if(k[j]===c){l=l.replace(new RegExp("\\$"+j,"g"),"");}else{l=l.replace(new RegExp("\\$"+j,"g"),k[j]);}}return l;});}return f.replace(g,h);}};d._init();b.tinymce=b.tinyMCE=d;})(window);(function(d,e){var c=e.is,b=/^(href|src|style)$/i,a;if(!d){return alert("Load jQuery first!");}e.$=d;e.adapter={patchEditor:function(h){var l=d.fn;function j(o,m){var n=this;if(m){n.removeAttr("_mce_style");}return l.css.apply(n,arguments);}function i(o,m){var n=this;if(b.test(o)){if(m!==a){n.each(function(q,p){h.dom.setAttrib(p,o,m);});return n;}else{return n.attr("_mce_"+o);}}return l.attr.apply(n,arguments);}function g(m){return function(n){if(n){n=h.dom.processHTML(n);}return m.call(this,n);};}function k(m){if(m.css!==j){m.css=j;m.attr=i;m.html=g(l.html);m.append=g(l.append);m.prepend=g(l.prepend);m.after=g(l.after);m.before=g(l.before);m.replaceWith=g(l.replaceWith);m.tinymce=h;m.pushStack=function(){return k(l.pushStack.apply(this,arguments));};}return m;}h.$=function(o,m){var n=h.getDoc();return k(d(o||n,n||m));};}};e.extend=d.extend;e.extend(e,{map:d.map,grep:function(g,h){return d.grep(g,h||function(){return 1;});},inArray:function(g,h){return d.inArray(h,g||[]);}});var f={"tinymce.dom.DOMUtils":{select:function(i,g){var h=this;return d.find(i,h.get(g)||h.get(h.settings.root_element)||h.doc,[]);},is:function(g,h){return d(this.get(g)).is(h);}}};e.onCreate=function(h,g,i){e.extend(i,f[g]);};})(window.epiJQuery||window.jQuery,tinymce);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[];},add:function(b,a){this.listeners.push({cb:b,scope:a||this.scope});return b;},addToTop:function(b,a){this.listeners.unshift({cb:b,scope:a||this.scope});return b;},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false;}});return c;},dispatch:function(){var d,b=arguments,g,e=this.listeners,f;for(g=0;g<e.length;g++){f=e[g];d=f.cb.apply(f.scope,b);if(d===false){break;}}return d;}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(h,f){var g=this,c,d,e;h=tinymce.trim(h);f=g.settings=f||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(h)||/^\s*#/.test(h)){g.source=h;return;}if(h.indexOf("/")===0&&h.indexOf("//")!==0){h=(f.base_uri?f.base_uri.protocol||"http":"http")+"://mce_host"+h;}if(!/^\w*:?\/\//.test(h)){h=(f.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(f.base_uri.path,h);}h=h.replace(/@@/g,"(mce_at)");h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(h);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(k,b){var j=h[b];if(j){j=j.replace(/\(mce_at\)/g,"@@");}g[k]=j;});if(e=f.base_uri){if(!g.protocol){g.protocol=e.protocol;}if(!g.userInfo){g.userInfo=e.userInfo;}if(!g.port&&g.host=="mce_host"){g.port=e.port;}if(!g.host||g.host=="mce_host"){g.host=e.host;}g.source="";}},setPath:function(b){var c=this;b=/^(.*?)\/?(\w+)?$/.exec(b);c.path=b[0];c.directory=b[1];c.file=b[2];c.source="";c.getURI();},toRelative:function(d){var c=this,b;if(d==="./"){return d;}d=new tinymce.util.URI(d,{base_uri:c});if((d.host!="mce_host"&&c.host!=d.host&&d.host)||c.port!=d.port||c.protocol!=d.protocol){return d.getURI();}b=c.toRelPath(c.path,d.path);if(d.query){b+="?"+d.query;}if(d.anchor){b+="#"+d.anchor;}return b;},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0);},toRelPath:function(b,c){var g,h=0,e="",d,f;b=b.substring(0,b.lastIndexOf("/"));b=b.split("/");g=c.split("/");if(b.length>=g.length){for(d=0,f=b.length;d<f;d++){if(d>=g.length||b[d]!=g[d]){h=d+1;break;}}}if(b.length<g.length){for(d=0,f=g.length;d<f;d++){if(d>=b.length||b[d]!=g[d]){h=d+1;break;}}}if(h==1){return c;}for(d=0,f=b.length-(h-1);d<f;d++){e+="../";}for(d=h-1,f=g.length;d<f;d++){if(d!=h-1){e+="/"+g[d];}else{e+=g[d];}}return e;},toAbsPath:function(b,c){var d,h=0,f=[],e,g;e=/\/$/.test(c)?"/":"";b=b.split("/");c=c.split("/");a(b,function(i){if(i){f.push(i);}});b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]=="."){continue;}if(c[d]==".."){h++;continue;}if(h>0){h--;continue;}f.push(c[d]);}d=b.length-h;if(d<=0){g=f.reverse().join("/");}else{g=b.slice(0,d).join("/")+"/"+f.reverse().join("/");}if(g.indexOf("/")!==0){g="/"+g;}if(e&&g.lastIndexOf("/")!==g.length-1){g+=e;}return g;},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://";}if(b.userInfo){c+=b.userInfo+"@";}if(b.host){c+=b.host;}if(b.port){c+=":"+b.port;}}if(b.path){c+=b.path;}if(b.query){c+="?"+b.query;}if(b.anchor){c+="#"+b.anchor;}b.source=c;}return b.source;}});})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var c=this.get(d),b;if(c){a(c.split("&"),function(e){e=e.split("=");b=b||{};b[unescape(e[0])]=unescape(e[1]);});}return b;},setHash:function(b,j,h,f,g,i){var c="";a(j,function(e,d){c+=(!c?"":"&")+escape(d)+"="+escape(e);});this.set(b,c,h,f,g,i);},get:function(i){var g=document.cookie,h,d=i+"=",f;if(!g){return;}f=g.indexOf("; "+d);if(f==-1){f=g.indexOf(d);if(f!=0){return null;}}else{f+=2;}h=g.indexOf(";",f);if(h==-1){h=g.length;}return unescape(g.substring(f+d.length,h));},set:function(b,i,g,c,f,h){document.cookie=b+"="+escape(i)+((g)?"; expires="+g.toGMTString():"")+((c)?"; path="+escape(c):"")+((f)?"; domain="+f:"")+((h)?"; secure":"");},remove:function(b,e){var c=new Date();c.setTime(c.getTime()-1000);this.set(b,"",c,e,c);}});})();tinymce.create("static tinymce.util.JSON",{serialize:function(a){var b,e,c=tinymce.util.JSON.serialize,d;if(a==null){return"null";}d=typeof a;if(d=="string"){e="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+a.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(f,g){b=e.indexOf(g);if(b+1){return"\\"+e.charAt(b+1);}f=g.charCodeAt().toString(16);return"\\u"+"0000".substring(f.length)+f;})+'"';}if(d=="object"){if(a.hasOwnProperty&&a instanceof Array){for(b=0,e="[";b<a.length;b++){e+=(b>0?",":"")+c(a[b]);}return e+"]";}e="{";for(b in a){e+=typeof a[b]!="function"?(e.length>1?',"':'"')+b+'":'+c(a[b]):"";}return e+"}";}return""+a;},parse:function(s){try{return eval("("+s+")");}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(e){var a,g,h=window,f=0;e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===false?false:true;e.data=e.data||"";function b(c){a=0;try{a=new ActiveXObject(c);}catch(i){}return a;}a=h.XMLHttpRequest?new XMLHttpRequest():b("Microsoft.XMLHTTP")||b("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(e.content_type);}a.open(e.type||(e.data?"POST":"GET"),e.url,e.async);if(e.content_type){a.setRequestHeader("Content-Type",e.content_type);}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(e.data);function d(){if(!e.async||a.readyState==4||f++>10000){if(e.success&&f<10000&&a.status==200){e.success.call(e.success_scope,""+a.responseText,a,e);}else{if(e.error){e.error.call(e.error_scope,f>10000?"TIMED_OUT":"GENERAL",a,e);}}a=null;}else{h.setTimeout(d,10);}}if(!e.async){return d();}g=h.setTimeout(d,10);}}});(function(){var c=tinymce.extend,a=tinymce.util.JSON,b=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0;},send:function(d){var e=d.error,f=d.success;d=c(this.settings,d);d.success=function(h,g){h=a.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."};}if(h.error){e.call(d.error_scope||d.scope,h.error,g);}else{f.call(d.success_scope||d.scope,h.result);}};d.error=function(g,h){e.call(d.error_scope||d.scope,g,h);};d.data=a.serialize({id:d.id||"c"+(this.count++),method:d.method,params:d.params});d.content_type="application/json";b.send(d);},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d);}}});}());(function(j){var n=j.each,h=j.is,c=j.isWebKit,k=j.isIE,a=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,l=i("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),m=i("src,href,style,coords,shape"),d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},f=/[<>&\"]/g,g=/^([a-z0-9],?)+$/i,e=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,b=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;function i(p){var q={},o;p=p.split(",");for(o=p.length;o>=0;o--){q[p[o]]=1;}return q;}j.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(r,o){var p=this,u;p.doc=r;p.win=window;p.files={};p.cssFlicker=false;p.counter=0;p.stdMode=r.documentMode>=8;p.boxModel=!j.isIE||r.compatMode=="CSS1Compat"||p.stdMode;p.settings=o=j.extend({keep_values:false,hex_colors:1,process_html:1},o);if(j.isIE6){try{r.execCommand("BackgroundImageCache",false,true);}catch(q){p.cssFlicker=true;}}if(o.valid_styles){p._styles={};n(o.valid_styles,function(t,s){p._styles[s]=j.explode(t);});}j.addUnload(p.destroy,p);},getRoot:function(){var p=this,o=p.settings;return(o&&p.get(o.root_element))||p.doc.body;},getViewPort:function(q){var p,o;q=!q?this.win:q;p=q.document;o=this.boxModel?p.documentElement:p.body;return{x:q.pageXOffset||o.scrollLeft,y:q.pageYOffset||o.scrollTop,w:q.innerWidth||o.clientWidth,h:q.innerHeight||o.clientHeight};},getRect:function(r){var s,q=this,o;r=q.get(r);s=q.getPos(r);o=q.getSize(r);return{x:s.x,y:s.y,w:o.w,h:o.h};},getSize:function(r){var p=this,q,o;r=p.get(r);q=p.getStyle(r,"width");o=p.getStyle(r,"height");if(q.indexOf("px")===-1){q=0;}if(o.indexOf("px")===-1){o=0;}return{w:parseInt(q)||r.offsetWidth||r.clientWidth,h:parseInt(o)||r.offsetHeight||r.clientHeight};},getParent:function(q,o,p){return this.getParents(q,o,p,false);},getParents:function(q,z,x,v){var y=this,u,p=y.settings,s=[];q=y.get(q);v=v===undefined;if(p.strict_root){x=x||y.getRoot();}if(h(z,"string")){u=z;if(z==="*"){z=function(o){return o.nodeType==1;};}else{z=function(o){return y.is(o,u);};}}while(q){if(q==x||!q.nodeType||q.nodeType===9){break;}if(!z||z(q)){if(v){s.push(q);}else{return q;}}q=q.parentNode;}return v?s:null;},get:function(p){var o;if(p&&this.doc&&typeof(p)=="string"){o=p;p=this.doc.getElementById(p);if(p&&p.id!==o){return this.doc.getElementsByName(o)[1];}}return p;},getNext:function(o,p){return this._findSib(o,p,"nextSibling");},getPrev:function(o,p){return this._findSib(o,p,"previousSibling");},add:function(r,q,u,o,s){var v=this;return this.run(r,function(y){var x,t;x=h(q,"string")?v.doc.createElement(q):q;v.setAttribs(x,u);if(o){if(o.nodeType){x.appendChild(o);}else{v.setHTML(x,o);}}return !s?y.appendChild(x):x;});},create:function(q,p,o){return this.add(this.doc.createElement(q),q,p,o,1);},createHTML:function(r,u,p){var s="",v=this,q;s+="<"+r;for(q in u){if(u.hasOwnProperty(q)){s+=" "+q+'="'+v.encode(u[q])+'"';}}if(typeof(p)!="undefined"){return s+">"+p+"</"+r+">";}return s+" />";},remove:function(o,p){return this.run(o,function(r){var q,s;q=r.parentNode;if(!q){return null;}if(p){while(s=r.firstChild){if(!j.isIE||s.nodeType!==3||s.nodeValue){q.insertBefore(s,r);}else{r.removeChild(s);}}}return q.removeChild(r);});},setStyle:function(r,o,q){var p=this;return p.run(r,function(v){var u,t;u=v.style;o=o.replace(/-(\D)/g,function(s,x){return x.toUpperCase();});if(p.pixelStyles.test(o)&&(j.is(q,"number")||/^[\-0-9\.]+$/.test(q))){q+="px";}switch(o){case"opacity":if(k){u.filter=q===""?"":"alpha(opacity="+(q*100)+")";if(!r.currentStyle||!r.currentStyle.hasLayout){u.display="inline-block";}}u[o]=u["-moz-opacity"]=u["-khtml-opacity"]=q||"";break;case"float":k?u.styleFloat=q:u.cssFloat=q;break;default:u[o]=q||"";}if(p.settings.update_styles){p.setAttrib(v,"_mce_style");}});},getStyle:function(r,o,q){r=this.get(r);if(!r){return false;}if(this.doc.defaultView&&q){o=o.replace(/[A-Z]/g,function(s){return"-"+s;});try{return this.doc.defaultView.getComputedStyle(r,null).getPropertyValue(o);}catch(p){return null;}}o=o.replace(/-(\D)/g,function(s,t){return t.toUpperCase();});if(o=="float"){o=k?"styleFloat":"cssFloat";}if(r.currentStyle&&q){return r.currentStyle[o];}return r.style[o];},setStyles:function(v,p){var r=this,q=r.settings,u;u=q.update_styles;q.update_styles=0;n(p,function(s,o){r.setStyle(v,o,s);});q.update_styles=u;if(q.update_styles){r.setAttrib(v,q.cssText);}},setAttrib:function(r,p,q){var o=this;if(!r||!p){return;}if(o.settings.strict){p=p.toLowerCase();}return this.run(r,function(t){var u=o.settings;switch(p){case"style":if(!h(q,"string")){n(q,function(x,s){o.setStyle(t,s,x);});return;}if(u.keep_values){if(q&&!o._isRes(q)){t.setAttribute("_mce_style",q,2);}else{t.removeAttribute("_mce_style",2);}}t.style.cssText=q;break;case"class":t.className=q||"";break;case"src":case"href":if(u.keep_values){if(u.url_converter){q=u.url_converter.call(u.url_converter_scope||o,q,p,t);}o.setAttrib(t,"_mce_"+p,q,2);}break;case"shape":t.setAttribute("_mce_style",q);break;}if(h(q)&&q!==null&&q.length!==0){t.setAttribute(p,""+q,2);}else{t.removeAttribute(p,2);}});},setAttribs:function(r,p){var q=this;return this.run(r,function(o){n(p,function(t,s){q.setAttrib(o,s,t);});});},getAttrib:function(s,q,r){var p,o=this;s=o.get(s);if(!s||s.nodeType!==1){return false;}if(!h(r)){r="";}if(/^(src|href|style|coords|shape)$/.test(q)){p=s.getAttribute("_mce_"+q);if(p){return p;}}if(k&&o.props[q]){p=s[o.props[q]];p=p&&p.nodeValue?p.nodeValue:p;}if(!p){p=s.getAttribute(q,2);}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(q)){if(s[o.props[q]]===true&&p===""){return q;}return p?q:"";}if(s.nodeName==="FORM"&&s.getAttributeNode(q)){return s.getAttributeNode(q).nodeValue;}if(q==="style"){p=p||s.style.cssText;if(p){p=o.serializeStyle(o.parseStyle(p),s.nodeName);if(o.settings.keep_values&&!o._isRes(p)){s.setAttribute("_mce_style",p);}}}if(c&&q==="class"&&p){p=p.replace(/(apple|webkit)\-[a-z\-]+/gi,"");}if(k){switch(q){case"rowspan":case"colspan":if(p===1){p="";}break;case"size":if(p==="+0"||p===20||p===0){p="";}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(p===0){p="";}break;case"hspace":if(p===-1){p="";}break;case"maxlength":case"tabindex":if(p===32768||p===2147483647||p==="32768"){p="";}break;case"multiple":case"compact":case"noshade":case"nowrap":if(p===65535){return q;}return r;case"shape":p=p.toLowerCase();break;default:if(q.indexOf("on")===0&&p){p=j._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+p);}}}return(p!==undefined&&p!==null&&p!=="")?""+p:r;},getPos:function(q,u){var v=this,o=0,p=0,A,z=v.doc,s;q=v.get(q);u=u||z.body;if(q){if(k&&!v.stdMode){q=q.getBoundingClientRect();A=v.boxModel?z.documentElement:z.body;o=v.getStyle(v.select("html")[0],"borderWidth");o=(o=="medium"||v.boxModel&&!v.isIE6)&&2||o;return{x:q.left+A.scrollLeft-o,y:q.top+A.scrollTop-o};}s=q;while(s&&s!=u&&s.nodeType){o+=s.offsetLeft||0;p+=s.offsetTop||0;s=s.offsetParent;}s=q.parentNode;while(s&&s!=u&&s.nodeType){o-=s.scrollLeft||0;p-=s.scrollTop||0;s=s.parentNode;}}return{x:o,y:p};},parseStyle:function(p){var x=this,v=x.settings,r={};if(!p){return r;}function u(y,B,D){var C,A,z,o;C=r[y+"-top"+B];if(!C){return;}A=r[y+"-right"+B];if(C!=A){return;}z=r[y+"-bottom"+B];if(A!=z){return;}o=r[y+"-left"+B];if(z!=o){return;}r[D]=o;delete r[y+"-top"+B];delete r[y+"-right"+B];delete r[y+"-bottom"+B];delete r[y+"-left"+B];}function q(z,s,y,o){var A;A=r[s];if(!A){return;}A=r[y];if(!A){return;}A=r[o];if(!A){return;}r[z]=r[s]+" "+r[y]+" "+r[o];delete r[s];delete r[y];delete r[o];}p=p.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");n(p.split(";"),function(t){var o,s=[];if(t){t=t.replace(/_MCE_SEMI_/g,";");t=t.replace(/url\([^\)]+\)/g,function(y){s.push(y);return"url("+s.length+")";});t=t.split(":");o=j.trim(t[1]);o=o.replace(/url\(([^\)]+)\)/g,function(y,z){return s[parseInt(z)-1];});o=o.replace(/rgb\([^\)]+\)/g,function(y){return x.toHex(y);});if(v.url_converter){o=o.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(z,y){return"url("+v.url_converter.call(v.url_converter_scope||x,x.decode(y),"style",null)+")";});}r[j.trim(t[0]).toLowerCase()]=o;}});u("border","","border");u("border","-width","border-width");u("border","-color","border-color");u("border","-style","border-style");u("padding","","padding");u("margin","","margin");q("border","border-width","border-style","border-color");if(k){if(r.border=="medium none"){r.border="";}}return r;},serializeStyle:function(p,v){var u=this,r="";function q(s,o){if(o&&s){if(o.indexOf("-")===0){return;}switch(o){case"font-weight":if(s==700){s="bold";}break;case"color":case"background-color":s=s.toLowerCase();break;}r+=(r?" ":"")+o+": "+s+";";}}if(v&&u._styles){n(u._styles["*"],function(o){q(p[o],o);});n(u._styles[v.toLowerCase()],function(o){q(p[o],o);});}else{n(p,q);}return r;},loadCSS:function(q){var p=this,r=p.doc,o;if(!q){q="";}o=p.select("head")[0];n(q.split(","),function(s){var t;if(p.files[s]){return;}p.files[s]=true;t=p.create("link",{rel:"stylesheet",href:j._addVer(s)});if(k&&r.documentMode&&r.recalc){t.onload=function(){r.recalc();t.onload=null;};}o.appendChild(t);});},addClass:function(o,p){return this.run(o,function(q){var r;if(!p){return 0;}if(this.hasClass(q,p)){return q.className;}r=this.removeClass(q,p);return q.className=(r!=""?(r+" "):"")+p;});},removeClass:function(r,q){var p=this,o;return p.run(r,function(s){var t;if(p.hasClass(s,q)){if(!o){o=new RegExp("(^|\\s+)"+q+"(\\s+|$)","g");}t=s.className.replace(o," ");t=j.trim(t!=" "?t:"");s.className=t;if(!t){s.removeAttribute("class");s.removeAttribute("className");}return t;}return s.className;});},hasClass:function(o,p){o=this.get(o);if(!o||!p){return false;}return(" "+o.className+" ").indexOf(" "+p+" ")!==-1;},show:function(o){return this.setStyle(o,"display","block");},hide:function(o){return this.setStyle(o,"display","none");},isHidden:function(o){o=this.get(o);return !o||o.style.display=="none"||this.getStyle(o,"display")=="none";},uniqueId:function(o){return(!o?"mce_":o)+(this.counter++);},setHTML:function(q,o){var p=this;return this.run(q,function(z){var r,s,t,u,y,r;o=p.processHTML(o);if(k){function v(){while(z.firstChild){z.firstChild.removeNode();}try{z.innerHTML="<br />"+o;z.removeChild(z.firstChild);}catch(x){r=p.create("div");r.innerHTML="<br />"+o;n(r.childNodes,function(A,B){if(B){z.appendChild(A);}});}}if(p.settings.fix_ie_paragraphs){o=o.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>');}v();if(p.settings.fix_ie_paragraphs){t=z.getElementsByTagName("p");for(s=t.length-1,r=0;s>=0;s--){u=t[s];if(!u.hasChildNodes()){if(!u._mce_keep){r=1;break;}u.removeAttribute("_mce_keep");}}}if(r){o=o.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');o=o.replace(/<\/p>/gi,"</div>");v();if(p.settings.fix_ie_paragraphs){t=z.getElementsByTagName("DIV");for(s=t.length-1;s>=0;s--){u=t[s];if(u._mce_tmp){y=p.doc.createElement("p");u.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(x,A){var B;if(A!=="_mce_tmp"){B=u.getAttribute(A);if(!B&&A==="class"){B=u.className;}y.setAttribute(A,B);}});for(r=0;r<u.childNodes.length;r++){y.appendChild(u.childNodes[r].cloneNode(true));}u.swapNode(y);}}}}}else{z.innerHTML=o;}return o;});},processHTML:function(o){var v=this,u=v.settings,q=[];if(!u.process_html){return o;}if(k){o=o.replace(/&apos;/g,"&#39;");o=o.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"");}o=j._replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>",o);if(u.keep_values){if(/<script|noscript|style/i.test(o)){function p(t){t=t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");t=t.replace(/^[\r\n]*|[\r\n]*$/g,"");t=t.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");t=t.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return t;}o=o.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(t,s,x){if(!s){s=' type="text/javascript"';}s=s.replace(/src=\"([^\"]+)\"?/i,function(y,z){if(u.url_converter){z=v.encode(u.url_converter.call(u.url_converter_scope||v,v.decode(z),"src","script"));}return'_mce_src="'+z+'"';});if(j.trim(x)){q.push(p(x));x="<!--\nMCE_SCRIPT:"+(q.length-1)+"\n// -->";}return"<mce:script"+s+">"+x+"</mce:script>";});o=o.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(t,s,x){if(x){q.push(p(x));x="<!--\nMCE_SCRIPT:"+(q.length-1)+"\n-->";}return"<mce:style"+s+">"+x+"</mce:style><style "+s+' _mce_bogus="1">'+x+"</style>";});o=o.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(t,s,x){return"<mce:noscript"+s+"><!--"+v.encode(x).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>";});}o=j._replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->",o);function r(s){return s.replace(e,function(z,x,y,t){return"<"+x+y.replace(b,function(B,E,A,F,C){var D;E=E.toLowerCase();A=A||F||C||"";if(l[E]){if(A==="false"||A==="0"){return;}return E+'="'+E+'"';}if(m[E]&&y.indexOf("_mce_"+E)==-1){D=v.decode(A);if(u.url_converter&&(E=="src"||E=="href")){D=u.url_converter.call(u.url_converter_scope||v,D,E,x);}if(E=="style"){D=v.serializeStyle(v.parseStyle(D),E);}return E+'="'+A+'" _mce_'+E+'="'+v.encode(D)+'"';}return B;})+t+">";});}o=r(o);o=o.replace(/MCE_SCRIPT:([0-9]+)/g,function(s,t){return q[t];});}return o;},getOuterHTML:function(p){var o;p=this.get(p);if(!p){return null;}if(p.outerHTML!==undefined){return p.outerHTML;}o=(p.ownerDocument||this.doc).createElement("body");o.appendChild(p.cloneNode(true));return o.innerHTML;},setOuterHTML:function(s,o,r){var q=this;function p(y,t,x){var v,u;u=x.createElement("body");u.innerHTML=t;v=u.lastChild;while(v){q.insertAfter(v.cloneNode(true),y);v=v.previousSibling;}q.remove(y);}return this.run(s,function(t){t=q.get(t);if(t.nodeType==1){r=r||t.ownerDocument||q.doc;if(k){try{if(k&&t.nodeType==1){t.outerHTML=o;}else{p(t,o,r);}}catch(u){p(t,o,r);}}else{p(t,o,r);}}});},decode:function(o){var r,p,q;if(/&[\w#]+;/.test(o)){r=this.doc.createElement("div");r.innerHTML=o;p=r.firstChild;q="";if(p){do{q+=p.nodeValue;}while(p=p.nextSibling);}return q||o;}return o;},encode:function(o){return(""+o).replace(f,function(p){return d[p];});},insertAfter:function(o,p){p=this.get(p);return this.run(o,function(s){var q,r;q=p.parentNode;r=p.nextSibling;if(r){q.insertBefore(s,r);}else{q.appendChild(s);}return s;});},isBlock:function(o){if(o.nodeType&&o.nodeType!==1){return false;}o=o.nodeName||o;return a.test(o);},replace:function(s,p,r){var q=this;if(h(p,"array")){s=s.cloneNode(true);}return q.run(p,function(t){if(r){n(j.grep(t.childNodes),function(o){s.appendChild(o);});}return t.parentNode.replaceChild(s,t);});},rename:function(o,r){var p=this,q;if(o.nodeName!=r.toUpperCase()){q=p.create(r);n(p.getAttribs(o),function(s){p.setAttrib(q,s.nodeName,p.getAttrib(o,s.nodeName));});p.replace(q,o,1);}return q||o;},findCommonAncestor:function(q,r){var o=q,p;while(o){p=r;while(p&&o!=p){p=p.parentNode;}if(o==p){break;}o=o.parentNode;}if(!o&&q.ownerDocument){return q.ownerDocument.documentElement;}return o;},toHex:function(p){var q=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(p);function o(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r;}if(q){p="#"+o(q[1])+o(q[2])+o(q[3]);return p;}return p;},getClasses:function(){var u=this,r=[],o,p={},v=u.settings.class_filter,x;if(u.classes){return u.classes;}function s(t){n(t.imports,function(y){s(y);});n(t.cssRules||t.rules,function(y){switch(y.type||1){case 1:if(y.selectorText){n(y.selectorText.split(","),function(z){z=z.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(z)||!/\.[\w\-]+$/.test(z)){return;}x=z;z=j._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",z);if(v&&!(z=v(z,x))){return;}if(!p[z]){r.push({"class":z});p[z]=1;}});}break;case 3:s(y.styleSheet);break;}});}try{n(u.doc.styleSheets,s);}catch(q){}if(r.length>0){u.classes=r;}return r;},run:function(v,p,q){var r=this,u;if(r.doc&&typeof(v)==="string"){v=r.get(v);}if(!v){return false;}q=q||this;if(!v.nodeType&&(v.length||v.length===0)){u=[];n(v,function(o,s){if(o){if(typeof(o)=="string"){o=r.doc.getElementById(o);}u.push(p.call(q,o,s));}});return u;}return p.call(q,v);},getAttribs:function(p){var q;p=this.get(p);if(!p){return[];}if(k){q=[];if(p.nodeName=="OBJECT"){return p.attributes;}if(p.nodeName==="OPTION"&&this.getAttrib(p,"selected")){q.push({specified:1,nodeName:"selected"});}p.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(o){q.push({specified:1,nodeName:o});});return q;}return p.attributes;},destroy:function(o){var p=this;if(p.events){p.events.destroy();}p.win=p.doc=p.root=p.events=null;if(!o){j.removeUnload(p.destroy);}},createRng:function(){var o=this.doc;return o.createRange?o.createRange():new j.dom.Range(this);},nodeIndex:function(r,s){var p=0,t,o,q;if(r){for(t=r.nodeType,r=r.previousSibling,o=r;r;r=r.previousSibling){q=r.nodeType;if(s&&q==3){if(q==t||!r.nodeValue.length){continue;}}p++;t=q;}}return p;},split:function(z,x,o){var y=this,u=y.createRng(),q,s,v;function p(t){var r,A=t.childNodes;if(t.nodeType==1&&t.getAttribute("_mce_type")=="bookmark"){return;}for(r=A.length-1;r>=0;r--){p(A[r]);}if(t.nodeType!=9){if(t.nodeType==3&&t.nodeValue.length>0){if(!y.isBlock(t.parentNode)||j.trim(t.nodeValue).length>0){return;}}if(t.nodeType==1){A=t.childNodes;if(A.length==1&&A[0]&&A[0].nodeType==1&&A[0].getAttribute("_mce_type")=="bookmark"){t.parentNode.insertBefore(A[0],t);}if(A.length||/^(br|hr|input|img)$/i.test(t.nodeName)){return;}}y.remove(t);}return t;}if(z&&x){u.setStart(z.parentNode,y.nodeIndex(z));u.setEnd(x.parentNode,y.nodeIndex(x));q=u.extractContents();u=y.createRng();u.setStart(x.parentNode,y.nodeIndex(x)+1);u.setEnd(z.parentNode,y.nodeIndex(z)+1);s=u.extractContents();v=z.parentNode;v.insertBefore(p(q),z);if(o){v.replaceChild(o,x);}else{v.insertBefore(x,z);}v.insertBefore(p(s),z);y.remove(z);return o||x;}},bind:function(o,s,r,p){var q=this;if(!q.events){q.events=new j.dom.EventUtils();}return q.events.add(o,s,r,p||this);},unbind:function(o,r,q){var p=this;if(!p.events){p.events=new j.dom.EventUtils();}return p.events.remove(o,r,q);},_findSib:function(p,r,s){var q=this,o=r;if(p){if(h(o,"string")){o=function(t){return q.is(t,r);};}for(p=p[s];p;p=p[s]){if(o(p)){return p;}}}return null;},_isRes:function(o){return/^(top|left|bottom|right|width|height)/i.test(o)||/;\s*(top|left|bottom|right|width|height)/i.test(o);}});j.DOM=new j.dom.DOMUtils(document,{process_html:0});})(tinymce);(function(a){function b(S){var m=this,I=S.doc,M=0,N=1,y=2,J=true,Q=false,D="startOffset",A="startContainer",L="endContainer",d="endOffset",x=tinymce.extend,U=S.nodeIndex;x(m,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:J,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:C,setEnd:R,setStartBefore:k,setStartAfter:q,setEndBefore:f,setEndAfter:v,collapse:z,selectNode:h,selectNodeContents:e,compareBoundaryPoints:O,deleteContents:j,extractContents:p,cloneContents:g,insertNode:c,surroundContents:H,cloneRange:F});function C(t,V){i(J,t,V);}function R(t,V){i(Q,t,V);}function k(t){C(t.parentNode,U(t));}function q(t){C(t.parentNode,U(t)+1);}function f(t){R(t.parentNode,U(t));}function v(t){R(t.parentNode,U(t)+1);}function z(t){if(t){m[L]=m[A];m[d]=m[D];}else{m[A]=m[L];m[D]=m[d];}m.collapsed=J;}function h(t){k(t);v(t);}function e(t){C(t,0);R(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length);}function O(W,X){var t=m[A],Y=m[D],V=m[L],Z=m[d];if(W===0){return n(t,Y,t,Y);}if(W===1){return n(t,Y,V,Z);}if(W===2){return n(V,Z,V,Z);}if(W===3){return n(V,Z,t,Y);}}function j(){E(y);}function p(){return E(M);}function g(){return E(N);}function c(Y){var X=this[A],W=this[D],V,t;if((X.nodeType===3||X.nodeType===4)&&X.nodeValue){if(!W){X.parentNode.insertBefore(Y,X);}else{if(W>=X.nodeValue.length){S.insertAfter(Y,X);}else{V=X.splitText(W);X.parentNode.insertBefore(Y,V);}}}else{if(X.childNodes.length>0){t=X.childNodes[W];}if(t){X.insertBefore(Y,t);}else{X.appendChild(Y);}}}function H(t){var V=m.extractContents();m.insertNode(t);t.appendChild(V);m.selectNode(t);}function F(){return x(new b(S),{startContainer:m[A],startOffset:m[D],endContainer:m[L],endOffset:m[d],collapsed:m.collapsed,commonAncestorContainer:m.commonAncestorContainer});}function P(V,W){var t;if(V.nodeType==3){return V;}if(W<0){return V;}t=V.firstChild;while(t&&W>0){--W;t=t.nextSibling;}if(t){return t;}return V;}function B(){return(m[A]==m[L]&&m[D]==m[d]);}function n(t,V,ad,ac){var ab,Z,Y,aa,X,W;if(t==ad){if(V==ac){return 0;}if(V<ac){return -1;}return 1;}ab=ad;while(ab&&ab.parentNode!=t){ab=ab.parentNode;}if(ab){Z=0;Y=t.firstChild;while(Y!=ab&&Z<V){Z++;Y=Y.nextSibling;}if(V<=Z){return -1;}return 1;}ab=t;while(ab&&ab.parentNode!=ad){ab=ab.parentNode;}if(ab){Z=0;Y=ad.firstChild;while(Y!=ab&&Z<ac){Z++;Y=Y.nextSibling;}if(Z<ac){return -1;}return 1;}aa=S.findCommonAncestor(t,ad);X=t;while(X&&X.parentNode!=aa){X=X.parentNode;}if(!X){X=aa;}W=ad;while(W&&W.parentNode!=aa){W=W.parentNode;}if(!W){W=aa;}if(X==W){return 0;}Y=aa.firstChild;while(Y){if(Y==X){return -1;}if(Y==W){return 1;}Y=Y.nextSibling;}}function i(X,Y,t){var W,V;if(X){m[A]=Y;m[D]=t;}else{m[L]=Y;m[d]=t;}W=m[L];while(W.parentNode){W=W.parentNode;}V=m[A];while(V.parentNode){V=V.parentNode;}if(V==W){if(n(m[A],m[D],m[L],m[d])>0){m.collapse(X);}}else{m.collapse(X);}m.collapsed=B();m.commonAncestorContainer=S.findCommonAncestor(m[A],m[L]);}function E(aa){var ab,W=0,t=0,Z,Y,V,X,ac,ad;if(m[A]==m[L]){return r(aa);}for(ab=m[L],Z=ab.parentNode;Z;ab=Z,Z=Z.parentNode){if(Z==m[A]){return K(ab,aa);}++W;}for(ab=m[A],Z=ab.parentNode;Z;ab=Z,Z=Z.parentNode){if(Z==m[L]){return o(ab,aa);}++t;}Y=t-W;V=m[A];while(Y>0){V=V.parentNode;Y--;}X=m[L];while(Y<0){X=X.parentNode;Y++;}for(ac=V.parentNode,ad=X.parentNode;ac!=ad;ac=ac.parentNode,ad=ad.parentNode){V=ac;X=ad;}return T(V,X,aa);}function r(aa){var Y,ab,X,W,t,Z,V;if(aa!=y){Y=I.createDocumentFragment();}if(m[D]==m[d]){return Y;}if(m[A].nodeType==3){ab=m[A].nodeValue;X=ab.substring(m[D],m[d]);if(aa!=N){m[A].deleteData(m[D],m[d]-m[D]);m.collapse(J);}if(aa==y){return;}Y.appendChild(I.createTextNode(X));return Y;}W=P(m[A],m[D]);t=m[d]-m[D];while(t>0){Z=W.nextSibling;V=s(W,aa);if(Y){Y.appendChild(V);}--t;W=Z;}if(aa!=N){m.collapse(J);}return Y;}function K(ab,Y){var W,V,aa,t,X,Z;if(Y!=y){W=I.createDocumentFragment();}V=G(ab,Y);if(W){W.appendChild(V);}aa=U(ab);t=aa-m[D];if(t<=0){if(Y!=N){m.setEndBefore(ab);m.collapse(Q);}return W;}V=ab.previousSibling;while(t>0){X=V.previousSibling;Z=s(V,Y);if(W){W.insertBefore(Z,W.firstChild);}--t;V=X;}if(Y!=N){m.setEndBefore(ab);m.collapse(Q);}return W;}function o(V,aa){var Y,W,X,t,Z,ab;if(aa!=y){Y=I.createDocumentFragment();}X=u(V,aa);if(Y){Y.appendChild(X);}W=U(V);++W;t=m[d]-W;X=V.nextSibling;while(t>0){Z=X.nextSibling;ab=s(X,aa);if(Y){Y.appendChild(ab);}--t;X=Z;}if(aa!=N){m.setStartAfter(V);m.collapse(J);}return Y;}function T(V,ad,aa){var W,X,ac,Y,ae,t,Z,ab;if(aa!=y){X=I.createDocumentFragment();}W=u(V,aa);if(X){X.appendChild(W);}ac=V.parentNode;Y=U(V);ae=U(ad);++Y;t=ae-Y;Z=V.nextSibling;while(t>0){ab=Z.nextSibling;W=s(Z,aa);if(X){X.appendChild(W);}Z=ab;--t;}W=G(ad,aa);if(X){X.appendChild(W);}if(aa!=N){m.setStartAfter(V);m.collapse(J);}return X;}function G(Y,aa){var X=P(m[L],m[d]-1),Z,ac,t,V,ab,W=X!=m[L];if(X==Y){return l(X,W,Q,aa);}Z=X.parentNode;ac=l(Z,Q,Q,aa);while(Z){while(X){t=X.previousSibling;V=l(X,W,Q,aa);if(aa!=y){ac.insertBefore(V,ac.firstChild);}W=J;X=t;}if(Z==Y){return ac;}X=Z.previousSibling;Z=Z.parentNode;ab=l(Z,Q,Q,aa);if(aa!=y){ab.appendChild(ac);}ac=ab;}}function u(Y,aa){var X=P(m[A],m[D]),W=X!=m[A],Z,ac,V,t,ab;if(X==Y){return l(X,W,J,aa);}Z=X.parentNode;ac=l(Z,Q,J,aa);while(Z){while(X){V=X.nextSibling;t=l(X,W,J,aa);if(aa!=y){ac.appendChild(t);}W=J;X=V;}if(Z==Y){return ac;}X=Z.nextSibling;Z=Z.parentNode;ab=l(Z,Q,J,aa);if(aa!=y){ab.appendChild(ac);}ac=ab;}}function l(X,Z,W,aa){var Y,V,ab,t,ac;if(Z){return s(X,aa);}if(X.nodeType==3){Y=X.nodeValue;if(W){t=m[D];V=Y.substring(t);ab=Y.substring(0,t);}else{t=m[d];V=Y.substring(0,t);ab=Y.substring(t);}if(aa!=N){X.nodeValue=ab;}if(aa==y){return;}ac=X.cloneNode(Q);ac.nodeValue=V;return ac;}if(aa==y){return;}return X.cloneNode(Q);}function s(t,V){if(V!=y){return V==N?t.cloneNode(J):t;}t.parentNode.removeChild(t);}}a.Range=b;})(tinymce.dom);(function(){function a(d){var j=this,b="\uFEFF",e,i,h=d.dom,c=true,f=false;function g(){var m=d.getRng(),l=h.createRng(),n,o;n=m.item?m.item(0):m.parentElement();if(n.ownerDocument!=h.doc){return l;}if(m.item||!n.hasChildNodes()){l.setStart(n.parentNode,h.nodeIndex(n));l.setEnd(l.startContainer,l.startOffset+1);return l;}o=d.isCollapsed();function k(p){var s,y,v,t,A=0,x,r,u,q,z;q=m.duplicate();q.collapse(p);s=h.create("a");u=q.parentElement();if(!u.hasChildNodes()){l[p?"setStart":"setEnd"](u,0);return;}u.appendChild(s);q.moveToElementText(s);z=m.compareEndPoints(p?"StartToStart":"EndToEnd",q);if(z>0){l[p?"setStartAfter":"setEndAfter"](u);h.remove(s);return;}t=tinymce.grep(u.childNodes);x=t.length-1;while(A<=x){r=Math.floor((A+x)/2);u.insertBefore(s,t[r]);q.moveToElementText(s);z=m.compareEndPoints(p?"StartToStart":"EndToEnd",q);if(z>0){A=r+1;}else{if(z<0){x=r-1;}else{found=true;break;}}}y=z>0||r==0?s.nextSibling:s.previousSibling;if(y.nodeType==1){h.remove(s);v=h.nodeIndex(y);y=y.parentNode;if(!p||r>0){v++;}}else{if(z>0||r==0){q.setEndPoint(p?"StartToStart":"EndToEnd",m);v=q.text.length;}else{q.setEndPoint(p?"StartToStart":"EndToEnd",m);v=y.nodeValue.length-q.text.length;}h.remove(s);}l[p?"setStart":"setEnd"](y,v);}k(true);if(!o){k();}return l;}this.addRange=function(k){var r,o,s,t,n,u,q=d.dom.doc,l=q.body;function m(x){var B,A,y,v,z;y=h.create("a");B=x?s:n;A=x?t:u;v=r.duplicate();if(B==q){B=l;A=0;}if(B.nodeType==3){B.parentNode.insertBefore(y,B);v.moveToElementText(y);v.moveStart("character",A);h.remove(y);r.setEndPoint(x?"StartToStart":"EndToEnd",v);}else{z=B.childNodes;if(z.length){if(A>=z.length){h.insertAfter(y,z[z.length-1]);}else{B.insertBefore(y,z[A]);}v.moveToElementText(y);}else{y=q.createTextNode(b);B.appendChild(y);v.moveToElementText(y.parentNode);v.collapse(c);}r.setEndPoint(x?"StartToStart":"EndToEnd",v);h.remove(y);}}this.destroy();s=k.startContainer;t=k.startOffset;n=k.endContainer;u=k.endOffset;r=l.createTextRange();if(s==n&&s.nodeType==1&&t==u-1){if(t==u-1){try{o=l.createControlRange();o.addElement(s.childNodes[t]);o.select();o.scrollIntoView();return;}catch(p){}}}m(true);m();r.select();r.scrollIntoView();};this.getRangeAt=function(){if(!e||!tinymce.dom.RangeUtils.compareRanges(i,d.getRng())){e=g();i=d.getRng();}try{e.startContainer.nextSibling;}catch(k){e=g();i=null;}return e;};this.destroy=function(){i=e=null;};}tinymce.dom.TridentSelection=a;})();(function(e){var a=e.each,c=e.DOM,f=e.isIE,d=e.isWebKit,b;e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[];},add:function(h,g,l,j){var m,k=this,i=k.events,p;if(g instanceof Array){p=[];a(g,function(o){p.push(k.add(h,o,l,j));});return p;}if(h&&h.hasOwnProperty&&h instanceof Array){p=[];a(h,function(n){n=c.get(n);p.push(k.add(n,g,l,j));});return p;}h=c.get(h);if(!h){return;}m=function(n){if(k.disabled){return;}n=n||window.event;if(n&&f){if(!n.target){n.target=n.srcElement;}e.extend(n,k._stoppers);}if(!j){return l(n);}return l.call(j,n);};if(g=="unload"){e.unloads.unshift({func:m});return m;}if(g=="init"){if(k.domLoaded){m();}else{k.inits.push(m);}return m;}i.push({obj:h,name:g,func:l,cfunc:m,scope:j});k._add(h,g,m);return l;},remove:function(h,g,m){var l=this,i=l.events,k=false,j;if(h&&h.hasOwnProperty&&h instanceof Array){j=[];a(h,function(n){n=c.get(n);j.push(l.remove(n,g,m));});return j;}h=c.get(h);a(i,function(n,o){if(n.obj==h&&n.name==g&&(!m||(n.func==m||n.cfunc==m))){i.splice(o,1);l._remove(h,g,n.cfunc);k=true;return false;}});return k;},clear:function(g){var k=this,j=k.events,h,l;if(g){g=c.get(g);for(h=j.length-1;h>=0;h--){l=j[h];if(l.obj===g){k._remove(l.obj,l.name,l.cfunc);l.obj=l.cfunc=null;j.splice(h,1);}}}},cancel:function(g){if(!g){return false;}this.stop(g);return this.prevent(g);},stop:function(g){if(g.stopPropagation){g.stopPropagation();}else{g.cancelBubble=true;}return false;},prevent:function(g){if(g.preventDefault){g.preventDefault();}else{g.returnValue=false;}return false;},destroy:function(){var g=this;a(g.events,function(h,j){g._remove(h.obj,h.name,h.cfunc);h.obj=h.cfunc=null;});g.events=[];g=null;},_add:function(g,i,h){if(g.attachEvent){g.attachEvent("on"+i,h);}else{if(g.addEventListener){g.addEventListener(i,h,false);}else{g["on"+i]=h;}}},_remove:function(g,j,i){if(g){try{if(g.detachEvent){g.detachEvent("on"+j,i);}else{if(g.removeEventListener){g.removeEventListener(j,i,false);}else{g["on"+j]=null;}}}catch(h){}}},_pageInit:function(g){var h=this;if(h.domLoaded){return;}h.domLoaded=true;a(h.inits,function(i){i();});h.inits=[];},_wait:function(h){var i=this,g=h.document;if(h.tinyMCE_GZ&&tinyMCE_GZ.loaded){i.domLoaded=1;return;}if(g.attachEvent){g.attachEvent("onreadystatechange",function(){if(g.readyState==="complete"){g.detachEvent("onreadystatechange",arguments.callee);i._pageInit(h);}});if(g.documentElement.doScroll&&h==h.top){(function(){if(i.domLoaded){return;}try{g.documentElement.doScroll("left");}catch(j){setTimeout(arguments.callee,0);return;}i._pageInit(h);})();}}else{if(g.addEventListener){i._add(h,"DOMContentLoaded",function(){i._pageInit(h);});}}i._add(h,"load",function(){i._pageInit(h);});},_stoppers:{preventDefault:function(){this.returnValue=false;},stopPropagation:function(){this.cancelBubble=true;}}});b=e.dom.Event=new e.dom.EventUtils();b._wait(window);e.addUnload(function(){b.destroy();});})(tinymce);(function(a){a.dom.Element=function(b,e){var d=this,f,c;d.settings=e=e||{};d.id=b;d.dom=f=e.dom||a.DOM;if(!a.isIE){c=f.get(d.id);}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){d[g]=function(){var h=[b],j;for(j=0;j<arguments.length;j++){h.push(arguments[j]);}h=f[g].apply(f,h);d.update(g);return h;};});a.extend(d,{on:function(i,g,h){return a.dom.Event.add(d.id,i,g,h);},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))};},getSize:function(){var g=f.get(d.id);return{w:parseInt(d.getStyle("width")||g.clientWidth),h:parseInt(d.getStyle("height")||g.clientHeight)};},moveTo:function(h,g){d.setStyles({left:h,top:g});},moveBy:function(h,i){var g=d.getXY();d.moveTo(g.x+h,g.y+i);},resizeTo:function(i,g){d.setStyles({width:i,height:g});},resizeBy:function(j,g){var i=d.getSize();d.resizeTo(i.w+j,i.h+g);},update:function(g){var h;if(a.isIE6&&e.blocker){g=g||"";if(g.indexOf("get")===0||g.indexOf("has")===0||g.indexOf("is")===0){return;}if(g=="remove"){f.remove(d.blocker);return;}if(!d.blocker){d.blocker=f.uniqueId();h=f.add(e.container||f.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});f.setStyle(h,"opacity",0);}else{h=f.get(d.blocker);}f.setStyles(h,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1});}}});};})(tinymce);(function(b){function a(f){return f.replace(/[\n\r]+/g,"");}var c=b.is,d=b.isIE,e=b.each;b.create("tinymce.dom.Selection",{Selection:function(i,g,h){var f=this;f.dom=i;f.win=g;f.serializer=h;e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){f[j]=new b.util.Dispatcher(f);});if(!f.win.getSelection){f.tridentSel=new b.dom.TridentSelection(f);}if(b.isIE&&i.boxModel){this._fixIESelection();}b.addUnload(f.destroy,f);},getContent:function(k){var m=this,j=m.getRng(),l=m.dom.create("body"),f=m.getSel(),g,h,i;k=k||{};g=h="";k.get=true;k.format=k.format||"html";m.onBeforeGetContent.dispatch(m,k);if(k.format=="text"){return m.isCollapsed()?"":(j.text||(f.toString?f.toString():""));}if(j.cloneContents){i=j.cloneContents();if(i){l.appendChild(i);}}else{if(c(j.item)||c(j.htmlText)){l.innerHTML=j.item?j.item(0).outerHTML:j.htmlText;}else{l.innerHTML=j.toString();}}if(/^\s/.test(l.innerHTML)){g=" ";}if(/\s+$/.test(l.innerHTML)){h=" ";}k.getInner=true;k.content=m.isCollapsed()?"":g+m.serializer.serialize(l,k)+h;m.onGetContent.dispatch(m,k);return k.content;},setContent:function(f,k){var l=this,m=l.getRng(),j,n=l.win.document;k=k||{format:"html"};k.set=true;f=k.content=l.dom.processHTML(f);l.onBeforeSetContent.dispatch(l,k);f=k.content;if(m.insertNode){f+='<span id="__caret">_</span>';if(m.startContainer==n&&m.endContainer==n){n.body.innerHTML=f;}else{m.deleteContents();if(n.body.childNodes.length==0){n.body.innerHTML=f;}else{if(m.createContextualFragment){m.insertNode(m.createContextualFragment(f));}else{var g=n.createDocumentFragment(),i=n.createElement("div");g.appendChild(i);i.outerHTML=f;m.insertNode(g);}}}j=l.dom.get("__caret");m=n.createRange();m.setStartBefore(j);m.setEndBefore(j);l.setRng(m);l.dom.remove("__caret");}else{if(m.item){n.execCommand("Delete",false,null);m=l.getRng();}m.pasteHTML(f);}l.onSetContent.dispatch(l,k);},getStart:function(){var j=this.getRng(),f,g,i,h;if(j.duplicate||j.item){if(j.item){return j.item(0);}i=j.duplicate();i.collapse(1);f=i.parentElement();g=h=j.parentElement();while(h=h.parentNode){if(h==f){f=g;break;}}if(f&&f.nodeName=="BODY"){return f.firstChild||f;}return f;}else{f=j.startContainer;if(f.nodeType==1&&f.hasChildNodes()){f=f.childNodes[Math.min(f.childNodes.length-1,j.startOffset)];}if(f&&f.nodeType==3){return f.parentNode;}return f;}},getEnd:function(){var h=this,f=h.getRng(),i,g;if(f.duplicate||f.item){if(f.item){return f.item(0);}f=f.duplicate();f.collapse(0);i=f.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild||i;}return i;}else{i=f.endContainer;g=f.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[g>0?g-1:g];}if(i&&i.nodeType==3){return i.parentNode;}return i;}},getBookmark:function(l,i){var k=this,o=k.dom,r,j,q,s,g,h,n,p="\uFEFF",f;function u(x,v){var t=0;e(o.select(x),function(y,z){if(y==v){t=z;}});return t;}if(l==2){function m(){var t=k.getRng(true),y=o.getRoot(),x={};function v(A,B){var G=A[B?"startContainer":"endContainer"],E=A[B?"startOffset":"endOffset"],z=[],C,D,F=0;if(G.nodeType==3){if(i){for(C=G.previousSibling;C&&C.nodeType==3;C=C.previousSibling){E+=C.nodeValue.length;}}z.push(E);}else{D=G.childNodes;if(E>=D.length&&D.length){F=1;E=Math.max(0,D.length-1);}z.push(k.dom.nodeIndex(D[E],i)+F);}for(;G&&G!=y;G=G.parentNode){z.push(k.dom.nodeIndex(G,i));}return z;}x.start=v(t,true);if(!k.isCollapsed()){x.end=v(t);}return x;}return m();}if(l){return{rng:k.getRng()};}r=k.getRng();q=o.uniqueId();s=tinyMCE.activeEditor.selection.isCollapsed();f="overflow:hidden;line-height:0px";if(r.duplicate||r.item){if(!r.item){j=r.duplicate();r.collapse();r.pasteHTML('<span _mce_type="bookmark" id="'+q+'_start" style="'+f+'">'+p+"</span>");if(!s){j.collapse(false);j.pasteHTML('<span _mce_type="bookmark" id="'+q+'_end" style="'+f+'">'+p+"</span>");}}else{h=r.item(0);g=h.nodeName;return{name:g,index:u(g,h)};}}else{h=k.getNode();g=h.nodeName;if(g=="IMG"){return{name:g,index:u(g,h)};}j=r.cloneRange();if(!s){j.collapse(false);j.insertNode(o.create("span",{_mce_type:"bookmark",id:q+"_end",style:f},p));}r.collapse(true);r.insertNode(o.create("span",{_mce_type:"bookmark",id:q+"_start",style:f},p));}k.moveToBookmark({id:q,keep:1});return{id:q};},moveToBookmark:function(h){var j=this,o=j.dom,g,n,q,f,i,r,s,k;if(j.tridentSel){j.tridentSel.destroy();}if(h){if(h.start){q=o.createRng();f=o.getRoot();function p(v){var t=h[v?"start":"end"],u,z,y,x;if(t){for(z=f,u=t.length-1;u>=1;u--){x=z.childNodes;if(x.length){z=x[t[u]];}}if(v){q.setStart(z,t[0]);}else{q.setEnd(z,t[0]);}}}p(true);p();j.setRng(q);}else{if(h.id){function l(z){var v=o.get(h.id+"_"+z),u,A,x,y,t=h.keep;if(v){u=v.parentNode;if(z=="start"){if(!t){A=o.nodeIndex(v);}else{u=v.firstChild;A=1;}i=r=u;s=k=A;}else{if(!t){A=o.nodeIndex(v);}else{u=v.firstChild;A=1;}r=u;k=A;}if(!t){y=v.previousSibling;x=v.nextSibling;e(b.grep(v.childNodes),function(B){if(B.nodeType==3){B.nodeValue=B.nodeValue.replace(/\uFEFF/g,"");}});while(v=o.get(h.id+"_"+z)){o.remove(v,1);}if(y&&x&&y.nodeType==x.nodeType&&y.nodeType==3&&!b.isOpera){A=y.nodeValue.length;y.appendData(x.nodeValue);o.remove(x);if(z=="start"){i=r=y;s=k=A;}else{r=y;k=A;}}}}}function m(t){if(!d&&o.isBlock(t)&&!t.innerHTML){t.innerHTML='<br _mce_bogus="1" />';}return t;}l("start");l("end");if(i){q=o.createRng();q.setStart(m(i),s);q.setEnd(m(r),k);j.setRng(q);}}else{if(h.name){j.select(o.select(h.name)[h.index]);}else{if(h.rng){j.setRng(h.rng);}}}}}},select:function(k,i){var j=this,g=j.dom,f=g.createRng(),l;l=g.nodeIndex(k);f.setStart(k.parentNode,l);f.setEnd(k.parentNode,l+1);if(i){function h(n,o){var m=new b.dom.TreeWalker(n,n);do{if(n.nodeType==3&&b.trim(n.nodeValue).length!=0){if(o){f.setStart(n,0);}else{f.setEnd(n,n.nodeValue.length);}return;}if(n.nodeName=="BR"){if(o){f.setStartBefore(n);}else{f.setEndBefore(n);}return;}}while(n=(o?m.next():m.prev()));}h(k,1);h(k);}j.setRng(f);return k;},isCollapsed:function(){var h=this,f=h.getRng(),g=h.getSel();if(!f||f.item){return false;}if(f.compareEndPoints){return f.compareEndPoints("StartToEnd",f)===0;}return !g||f.collapsed;},collapse:function(g){var h=this,f=h.getRng(),i;if(f.item){i=f.item(0);f=this.win.document.body.createTextRange();f.moveToElementText(i);}f.collapse(!!g);h.setRng(f);},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection;},getRng:function(f){var l=this,k,j,g,i=l.win.document;if(f&&l.tridentSel){return l.tridentSel.getRangeAt(0);}try{if(k=l.getSel()){j=k.rangeCount>0?k.getRangeAt(0):(k.createRange?k.createRange():i.createRange());}}catch(h){}if(b.isIE&&j.setStart&&i.selection.createRange().item){g=i.selection.createRange().item(0);j=i.createRange();j.setStartBefore(g);j.setEndAfter(g);}if(!j){j=i.createRange?i.createRange():i.body.createTextRange();}if(l.selectedRange&&l.explicitRange){if(j.compareBoundaryPoints(j.START_TO_START,l.selectedRange)===0&&j.compareBoundaryPoints(j.END_TO_END,l.selectedRange)===0){j=l.explicitRange;}else{l.selectedRange=null;l.explicitRange=null;}}return j;},setRng:function(f){var g,h=this;if(!h.tridentSel){g=h.getSel();if(g){h.explicitRange=f;g.removeAllRanges();g.addRange(f);h.selectedRange=g.getRangeAt(0);}}else{if(f.cloneRange){h.tridentSel.addRange(f);return;}try{f.select();}catch(i){}}},setNode:function(f){var g=this;g.setContent(g.dom.getOuterHTML(f));return f;},getNode:function(){var g=this,i=g.getRng(),f=g.getSel(),h;if(i.setStart){if(!i){return g.dom.getRoot();}h=i.commonAncestorContainer;if(!i.collapsed){if(i.startContainer==i.endContainer){if(i.startOffset-i.endOffset<2){if(i.startContainer.hasChildNodes()){h=i.startContainer.childNodes[i.startOffset];}}}if(b.isWebKit&&f.anchorNode&&f.anchorNode.nodeType==1){return f.anchorNode.childNodes[f.anchorOffset];}}if(h&&h.nodeType==3){return h.parentNode;}return h;}return i.item?i.item(0):i.parentElement();},getSelectedBlocks:function(g,l){var k=this,h=k.dom,m,f,i,j=[];m=h.getParent(g||k.getStart(),h.isBlock);f=h.getParent(l||k.getEnd(),h.isBlock);if(m){j.push(m);}if(m&&f&&m!=f){i=m;while((i=i.nextSibling)&&i!=f){if(h.isBlock(i)){j.push(i);}}}if(f&&m!=f){j.push(f);}return j;},destroy:function(f){var g=this;g.win=null;if(g.tridentSel){g.tridentSel.destroy();}if(!f){b.removeUnload(g.destroy);}},_fixIESelection:function(){var h=this.dom,l=h.doc,g=l.body,f,j;l.documentElement.unselectable=true;function i(p,q){var n=g.createTextRange();try{n.moveToPoint(p,q);}catch(o){n=null;}return n;}function m(o){var n;if(o.button){n=i(o.x,o.y);if(n){if(n.compareEndPoints("StartToStart",j)>0){n.setEndPoint("StartToStart",j);}else{n.setEndPoint("EndToEnd",j);}n.select();}}else{k();}}function k(){h.unbind(l,"mouseup",k);h.unbind(l,"mousemove",m);f=0;}h.bind(l,"mousedown",function(o){if(o.target.nodeName==="HTML"){if(f){k();}f=1;j=i(o.x,o.y);if(j){h.bind(l,"mouseup",k);h.bind(l,"mousemove",m);var n=tinyMCE.activeEditor;if(n&&n._gainedFocus){setTimeout(function(){j.select();},1);return;}h.win.focus();j.select();}}});}});})(tinymce);(function(a){a.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(c){function b(){var d=document.implementation;if(!d||!d.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument");}catch(e){}try{return new ActiveXObject("Microsoft.XmlDom");}catch(e){}}else{return d.createDocument("","",null);}}this.doc=b();this.valid=a.isOpera||a.isWebKit;this.reset();},reset:function(){var c=this,b=c.doc;if(b.firstChild){b.removeChild(b.firstChild);}c.node=b.appendChild(b.createElement("html"));},writeStartElement:function(b){var c=this;c.node=c.node.appendChild(c.doc.createElement(b));},writeAttribute:function(b,c){if(this.valid){c=c.replace(/>/g,"%MCGT%");}this.node.setAttribute(b,c);},writeEndElement:function(){this.node=this.node.parentNode;},writeFullEndElement:function(){var c=this,b=c.node;b.appendChild(c.doc.createTextNode(""));c.node=b.parentNode;},writeText:function(b){if(this.valid){b=b.replace(/>/g,"%MCGT%");}this.node.appendChild(this.doc.createTextNode(b));},writeCDATA:function(b){this.node.appendChild(this.doc.createCDATASection(b));},writeComment:function(b){if(a.isIE){b=b.replace(/^\-|\-$/g," ");}this.node.appendChild(this.doc.createComment(b.replace(/\-\-/g," ")));},getContent:function(){var b;b=this.doc.xml||new XMLSerializer().serializeToString(this.doc);b=b.replace(/<\?[^?]+\?>|<html[^>]*>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");b=b.replace(/ ?\/>/g," />");if(this.valid){b=b.replace(/\%MCGT%/g,"&gt;");}return b;}});})(tinymce);(function(b){var c=/[&\"<>]/g,d=/[<>&]/g,a={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};b.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(e){this.settings=b.extend({indent_char:" ",indentation:0},e);this.reset();},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0;},writeStartElement:function(e){this._writeAttributesEnd();this.writeRaw("<"+e);this.tags.push(e);this.inAttr=true;this.count++;this.elementCount=this.count;this.attrs={};},writeAttribute:function(g,f){var e=this;if(!e.attrs[g]){e.writeRaw(" "+e.encode(g,true)+'="'+e.encode(f,true)+'"');e.attrs[g]=f;}},writeEndElement:function(){var e;if(this.tags.length>0){e=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+e+">");}if(this.settings.indentation>0){this.writeRaw("\n");}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n");}}},writeText:function(e){this._writeAttributesEnd();this.writeRaw(this.encode(e));this.count++;},writeCDATA:function(e){this._writeAttributesEnd();this.writeRaw("<![CDATA["+e+"]]>");this.count++;},writeComment:function(e){this._writeAttributesEnd();this.writeRaw("<!--"+e+"-->");this.count++;},writeRaw:function(e){this.str+=e;},encode:function(f,e){return f.replace(e?c:d,function(g){return a[g];});},getContent:function(){return this.str;},_writeAttributesEnd:function(e){if(!this.inAttr){return;}this.inAttr=false;if(e&&this.elementCount==this.count){this.writeRaw(" />");return false;}this.writeRaw(">");return true;}});})(tinymce);(function(d){var c=d.extend,a=d.each,f=d.util.Dispatcher,e=d.isIE,b=d.isGecko;function g(h){return h.replace(/([?+*])/g,".$1");}d.create("tinymce.dom.Serializer",{Serializer:function(h){var i=this;i.key=0;i.onPreProcess=new f(i);i.onPostProcess=new f(i);try{i.writer=new d.dom.XMLWriter();}catch(j){i.writer=new d.dom.StringWriter();}if(d.isIE&&document.documentMode>8){i.writer=new d.dom.StringWriter();}i.settings=h=c({dom:d.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},h);i.dom=h.dom;i.schema=h.schema;if(h.entity_encoding=="named"&&!h.entities){h.entity_encoding="raw";}if(h.remove_redundant_brs){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(m,n,o){if(/^<br \/>\s*<\//.test(m)){return"</"+o+">";}return m;});});}if(h.element_format=="html"){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/<([^>]+) \/>/g,"<$1>");});}if(h.fix_list_elements){i.onPreProcess.add(function(l,t){var q,k,u=["ol","ul"],m,s,v,y=/^(OL|UL)$/,z;function A(x,r){var p=r.split(","),o;while((x=x.previousSibling)!=null){for(o=0;o<p.length;o++){if(x.nodeName==p[o]){return x;}}}return null;}for(k=0;k<u.length;k++){q=i.dom.select(u[k],t.node);for(m=0;m<q.length;m++){s=q[m];v=s.parentNode;if(y.test(v.nodeName)){z=A(s,"LI");if(!z){z=i.dom.create("li");z.innerHTML="&nbsp;";z.appendChild(s);v.insertBefore(z,v.firstChild);}else{z.appendChild(s);}}}}});}if(h.fix_table_elements){i.onPreProcess.add(function(k,l){a(i.dom.select("p table",l.node).reverse(),function(p){var m=i.dom.getParent(p.parentNode,"table,p");if(m.nodeName!="TABLE"){try{i.dom.split(m,p);}catch(o){}}});});}},setEntities:function(m){var n=this,k,h,j={},o;if(n.entityLookup){return;}k=m.split(",");for(h=0;h<k.length;h+=2){o=k[h];if(o==34||o==38||o==60||o==62){continue;}j[String.fromCharCode(k[h])]=k[h+1];o=parseInt(k[h]).toString(16);}n.entityLookup=j;},setRules:function(h){var i=this;i._setup();i.rules={};i.wildRules=[];i.validElements={};return i.addRules(h);},addRules:function(h){var i=this,j;if(!h){return;}i._setup();a(h.split(","),function(n){var m=n.split(/\[|\]/),o=m[0].split("/"),q,r,l,k=[];if(j){r=d.extend([],j.attribs);}if(m.length>1){a(m[1].split("|"),function(t){var p={},u;r=r||[];t=t.replace(/::/g,"~");t=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(t);t[2]=t[2].replace(/~/g,":");if(t[1]=="!"){q=q||[];q.push(t[2]);}if(t[1]=="-"){for(u=0;u<r.length;u++){if(r[u].name==t[2]){r.splice(u,1);return;}}}switch(t[3]){case"=":p.defaultVal=t[4]||"";break;case":":p.forcedVal=t[4];break;case"<":p.validVals=t[4].split("?");break;}if(/[*.?]/.test(t[2])){l=l||[];p.nameRE=new RegExp("^"+g(t[2])+"$");l.push(p);}else{p.name=t[2];r.push(p);}k.push(t[2]);});}a(o,function(t,p){var v=t.charAt(0),u=1,y={};if(j){if(j.noEmpty){y.noEmpty=j.noEmpty;}if(j.fullEnd){y.fullEnd=j.fullEnd;}if(j.padd){y.padd=j.padd;}}switch(v){case"-":y.noEmpty=true;break;case"+":y.fullEnd=true;break;case"#":y.padd=true;break;default:u=0;}o[p]=t=t.substring(u);i.validElements[t]=1;if(/[*.?]/.test(o[0])){y.nameRE=new RegExp("^"+g(o[0])+"$");i.wildRules=i.wildRules||{};i.wildRules.push(y);}else{y.name=o[0];if(o[0]=="@"){j=y;}i.rules[t]=y;}y.attribs=r;if(q){y.requiredAttribs=q;}if(l){t="";a(k,function(s){if(t){t+="|";}t+="("+g(s)+")";});y.validAttribsRE=new RegExp("^"+t.toLowerCase()+"$");y.wildAttribs=l;}});});h="";a(i.validElements,function(m,l){if(h){h+="|";}if(l!="@"){h+=l;}});i.validElementsRE=new RegExp("^("+g(h.toLowerCase())+")$");},findRule:function(m){var k=this,l=k.rules,h,j;k._setup();j=l[m];if(j){return j;}l=k.wildRules;for(h=0;h<l.length;h++){if(l[h].nameRE.test(m)){return l[h];}}return null;},findAttribRule:function(l,k){var j,h=l.wildAttribs;for(j=0;j<h.length;j++){if(h[j].nameRE.test(k)){return h[j];}}return null;},serialize:function(k,l){var i,r=this,p,q,j,m;r._setup();l=l||{};l.format=l.format||"html";r.processObj=l;if(e){m=[];a(k.getElementsByTagName("option"),function(h){var o=r.dom.getAttrib(h,"selected");m.push(o?o:null);});}k=k.cloneNode(true);if(e){a(k.getElementsByTagName("option"),function(h,o){r.dom.setAttrib(h,"selected",m[o]);});}j=k.ownerDocument.implementation;if(j.createHTMLDocument){p=j.createHTMLDocument("");a(k.nodeName=="BODY"?k.childNodes:[k],function(h){p.body.appendChild(p.importNode(h,true));});if(k.nodeName!="BODY"){k=p.body.firstChild;}else{k=p.body;}q=r.dom.doc;r.dom.doc=p;}r.key=""+(parseInt(r.key)+1);if(!l.no_events){l.node=k;r.onPreProcess.dispatch(r,l);}r.writer.reset();r._info=l;r._serializeNode(k,l.getInner);l.content=r.writer.getContent();if(q){r.dom.doc=q;}if(!l.no_events){r.onPostProcess.dispatch(r,l);}r._postProcess(l);l.node=null;return d.trim(l.content);},_postProcess:function(k){var n=this,m=n.settings,i=k.content,j=[],l;if(k.format=="html"){l=n._protect({content:i,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});i=l.content;if(m.entity_encoding!=="raw"){i=n._encode(i);}if(!k.set){i=d._replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,m.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>",i);if(m.remove_linebreaks){i=i.replace(/\r?\n|\r/g," ");i=d._replace(/(<[^>]+>)\s+/g,"$1 ",i);i=d._replace(/\s+(<\/[^>]+>)/g," $1",i);i=d._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>",i);i=d._replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>",i);i=d._replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>",i);}if(m.apply_source_formatting&&m.indent_mode=="simple"){i=d._replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n",i);i=d._replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>",i);i=d._replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n",i);i=i.replace(/\n\n/g,"\n");}}i=n._unprotect(i,l);i=d._replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>",i);if(m.entity_encoding=="raw"){i=d._replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>",i);}i=i.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(o,h,p){return"<noscript"+h+">"+n.dom.decode(p.replace(/<!--|-->/g,""))+"</noscript>";});}k.content=i;},_serializeNode:function(D,k){var r=this,q=r.settings,y=r.writer,x,j,z,o,B,E,h,C,m,J,I,A,F,G,p,u,H;if(!q.node_filter||q.node_filter(D)){switch(D.nodeType){case 1:if(D.hasAttribute?D.hasAttribute("_mce_bogus"):D.getAttribute("_mce_bogus")){return;}F=p=false;x=D.hasChildNodes();J=D.getAttribute("_mce_name")||D.nodeName.toLowerCase();u=D.getAttribute("_mce_type");if(u){if(!r._info.cleanup){F=true;return;}else{p=1;}}if(e){H=D.scopeName;if(H&&H!=="HTML"&&H!=="html"){J=H+":"+J;}}if(J.indexOf("mce:")===0){J=J.substring(4);}if(!p){if(!r.validElementsRE||!r.validElementsRE.test(J)||(r.invalidElementsRE&&r.invalidElementsRE.test(J))||k){F=true;break;}}if(e){if(q.fix_content_duplication){if(D._mce_serialized==r.key){return;}D._mce_serialized=r.key;}if(J.charAt(0)=="/"){J=J.substring(1);}}else{if(b){if(D.nodeName==="BR"&&D.getAttribute("type")=="_moz"){return;}}}if(q.validate_children){if(r.elementName&&!r.schema.isValid(r.elementName,J)){F=true;break;}r.elementName=J;}I=r.findRule(J);if(!I){F=true;break;}J=I.name||J;G=q.closed.test(J);if((!x&&I.noEmpty)||(e&&!J)){F=true;break;}if(I.requiredAttribs){E=I.requiredAttribs;for(o=E.length-1;o>=0;o--){if(this.dom.getAttrib(D,E[o])!==""){break;}}if(o==-1){F=true;break;}}y.writeStartElement(J);if(I.attribs){for(o=0,h=I.attribs,B=h.length;o<B;o++){E=h[o];m=r._getAttrib(D,E);if(m!==null){y.writeAttribute(E.name,m);}}}if(I.validAttribsRE){h=r.dom.getAttribs(D);for(o=h.length-1;o>-1;o--){C=h[o];if(C.specified){E=C.nodeName.toLowerCase();if(q.invalid_attrs.test(E)||!I.validAttribsRE.test(E)){continue;}A=r.findAttribRule(I,E);m=r._getAttrib(D,A,E);if(m!==null){y.writeAttribute(E,m);}}}}if(u&&p){y.writeAttribute("_mce_type",u);}if(J==="script"&&d.trim(D.innerHTML)){y.writeText("// ");y.writeCDATA(D.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,""));x=false;break;}if(I.padd){if(x&&(z=D.firstChild)&&z.nodeType===1&&D.childNodes.length===1){if(z.hasAttribute?z.hasAttribute("_mce_bogus"):z.getAttribute("_mce_bogus")){y.writeText("\u00a0");}}else{if(!x){y.writeText("\u00a0");}}}break;case 3:if(q.validate_children&&r.elementName&&!r.schema.isValid(r.elementName,"#text")){return;}return y.writeText(D.nodeValue);case 4:return y.writeCDATA(D.nodeValue);case 8:return y.writeComment(D.nodeValue);}}else{if(D.nodeType==1){x=D.hasChildNodes();}}if(x&&!G){z=D.firstChild;while(z){r._serializeNode(z);r.elementName=J;z=z.nextSibling;}}if(!F){if(!G){y.writeFullEndElement();}else{y.writeEndElement();}}},_protect:function(h){var k=this;h.items=h.items||[];function j(l){return l.replace(/[\r\n\\]/g,function(m){if(m==="\n"){return"\\n";}else{if(m==="\\"){return"\\\\";}}return"\\r";});}function i(l){return l.replace(/\\[\\rn]/g,function(m){if(m==="\\n"){return"\n";}else{if(m==="\\\\"){return"\\";}}return"\r";});}a(h.patterns,function(l){h.content=i(j(h.content).replace(l.pattern,function(p,m,n,o){n=i(n);if(l.encode){n=k._encode(n);}h.items.push(n);return m+"<!--mce:"+(h.items.length-1)+"-->"+o;}));});return h;},_unprotect:function(i,j){i=i.replace(/\<!--mce:([0-9]+)--\>/g,function(h,k){return j.items[parseInt(k)];});j.items=[];return i;},_encode:function(i){var k=this,j=k.settings,m;if(j.entity_encoding!=="raw"){if(j.entity_encoding.indexOf("named")!=-1){k.setEntities(j.entities);m=k.entityLookup;i=i.replace(/[\u007E-\uFFFF]/g,function(h){var l;if(l=m[h]){h="&"+l+";";}return h;});}if(j.entity_encoding.indexOf("numeric")!=-1){i=i.replace(/[\u007E-\uFFFF]/g,function(h){return"&#"+h.charCodeAt(0)+";";});}}return i;},_setup:function(){var i=this,h=this.settings;if(i.done){return;}i.done=1;i.setRules(h.valid_elements);i.addRules(h.extended_valid_elements);if(h.invalid_elements){i.invalidElementsRE=new RegExp("^("+g(h.invalid_elements.replace(/,/g,"|").toLowerCase())+")$");}if(h.attrib_value_filter){i.attribValueFilter=h.attribValueFilter;}},_getAttrib:function(m,k,h){var j,l;h=h||k.name;if(k.forcedVal&&(l=k.forcedVal)){if(l==="{$uid}"){return this.dom.uniqueId();}return l;}l=this.dom.getAttrib(m,h);switch(h){case"rowspan":case"colspan":if(l=="1"){l="";}break;}if(this.attribValueFilter){l=this.attribValueFilter(h,l,m);}if(k.validVals){for(j=k.validVals.length-1;j>=0;j--){if(l==k.validVals[j]){break;}}if(j==-1){return null;}}if(l===""&&typeof(k.defaultVal)!="undefined"){l=k.defaultVal;if(l==="{$uid}"){return this.dom.uniqueId();}return l;}else{if(h=="class"&&this.processObj.get){l=l.replace(/\s?mceItem\w+\s?/g,"");}}if(l===""){return null;}return l;}});})(tinymce);(function(a){a.dom.ScriptLoader=function(b){var l=0,j=1,i=2,e={},f=[],d={},h=[],c=0,g;function k(q,n){var s=this,p=a.DOM,u,m,v,r;function o(){p.remove(r);if(u){u.onreadystatechange=u.onload=u=null;}n();}r=p.uniqueId();if(a.isIE6){m=new a.util.URI(q);v=location;if(m.host==v.hostname&&m.port==v.port&&(m.protocol+":")==v.protocol){a.util.XHR.send({url:a._addVer(m.getURI()),success:function(t){var x=p.create("script",{type:"text/javascript"});x.text=t;document.getElementsByTagName("head")[0].appendChild(x);p.remove(x);o();}});return;}}u=p.create("script",{id:r,type:"text/javascript",src:a._addVer(q)});if(!a.isIE){u.onload=o;}u.onreadystatechange=function(){var t=u.readyState;if(t=="complete"||t=="loaded"){o();}};(document.getElementsByTagName("head")[0]||document.body).appendChild(u);}this.isDone=function(m){return e[m]==i;};this.markDone=function(m){e[m]=i;};this.add=this.load=function(m,p,n){var o,q=e[m];if(q==g){f.push(m);e[m]=l;}if(p){if(!d[m]){d[m]=[];}d[m].push({func:p,scope:n||this});}};this.loadQueue=function(m,n){this.loadScripts(f,m,n);};this.loadScripts=function(q,p,m){var n;function o(r){a.each(d[r],function(s){s.func.call(s.scope);});d[r]=g;}h.push({func:p,scope:m||this});n=function(){var r=a.grep(q);q.length=0;a.each(r,function(s){if(e[s]==i){o(s);return;}if(e[s]!=j){e[s]=j;c++;k(s,function(){e[s]=i;c--;o(s);n();});}});if(!c){a.each(h,function(s){s.func.call(s.scope);});h.length=0;}};n();};};a.ScriptLoader=new a.dom.ScriptLoader();})(tinymce);tinymce.dom.TreeWalker=function(d,c){var a=d;function b(j,f,i,e){var g,h;if(j){if(!e&&j[f]){return j[f];}if(j!=c){g=j[i];if(g){return g;}for(h=j.parentNode;h&&h!=c;h=h.parentNode){g=h[i];if(g){return g;}}}}}this.current=function(){return a;};this.next=function(e){return(a=b(a,"firstChild","nextSibling",e));};this.prev=function(e){return(a=b(a,"lastChild","lastSibling",e));};};(function(){var b={};function a(c,d){var f;function e(g){return g.replace(/[A-Z]+/g,function(h){return e(c[h]);});}for(f in c){if(c.hasOwnProperty(f)){c[f]=e(c[f]);}}e(d).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(h,l,k){var g,j={};k=k.split(/\|/);for(g=k.length-1;g>=0;g--){j[k[g]]=1;}b[l]=j;});}a({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");tinymce.dom.Schema=function(){var d=this,c=b;d.isValid=function(g,f){var e=c[g];return !!(e&&(!f||e[f]));};};})();(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(o,i){var h=o.startContainer,r=o.startOffset,p=o.endContainer,j=o.endOffset,d,q,g,e,l,n,f;f=c.select("td.mceSelected,th.mceSelected");if(f.length>0){a.each(f,function(t){i([t]);});return;}function m(v,x,t){var u=[];for(;v&&v!=t;v=v[x]){u.push(v);}return u;}function s(t,u){do{if(t.parentNode==u){return t;}t=t.parentNode;}while(t);}function k(x,u,v){var t=v?"nextSibling":"previousSibling";for(e=x,l=e.parentNode;e&&e!=u;e=l){l=e.parentNode;n=m(e==x?e:e[t],t);if(n.length){if(!v){n.reverse();}i(n);}}}if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[r];}if(p.nodeType==1&&p.hasChildNodes()){p=p.childNodes[Math.min(r==j?j:j-1,p.childNodes.length-1)];}d=c.findCommonAncestor(h,p);if(h==p){return i([h]);}for(e=h;e;e=e.parentNode){if(e==p){return k(h,d,true);}if(e==d){break;}}for(e=p;e;e=e.parentNode){if(e==h){return k(p,d);}if(e==d){break;}}q=s(h,d)||h;g=s(p,d)||p;k(h,q,true);n=m(q==h?q:q.nextSibling,"nextSibling",g==p?g.nextSibling:g);if(n.length){i(n);}k(p,g);};};a.dom.RangeUtils.compareRanges=function(b,c){if(b&&c){if(b.item||b.duplicate){if(b.item&&c.item&&b.item(0)===c.item(0)){return true;}if(b.isEqual&&c.isEqual&&c.isEqual(b)){return true;}}else{return b.startContainer==c.startContainer&&b.startOffset==c.startOffset;}}return false;};})(tinymce);(function(a){var c=a.DOM,b=a.is;a.create("tinymce.ui.Control",{Control:function(d,e){this.id=d;this.settings=e=e||{};this.rendered=false;this.onRender=new a.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;},setDisabled:function(f){var d;if(f!=this.disabled){d=c.get(this.id);if(d&&this.settings.unavailable_prefix){if(f){this.prevTitle=d.title;d.title=this.settings.unavailable_prefix+": "+d.title;}else{d.title=this.prevTitle;}}this.setState("Disabled",f);this.setState("Enabled",!f);this.disabled=f;}},isDisabled:function(){return this.disabled;},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;}},isActive:function(){return this.active;},setState:function(e,d){var f=c.get(this.id);e=this.classPrefix+e;if(d){c.addClass(f,e);}else{c.removeClass(f,e);}},isRendered:function(){return this.rendered;},renderHTML:function(){},renderTo:function(d){c.setHTML(d,this.renderHTML());},postRender:function(){var e=this,d;if(b(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d);}if(b(e.active)){d=e.active;e.active=-1;e.setActive(d);}},remove:function(){c.remove(this.id);this.destroy();},destroy:function(){a.dom.Event.clear(this.id);}});})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b){this.parent(a,b);this.controls=[];this.lookup={};},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a;},get:function(a){return this.lookup[a];}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b);this.classPrefix="mceSeparator";},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix});}});(function(a){var b=a.is,d=a.DOM,e=a.each,c=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(f,g){this.parent(f,g);this.classPrefix="mceMenuItem";},setSelected:function(f){this.setState("Selected",f);this.selected=f;},isSelected:function(){return this.selected;},postRender:function(){var f=this;f.parent();if(b(f.selected)){f.setSelected(f.selected);}}});})(tinymce);(function(a){var b=a.is,d=a.DOM,e=a.each,c=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(f,g){var h=this;h.parent(f,g);h.items={};h.collapsed=false;h.menuCount=0;h.onAddItem=new a.util.Dispatcher(this);},expand:function(f){var g=this;if(f){c(g,function(h){if(h.expand){h.expand();}},"items",g);}g.collapsed=false;},collapse:function(f){var g=this;if(f){c(g,function(h){if(h.collapse){h.collapse();}},"items",g);}g.collapsed=true;},isCollapsed:function(){return this.collapsed;},add:function(f){if(!f.settings){f=new a.ui.MenuItem(f.id||d.uniqueId(),f);}this.onAddItem.dispatch(this,f);return this.items[f.id]=f;},addSeparator:function(){return this.add({separator:true});},addMenu:function(f){if(!f.collapse){f=this.createMenu(f);}this.menuCount++;return this.add(f);},hasMenus:function(){return this.menuCount!==0;},remove:function(f){delete this.items[f.id];},removeAll:function(){var f=this;c(f,function(g){if(g.removeAll){g.removeAll();}else{g.remove();}g.destroy();},"items",f);f.items={};},createMenu:function(f){var g=new a.ui.Menu(f.id||d.uniqueId(),f);g.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return g;}});})(tinymce);(function(e){var d=e.is,c=e.DOM,a=e.each,b=e.dom.Event,f=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(g,h){h=h||{};h.container=h.container||c.doc.body;h.offset_x=h.offset_x||0;h.offset_y=h.offset_y||0;h.vp_offset_x=h.vp_offset_x||0;h.vp_offset_y=h.vp_offset_y||0;if(d(h.icons)&&!h.icons){h["class"]+=" mceNoIcons";}this.parent(g,h);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu";},createMenu:function(h){var i=this,j=i.settings,g;h.container=h.container||j.container;h.parent=i;h.constrain=h.constrain||j.constrain;h["class"]=h["class"]||j["class"];h.vp_offset_x=h.vp_offset_x||j.vp_offset_x;h.vp_offset_y=h.vp_offset_y||j.vp_offset_y;g=new e.ui.DropMenu(h.id||c.uniqueId(),h);g.onAddItem.add(i.onAddItem.dispatch,i.onAddItem);return g;},update:function(){var k=this,j=k.settings,g=c.get("menu_"+k.id+"_tbl"),l=c.get("menu_"+k.id+"_co"),h,i;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;i=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!c.boxModel){k.element.setStyles({width:h+2,height:i+2});}else{k.element.setStyles({width:h,height:i});}if(j.max_width){c.setStyle(l,"width",h);}if(j.max_height){c.setStyle(l,"height",i);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden");}}},showMenu:function(g,i,r){var o=this,n=o.settings,u,v=c.getViewPort(),p,q,A,l,z=2,m,k,j=o.classPrefix;o.collapse(1);if(o.isMenuVisible){return;}if(!o.rendered){u=c.add(o.settings.container,o.renderNode());a(o.items,function(h){h.postRender();});o.element=new f("menu_"+o.id,{blocker:1,container:n.container});}else{u=c.get("menu_"+o.id);}if(!e.isOpera){c.setStyles(u,{left:-65535,top:-65535});}c.show(u);o.update();g+=n.offset_x||0;i+=n.offset_y||0;v.w-=4;v.h-=4;if(n.constrain){p=u.clientWidth-z;q=u.clientHeight-z;A=v.x+v.w;l=v.y+v.h;if((g+n.vp_offset_x+p)>A){g=r?r-p:Math.max(0,(A-n.vp_offset_x)-p);}if((i+n.vp_offset_y+q)>l){i=Math.max(0,(l-n.vp_offset_y)-q);}}c.setStyles(u,{left:g,top:i});o.element.update();o.isMenuVisible=1;o.mouseClickFunc=b.add(u,"click",function(h){var s;h=h.target;if(h&&(h=c.getParent(h,"tr"))&&!c.hasClass(h,j+"ItemSub")){s=o.items[h.id];if(s.isDisabled()){return;}m=o;while(m){if(m.hideMenu){m.hideMenu();}m=m.settings.parent;}if(s.settings.onclick){s.settings.onclick(h);}return b.cancel(h);}});if(o.hasMenus()){o.mouseOverFunc=b.add(u,"mouseover",function(x){var t,h,s;x=x.target;if(x&&(x=c.getParent(x,"tr"))){t=o.items[x.id];if(o.lastMenu){o.lastMenu.collapse(1);}if(t.isDisabled()){return;}if(x&&c.hasClass(x,j+"ItemSub")){h=c.getRect(x);t.showMenu((h.x+h.w-z),h.y-z,h.x);o.lastMenu=t;c.addClass(c.get(t.id).firstChild,j+"ItemActive");}}});}o.onShowMenu.dispatch(o);if(n.keyboard_focus){b.add(u,"keydown",o._keyHandler,o);c.select("a","menu_"+o.id)[0].focus();o._focusIdx=0;}},hideMenu:function(i){var h=this,g=c.get("menu_"+h.id),j;if(!h.isMenuVisible){return;}b.remove(g,"mouseover",h.mouseOverFunc);b.remove(g,"click",h.mouseClickFunc);b.remove(g,"keydown",h._keyHandler);c.hide(g);h.isMenuVisible=0;if(!i){h.collapse(1);}if(h.element){h.element.hide();}if(j=c.get(h.id)){c.removeClass(j.firstChild,h.classPrefix+"ItemActive");}h.onHideMenu.dispatch(h);},add:function(g){var i=this,h;g=i.parent(g);if(i.isRendered&&(h=c.get("menu_"+i.id))){i._add(c.select("tbody",h)[0],g);}return g;},collapse:function(g){this.parent(g);this.hideMenu(1);},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g);},destroy:function(){var h=this,g=c.get("menu_"+h.id);b.remove(g,"mouseover",h.mouseOverFunc);b.remove(g,"click",h.mouseClickFunc);if(h.element){h.element.remove();}c.remove(g);},renderNode:function(){var j=this,i=j.settings,h,g,k,l;l=c.create("div",{id:"menu_"+j.id,"class":i["class"],style:"position:absolute;left:0;top:0;z-index:200000"});k=c.add(l,"div",{id:"menu_"+j.id+"_co","class":j.classPrefix+(i["class"]?" "+i["class"]:"")});j.element=new f("menu_"+j.id,{blocker:1,container:i.container});if(i.menu_line){c.add(k,"span",{"class":j.classPrefix+"Line"});}h=c.add(k,"table",{id:"menu_"+j.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});g=c.add(h,"tbody");a(j.items,function(m){j._add(g,m);});j.rendered=true;return l;},_keyHandler:function(j){var i=this,h=j.keyCode;function g(l){var k=i._focusIdx+l,m=c.select("a","menu_"+i.id)[k];if(m){i._focusIdx=k;m.focus();}}switch(h){case 38:g(-1);return;case 40:g(1);return;case 13:return;case 27:return this.hideMenu();}},_add:function(g,i){var h,m=i.settings,k,p,j,q=this.classPrefix,l;if(m.separator){p=c.add(g,"tr",{id:i.id,"class":q+"ItemSeparator"});c.add(p,"td",{"class":q+"ItemSeparator"});if(h=p.previousSibling){c.addClass(h,"mceLast");}return;}h=p=c.add(g,"tr",{id:i.id,"class":q+"Item "+q+"ItemEnabled"});h=j=c.add(h,"td");h=k=c.add(h,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});c.addClass(j,m["class"]);l=c.add(h,"span",{"class":"mceIcon"+(m.icon?" mce_"+m.icon:"")});if(m.icon_src){c.add(l,"img",{src:m.icon_src});}h=c.add(h,m.element||"span",{"class":"mceText",title:i.settings.title},i.settings.title);if(i.settings.style){c.setAttrib(h,"style",i.settings.style);}if(g.childNodes.length==1){c.addClass(p,"mceFirst");}if((h=p.previousSibling)&&c.hasClass(h,q+"ItemSeparator")){c.addClass(p,"mceFirst");}if(i.collapse){c.addClass(p,q+"ItemSub");}if(h=p.previousSibling){c.removeClass(h,"mceLast");}c.addClass(p,"mceLast");}});})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(c,d){this.parent(c,d);this.classPrefix="mceButton";},renderHTML:function(){var f=this.classPrefix,d=this.settings,c,e;e=a.encode(d.label||"");c='<a id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+d["class"]+(e?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+a.encode(d.title)+'">';if(d.image){c+='<img class="mceIcon" src="'+d.image+'" />'+e+"</a>";}else{c+='<span class="mceIcon '+d["class"]+'"></span>'+(e?'<span class="'+f+'Label">'+e+"</span>":"")+"</a>";}return c;},postRender:function(){var d=this,c=d.settings;b.dom.Event.add(d.id,"click",function(f){if(!d.isDisabled()){return c.onclick.call(c.scope,f);}});}});})(tinymce);(function(b){var d=b.DOM,c=b.dom.Event,e=b.each,a=b.util.Dispatcher;b.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(f,g){var h=this;h.parent(f,g);h.items=[];h.onChange=new a(h);h.onPostRender=new a(h);h.onAdd=new a(h);h.onRenderMenu=new b.util.Dispatcher(this);h.classPrefix="mceListBox";},select:function(j){var h=this,g,i;if(j==undefined){return h.selectByIndex(-1);}if(j&&j.call){i=j;}else{i=function(f){return f==j;};}if(j!=h.selectedValue){e(h.items,function(f,k){if(i(f.value)){g=1;h.selectByIndex(k);return false;}});if(!g){h.selectByIndex(-1);}}},selectByIndex:function(f){var g=this,i,h;if(f!=g.selectedIndex){i=d.get(g.id+"_text");h=g.items[f];if(h){g.selectedValue=h.value;g.selectedIndex=f;d.setHTML(i,d.encode(h.title));d.removeClass(i,"mceTitle");}else{d.setHTML(i,d.encode(g.settings.title));d.addClass(i,"mceTitle");g.selectedValue=g.selectedIndex=null;}i=0;}},add:function(i,h,f){var g=this;f=f||{};f=b.extend(f,{title:i,value:h});g.items.push(f);g.onAdd.dispatch(g,f);},getLength:function(){return this.items.length;},renderHTML:function(){var f="",i=this,g=i.settings,j=i.classPrefix;f='<table id="'+i.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';f+="<td>"+d.createHTML("a",{id:i.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(i.settings.title))+"</td>";f+="<td>"+d.createHTML("a",{id:i.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";f+="</tr></tbody></table>";return f;},showMenu:function(){var h=this,i,f,j=d.get(this.id),g;if(h.isDisabled()||h.items.length==0){return;}if(h.menu&&h.menu.isMenuVisible){return h.hideMenu();}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true;}i=d.getPos(this.settings.menu_container);f=d.getPos(j);g=h.menu;g.settings.offset_x=f.x;g.settings.offset_y=f.y;g.settings.keyboard_focus=!b.isOpera;if(h.oldID){g.items[h.oldID].setSelected(0);}e(h.items,function(k){if(k.value===h.selectedValue){g.items[k.id].setSelected(1);h.oldID=k.id;}});g.showMenu(0,j.clientHeight);c.add(d.doc,"mousedown",h.hideMenu,h);d.addClass(h.id,h.classPrefix+"Selected");},hideMenu:function(f){var g=this;if(g.menu&&g.menu.isMenuVisible){if(f&&f.type=="mousedown"&&(f.target.id==g.id+"_text"||f.target.id==g.id+"_open")){return;}if(!f||!d.getParent(f.target,".mceMenu")){d.removeClass(g.id,g.classPrefix+"Selected");c.remove(d.doc,"mousedown",g.hideMenu,g);g.menu.hideMenu();}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(g.hideMenu,g);f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("");}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("");}}});}else{h.id=d.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value);}};f.add(h);}});g.onRenderMenu.dispatch(g,f);g.menu=f;},postRender:function(){var g=this,f=g.classPrefix;c.add(g.id,"click",g.showMenu,g);c.add(g.id+"_text","focus",function(){if(!g._focused){g.keyDownHandler=c.add(g.id+"_text","keydown",function(k){var h=-1,j,i=k.keyCode;e(g.items,function(l,m){if(g.selectedValue==l.value){h=m;}});if(i==38){j=g.items[h-1];}else{if(i==40){j=g.items[h+1];}else{if(i==13){j=g.selectedValue;g.selectedValue=null;g.settings.onselect(j);return c.cancel(k);}}}if(j){g.hideMenu();g.select(j.value);}});}g._focused=1;});c.add(g.id+"_text","blur",function(){c.remove(g.id+"_text","keydown",g.keyDownHandler);g._focused=0;});if(b.isIE6||!d.boxModel){c.add(g.id,"mouseover",function(){if(!d.hasClass(g.id,f+"Disabled")){d.addClass(g.id,f+"Hover");}});c.add(g.id,"mouseout",function(){if(!d.hasClass(g.id,f+"Disabled")){d.removeClass(g.id,f+"Hover");}});}g.onPostRender.dispatch(g,d.get(g.id));},destroy:function(){this.parent();c.clear(this.id+"_text");c.clear(this.id+"_open");}});})(tinymce);(function(b){var d=b.DOM,c=b.dom.Event,e=b.each,a=b.util.Dispatcher;b.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(f,g){this.parent(f,g);this.classPrefix="mceNativeListBox";},setDisabled:function(f){d.get(this.id).disabled=f;},isDisabled:function(){return d.get(this.id).disabled;},select:function(j){var h=this,g,i;if(j==undefined){return h.selectByIndex(-1);}if(j&&j.call){i=j;}else{i=function(f){return f==j;};}if(j!=h.selectedValue){e(h.items,function(f,k){if(i(f.value)){g=1;h.selectByIndex(k);return false;}});if(!g){h.selectByIndex(-1);}}},selectByIndex:function(f){d.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null;},add:function(j,i,g){var f,h=this;g=g||{};g.value=i;if(h.isRendered()){d.add(d.get(this.id),"option",g,j);}f={title:j,value:i,attribs:g};h.items.push(f);h.onAdd.dispatch(h,f);},getLength:function(){return this.items.length;},renderHTML:function(){var f,g=this;f=d.createHTML("option",{value:""},"-- "+g.settings.title+" --");e(g.items,function(h){f+=d.createHTML("option",{value:h.value},h.title);});f=d.createHTML("select",{id:g.id,"class":"mceNativeListBox"},f);return f;},postRender:function(){var g=this,f;g.rendered=true;function h(i){var j=g.items[i.target.selectedIndex-1];if(j&&(j=j.value)){g.onChange.dispatch(g,j);if(g.settings.onselect){g.settings.onselect(j);}}}c.add(g.id,"change",h);c.add(g.id,"keydown",function(i){var j;c.remove(g.id,"change",f);j=c.add(g.id,"blur",function(){c.add(g.id,"change",h);c.remove(g.id,"blur",j);});if(i.keyCode==13||i.keyCode==32){h(i);return c.cancel(i);}});g.onPostRender.dispatch(g,d.get(g.id));}});})(tinymce);(function(a){var c=a.DOM,b=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(e,f){this.parent(e,f);this.onRenderMenu=new a.util.Dispatcher(this);f.menu_container=f.menu_container||c.doc.body;},showMenu:function(){var h=this,i,f,j=c.get(h.id),g;if(h.isDisabled()){return;}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true;}if(h.isMenuVisible){return h.hideMenu();}i=c.getPos(h.settings.menu_container);f=c.getPos(j);g=h.menu;g.settings.offset_x=f.x;g.settings.offset_y=f.y;g.settings.vp_offset_x=f.x;g.settings.vp_offset_y=f.y;g.settings.keyboard_focus=h._focused;g.showMenu(0,j.clientHeight);b.add(c.doc,"mousedown",h.hideMenu,h);h.setState("Selected",1);h.isMenuVisible=1;},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(f.hideMenu,f);f.onRenderMenu.dispatch(f,e);f.menu=e;},hideMenu:function(f){var g=this;if(f&&f.type=="mousedown"&&c.getParent(f.target,function(h){return h.id===g.id||h.id===g.id+"_open";})){return;}if(!f||!c.getParent(f.target,".mceMenu")){g.setState("Selected",0);b.remove(c.doc,"mousedown",g.hideMenu,g);if(g.menu){g.menu.hideMenu();}}g.isMenuVisible=0;},postRender:function(){var f=this,e=f.settings;b.add(f.id,"click",function(){if(!f.isDisabled()){if(e.onclick){e.onclick(f.value);}f.showMenu();}});}});})(tinymce);(function(a){var c=a.DOM,b=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,f){this.parent(e,f);this.classPrefix="mceSplitButton";},renderHTML:function(){var e,g=this,f=g.settings,i;e="<tbody><tr>";if(f.image){i=c.createHTML("img ",{src:f.image,"class":"mceAction "+f["class"]});}else{i=c.createHTML("span",{"class":"mceAction "+f["class"]},"");}e+="<td>"+c.createHTML("a",{id:g.id+"_action",href:"javascript:;","class":"mceAction "+f["class"],onclick:"return false;",onmousedown:"return false;",title:f.title},i)+"</td>";i=c.createHTML("span",{"class":"mceOpen "+f["class"]});e+="<td>"+c.createHTML("a",{id:g.id+"_open",href:"javascript:;","class":"mceOpen "+f["class"],onclick:"return false;",onmousedown:"return false;",title:f.title},i)+"</td>";e+="</tr></tbody>";return c.createHTML("table",{id:g.id,"class":"mceSplitButton mceSplitButtonEnabled "+f["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:f.title},e);},postRender:function(){var f=this,e=f.settings;if(e.onclick){b.add(f.id+"_action","click",function(){if(!f.isDisabled()){e.onclick(f.value);}});}b.add(f.id+"_open","click",f.showMenu,f);b.add(f.id+"_open","focus",function(){f._focused=1;});b.add(f.id+"_open","blur",function(){f._focused=0;});if(a.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.addClass(f.id,"mceSplitButtonHover");}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.removeClass(f.id,"mceSplitButtonHover");}});}},destroy:function(){this.parent();b.clear(this.id+"_action");b.clear(this.id+"_open");}});})(tinymce);(function(a){var d=a.DOM,c=a.dom.Event,b=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(f,g){var h=this;h.parent(f,g);h.settings=g=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},h.settings);h.onShowMenu=new a.util.Dispatcher(h);h.onHideMenu=new a.util.Dispatcher(h);h.value=g.default_color;},showMenu:function(){var h=this,g,j,i,f;if(h.isDisabled()){return;}if(!h.isMenuRendered){h.renderMenu();h.isMenuRendered=true;}if(h.isMenuVisible){return h.hideMenu();}i=d.get(h.id);d.show(h.id+"_menu");d.addClass(i,"mceSplitButtonSelected");f=d.getPos(i);d.setStyles(h.id+"_menu",{left:f.x,top:f.y+i.clientHeight,zIndex:200000});i=0;c.add(d.doc,"mousedown",h.hideMenu,h);h.onShowMenu.dispatch(h);if(h._focused){h._keyHandler=c.add(h.id+"_menu","keydown",function(k){if(k.keyCode==27){h.hideMenu();}});d.select("a",h.id+"_menu")[0].focus();}h.isMenuVisible=1;},hideMenu:function(f){var g=this;if(f&&f.type=="mousedown"&&d.getParent(f.target,function(h){return h.id===g.id+"_open";})){return;}if(!f||!d.getParent(f.target,".mceSplitButtonMenu")){d.removeClass(g.id,"mceSplitButtonSelected");c.remove(d.doc,"mousedown",g.hideMenu,g);c.remove(g.id+"_menu","keydown",g._keyHandler);d.hide(g.id+"_menu");}g.onHideMenu.dispatch(g);g.isMenuVisible=0;},renderMenu:function(){var o=this,j,g=0,l=o.settings,k,f,h,p;p=d.add(l.menu_container,"div",{id:o.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"});j=d.add(p,"div",{"class":l["class"]+" mceSplitButtonMenu"});d.add(j,"span",{"class":"mceMenuLine"});k=d.add(j,"table",{"class":"mceColorSplitMenu"});f=d.add(k,"tbody");g=0;e(b(l.colors,"array")?l.colors:l.colors.split(","),function(i){i=i.replace(/^#/,"");if(!g--){h=d.add(f,"tr");g=l.grid_width-1;}k=d.add(h,"td");k=d.add(k,"a",{href:"javascript:;",style:{backgroundColor:"#"+i},_mce_color:"#"+i});});if(l.more_colors_func){k=d.add(f,"tr");k=d.add(k,"td",{colspan:l.grid_width,"class":"mceMoreColors"});k=d.add(k,"a",{id:o.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title);c.add(k,"click",function(i){l.more_colors_func.call(l.more_colors_scope||this);return c.cancel(i);});}d.addClass(j,"mceColorSplitMenu");c.add(o.id+"_menu","click",function(i){var m;i=i.target;if(i.nodeName=="A"&&(m=i.getAttribute("_mce_color"))){o.setColor(m);}return c.cancel(i);});return p;},setColor:function(g){var f=this;d.setStyle(f.id+"_preview","backgroundColor",g);f.value=g;f.hideMenu();f.settings.onselect(g);},postRender:function(){var g=this,f=g.id;g.parent();d.add(f+"_action","div",{id:f+"_preview","class":"mceColorPreview"});d.setStyle(g.id+"_preview","backgroundColor",g.value);},destroy:function(){this.parent();c.clear(this.id+"_menu");c.clear(this.id+"_more");d.remove(this.id+"_menu");}});})(tinymce);tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var k=this,a="",g,j,e=tinymce.DOM,l=k.settings,b,m,d,f;f=k.controls;for(b=0;b<f.length;b++){j=f[b];m=f[b-1];d=f[b+1];if(b===0){g="mceToolbarStart";if(j.Button){g+=" mceToolbarStartButton";}else{if(j.SplitButton){g+=" mceToolbarStartSplitButton";}else{if(j.ListBox){g+=" mceToolbarStartListBox";}}}a+=e.createHTML("td",{"class":g},e.createHTML("span",null,"<!-- IE -->"));}if(m&&j.ListBox){if(m.Button||m.SplitButton){a+=e.createHTML("td",{"class":"mceToolbarEnd"},e.createHTML("span",null,"<!-- IE -->"));}}if(e.stdMode){a+='<td style="position: relative">'+j.renderHTML()+"</td>";}else{a+="<td>"+j.renderHTML()+"</td>";}if(d&&j.ListBox){if(d.Button||d.SplitButton){a+=e.createHTML("td",{"class":"mceToolbarStart"},e.createHTML("span",null,"<!-- IE -->"));}}}g="mceToolbarEnd";if(j.Button){g+=" mceToolbarEndButton";}else{if(j.SplitButton){g+=" mceToolbarEndSplitButton";}else{if(j.ListBox){g+=" mceToolbarEndListBox";}}}a+=e.createHTML("td",{"class":g},e.createHTML("span",null,"<!-- IE -->"));return e.createHTML("table",{id:k.id,"class":"mceToolbar"+(l["class"]?" "+l["class"]:""),cellpadding:"0",cellspacing:"0",align:k.settings.align||""},"<tbody><tr>"+a+"</tr></tbody>");}});(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d);},get:function(d){return this.lookup[d];},requireLangPack:function(d){var e=b.settings;if(e&&e.language){b.ScriptLoader.add(this.urls[d]+"/langs/"+e.language+".js");}},add:function(d,e){this.items.push(e);this.lookup[d]=e;this.onAdd.dispatch(this,d,e);return e;},load:function(h,g,d,e){var f=this;if(f.urls[h]){return;}if(g.indexOf("/")!=0&&g.indexOf("://")==-1){g=b.baseURL+"/"+g;}f.urls[h]=g.substring(0,g.lastIndexOf("/"));if(!f.lookup[h]){b.ScriptLoader.add(g,d,e);}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager();}(tinymce));(function(h){var a=h.each,f=h.extend,c=h.DOM,b=h.dom.Event,d=h.ThemeManager,j=h.PluginManager,k=h.explode,i=h.util.Dispatcher,g,e=0;h.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(h.documentBaseURL)){h.documentBaseURL+="/";}h.baseURL=new h.util.URI(h.documentBaseURL).toAbsolute(h.baseURL);h.baseURI=new h.util.URI(h.baseURL);h.onBeforeUnload=new i(h);b.add(window,"beforeunload",function(l){h.onBeforeUnload.dispatch(h,l);});h.onAddEditor=new i(h);h.onRemoveEditor=new i(h);h.EditorManager=f(h,{editors:[],i18n:{},activeEditor:null,init:function(q){var u=this,n,o=h.ScriptLoader,r,p=[],m;function l(x,y,v){var t=x[y];if(!t){return;}if(h.is(t,"string")){v=t.replace(/\.\w+$/,"");v=v?h.resolve(v):0;t=h.resolve(t);}return t.apply(v||this,Array.prototype.slice.call(arguments,2));}q=f({theme:"simple",language:"en"},q);u.settings=q;b.add(document,"init",function(){var v,s;l(q,"onpageload");switch(q.mode){case"exact":v=q.elements||"";if(v.length>0){a(k(v),function(x){if(c.get(x)){m=new h.Editor(x,q);p.push(m);m.render(1);}else{a(document.forms,function(y){a(y.elements,function(z){if(z.name===x){x="mce_editor_"+e++;c.setAttrib(z,"id",x);m=new h.Editor(x,q);p.push(m);m.render(1);}});});}});}break;case"textareas":case"specific_textareas":function t(x,y){return y.constructor===RegExp?y.test(x.className):c.hasClass(x,y);}a(c.select("textarea"),function(x){if(q.editor_deselector&&t(x,q.editor_deselector)){return;}if(!q.editor_selector||t(x,q.editor_selector)){r=c.get(x.name);if(!x.id&&!r){x.id=x.name;}if(!x.id||u.get(x.id)){x.id=c.uniqueId();}m=new h.Editor(x.id,q);p.push(m);m.render(1);}});break;}if(q.oninit){v=s=0;a(p,function(x){s++;if(!x.initialized){x.onInit.add(function(){v++;if(v==s){l(q,"oninit");}});}else{v++;}if(v==s){l(q,"oninit");}});}});},get:function(l){if(l===g){return this.editors;}return this.editors[l];},getInstanceById:function(l){return this.get(l);},add:function(n){var m=this,l=m.editors;l[n.id]=n;l.push(n);m._setActive(n);m.onAddEditor.dispatch(m,n);if(h.adapter){h.adapter.patchEditor(n);}return n;},remove:function(o){var n=this,m,l=n.editors;if(!l[o.id]){return null;}delete l[o.id];for(m=0;m<l.length;m++){if(l[m]==o){l.splice(m,1);break;}}if(n.activeEditor==o){n._setActive(l[0]);}o.destroy();n.onRemoveEditor.dispatch(n,o);return o;},execCommand:function(n,p,q){var o=this,m=o.get(q),r;switch(n){case"mceFocus":m.focus();return true;case"mceAddEditor":case"mceAddControl":if(!o.get(q)){new h.Editor(q,o.settings).render();}return true;case"mceAddFrameControl":r=q.window;r.tinyMCE=tinyMCE;r.tinymce=h;h.DOM.doc=r.document;h.DOM.win=r;m=new h.Editor(q.element_id,q);m.render();if(h.isIE){function l(){m.destroy();r.detachEvent("onunload",l);r=r.tinyMCE=r.tinymce=null;}r.attachEvent("onunload",l);}q.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(m){m.remove();}return true;case"mceToggleEditor":if(!m){o.execCommand("mceAddControl",0,q);return true;}if(m.isHidden()){m.show();}else{m.hide();}return true;}if(o.activeEditor){return o.activeEditor.execCommand(n,p,q);}return false;},execInstanceCommand:function(l,n,m,o){var p=this.get(l);if(p){return p.execCommand(n,m,o);}return false;},triggerSave:function(){a(this.editors,function(l){l.save();});},addI18n:function(q,l){var m,n=this.i18n;if(!h.is(q,"string")){a(q,function(p,r){a(p,function(t,s){a(t,function(v,u){if(s==="common"){n[r+"."+u]=v;}else{n[r+"."+s+"."+u]=v;}});});});}else{a(l,function(r,p){n[q+"."+p]=r;});}},_setActive:function(l){this.selectedInstance=this.activeEditor=l;}});})(tinymce);(function(h){var n=h.DOM,l=h.dom.Event,g=h.extend,k=h.util.Dispatcher,d=h.each,a=h.isGecko,i=h.isIE,c=h.isWebKit,e=h.is,b=h.ThemeManager,j=h.PluginManager,m=h.inArray,f=h.grep,o=h.explode;h.create("tinymce.Editor",{Editor:function(p,q){var r=this;r.id=r.editorId=p;r.execCommands={};r.queryStateCommands={};r.queryValueCommands={};r.isNotDirty=false;r.plugins={};d(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){r[s]=new k(r);});r.settings=q=g({id:p,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:h.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:h.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true},q);r.documentBaseURI=new h.util.URI(q.document_base_url||h.documentBaseURL,{base_uri:tinyMCE.baseURI});r.baseURI=h.baseURI;r.execCallback("setup",r);},render:function(p){var x=this,v=x.settings,r=x.id,u=h.ScriptLoader;if(!l.domLoaded){l.add(document,"init",function(){x.render();});return;}tinyMCE.settings=v;if(!x.getElement()){return;}if(h.isIDevice){return;}if(!/TEXTAREA|INPUT/i.test(x.getElement().nodeName)&&v.hidden_input&&n.getParent(r,"form")){n.insertAfter(n.create("input",{type:"hidden",name:r}),r);}if(h.WindowManager){x.windowManager=new h.WindowManager(x);}if(v.encoding=="xml"){x.onGetContent.add(function(s,t){if(t.save){t.content=n.encode(t.content);}});}if(v.add_form_submit_trigger){x.onSubmit.addToTop(function(){if(x.initialized){x.save();x.isNotDirty=1;}});}if(v.add_unload_trigger){x._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(x.initialized&&!x.destroyed&&!x.isHidden()){x.save({format:"raw",no_events:true});}});}h.addUnload(x.destroy,x);if(v.submit_patch){x.onBeforeRenderUI.add(function(){var s=x.getElement().form;if(!s){return;}if(s._mceOldSubmit){return;}if(!s.submit.nodeType&&!s.submit.length){x.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){h.triggerSave();x.isNotDirty=1;return x.formElement._mceOldSubmit(x.formElement);};}s=null;});}function q(){if(v.language){u.add(h.baseURL+"/langs/"+v.language+".js");}if(v.theme&&v.theme.charAt(0)!="-"&&!b.urls[v.theme]){b.load(v.theme,"themes/"+v.theme+"/editor_template"+h.suffix+".js");}d(o(v.plugins),function(s){if(s&&s.charAt(0)!="-"&&!j.urls[s]){if(s=="safari"){return;}j.load(s,"plugins/"+s+"/editor_plugin"+h.suffix+".js");}});u.loadQueue(function(){if(!x.removed){x.init();}});}q();},init:function(){var z,r=this,q=r.settings,x,y,E=r.getElement(),A,F,v,p,B,C;h.add(r);if(q.theme){q.theme=q.theme.replace(/-/,"");A=b.get(q.theme);r.theme=new A();if(r.theme.init&&q.init_theme){r.theme.init(r,b.urls[q.theme]||h.documentBaseURL.replace(/\/$/,""));}}d(o(q.plugins.replace(/\-/g,"")),function(H){var G=j.get(H),s=j.urls[H]||h.documentBaseURL.replace(/\/$/,""),t;if(G){t=new G(r,s);r.plugins[H]=t;if(t.init){t.init(r,s);}}});if(q.popup_css!==false){if(q.popup_css){q.popup_css=r.documentBaseURI.toAbsolute(q.popup_css);}else{q.popup_css=r.baseURI.toAbsolute("themes/"+q.theme+"/skins/"+q.skin+"/dialog.css");}}if(q.popup_css_add){q.popup_css+=","+r.documentBaseURI.toAbsolute(q.popup_css_add);}r.controlManager=new h.ControlManager(r);if(q.custom_undo_redo){r.onBeforeExecCommand.add(function(H,G,u,s,t){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!t||!t.skip_undo)){if(!r.undoManager.hasUndo()){r.undoManager.add({initial:true});}}});r.onExecCommand.add(function(H,G,u,s,t){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!t||!t.skip_undo)){r.undoManager.add();}});}r.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){r.nodeChanged();}});if(a){function D(s,t){if(!t||!t.initial){r.execCommand("mceRepaint");}}r.onUndo.add(D);r.onRedo.add(D);r.onSetContent.add(D);}r.onBeforeRenderUI.dispatch(r,r.controlManager);if(q.render_ui){x=q.width||E.style.width||E.offsetWidth;y=q.height||E.style.height||E.offsetHeight;r.orgDisplay=E.style.display;C=/^[0-9\.]+(|px)$/i;if(C.test(""+x)){x=Math.max(parseInt(x)+(A.deltaWidth||0),100);}if(C.test(""+y)){y=Math.max(parseInt(y)+(A.deltaHeight||0),100);}A=r.theme.renderUI({targetNode:E,width:x,height:y,deltaWidth:q.delta_width,deltaHeight:q.delta_height});r.editorContainer=A.editorContainer;}if(document.domain&&location.hostname!=document.domain){h.relaxedDomain=document.domain;}n.setStyles(A.sizeContainer||A.editorContainer,{width:x,height:y});y=(A.iframeHeight||y)+(typeof(y)=="number"?(A.deltaHeight||0):"");if(y<100){y=100;}r.iframeHTML=q.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(q.document_base_url!=h.documentBaseURL){r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />';}r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(h.relaxedDomain){r.iframeHTML+='<script type="text/javascript">document.domain = "'+h.relaxedDomain+'";</script>';}p=q.body_id||"tinymce";if(p.indexOf("=")!=-1){p=r.getParam("body_id","","hash");p=p[r.id]||p;}B=q.body_class||"";if(B.indexOf("=")!=-1){B=r.getParam("body_class","","hash");B=B[r.id]||"";}r.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+B+'"></body></html>';if(h.relaxedDomain){if(i||(h.isOpera&&parseFloat(opera.version())>=9.5)){v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';}else{if(h.isOpera){v='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()';}}}z=n.add(A.iframeContainer,"iframe",{id:r.id+"_ifr",src:v||'javascript:""',frameBorder:"0",style:{width:"100%",height:y}});r.contentAreaContainer=A.iframeContainer;n.get(A.editorContainer).style.display=r.orgDisplay;n.get(r.id).style.display="none";if(a){z.onload=function(){r.setupIframe();};}else{if(!i||!h.relaxedDomain){r.setupIframe();}}E=z=A=null;},setupIframe:function(){var y=this,z=y.settings,x=n.get(y.id),v=y.getDoc(),p,u;if(!i||!h.relaxedDomain){v.open();v.write(y.iframeHTML);v.close();}if(!i){try{if(!z.readonly){v.designMode="On";}}catch(r){}}if(i){u=y.getBody();n.hide(u);if(!z.readonly){u.contentEditable=true;}n.show(u);}y.dom=new h.dom.DOMUtils(y.getDoc(),{keep_values:true,url_converter:y.convertURL,url_converter_scope:y,hex_colors:z.force_hex_style_colors,class_filter:z.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:z.valid_styles});y.schema=new h.dom.Schema();y.serializer=new h.dom.Serializer(g(z,{valid_elements:z.verify_html===false?"*[*]":z.valid_elements,dom:y.dom,schema:y.schema}));y.selection=new h.dom.Selection(y.dom,y.getWin(),y.serializer);y.formatter=new h.Formatter(this);y.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});d("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){y.formatter.register(s,{block:s,remove:"all"});});y.formatter.register(y.settings.formats);y.undoManager=new h.UndoManager(y);y.undoManager.onAdd.add(function(s,t){if(!t.initial){return y.onChange.dispatch(y,t,s);}});y.undoManager.onUndo.add(function(s,t){return y.onUndo.dispatch(y,t,s);});y.undoManager.onRedo.add(function(s,t){return y.onRedo.dispatch(y,t,s);});y.forceBlocks=new h.ForceBlocks(y,{forced_root_block:z.forced_root_block});y.editorCommands=new h.EditorCommands(y);y.serializer.onPreProcess.add(function(s,t){return y.onPreProcess.dispatch(y,t,s);});y.serializer.onPostProcess.add(function(s,t){return y.onPostProcess.dispatch(y,t,s);});y.onPreInit.dispatch(y);if(!z.gecko_spellcheck){y.getBody().spellcheck=0;}if(!z.readonly){y._addEvents();}y.controlManager.onPostRender.dispatch(y,y.controlManager);y.onPostRender.dispatch(y);if(z.directionality){y.getBody().dir=z.directionality;}if(z.nowrap){y.getBody().style.whiteSpace="nowrap";}if(z.custom_elements){function q(s,t){d(o(z.custom_elements),function(C){var B;if(C.indexOf("~")===0){C=C.substring(1);B="span";}else{B="div";}t.content=t.content.replace(new RegExp("<("+C+")([^>]*)>","g"),"<"+B+' _mce_name="$1"$2>');t.content=t.content.replace(new RegExp("</("+C+")>","g"),"</"+B+">");});}y.onBeforeSetContent.add(q);y.onPostProcess.add(function(s,t){if(t.set){q(s,t);}});}if(z.handle_node_change_callback){y.onNodeChange.add(function(B,t,s){y.execCallback("handle_node_change_callback",y.id,s,-1,-1,true,y.selection.isCollapsed());});}if(z.save_callback){y.onSaveContent.add(function(B,s){var t=y.execCallback("save_callback",y.id,s.content,y.getBody());if(t){s.content=t;}});}if(z.onchange_callback){y.onChange.add(function(s,t){y.execCallback("onchange_callback",y,t);});}if(z.convert_newlines_to_brs){y.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />");}});}if(z.fix_nesting&&i){y.onBeforeSetContent.add(function(s,t){t.content=y._fixNesting(t.content);});}if(z.preformatted){y.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>";}});}if(z.verify_css_classes){y.serializer.attribValueFilter=function(D,C){var B,t;if(D=="class"){if(!y.classesRE){t=y.dom.getClasses();if(t.length>0){B="";d(t,function(s){B+=(B?"|":"")+s["class"];});y.classesRE=new RegExp("("+B+")","gi");}}return !y.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(C)||y.classesRE.test(C)?C:"";}return C;};}if(z.cleanup_callback){y.onBeforeSetContent.add(function(s,t){t.content=y.execCallback("cleanup_callback","insert_to_editor",t.content,t);});y.onPreProcess.add(function(s,t){if(t.set){y.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t);}if(t.get){y.execCallback("cleanup_callback","get_from_editor_dom",t.node,t);}});y.onPostProcess.add(function(s,t){if(t.set){t.content=y.execCallback("cleanup_callback","insert_to_editor",t.content,t);}if(t.get){t.content=y.execCallback("cleanup_callback","get_from_editor",t.content,t);}});}if(z.save_callback){y.onGetContent.add(function(s,t){if(t.save){t.content=y.execCallback("save_callback",y.id,t.content,y.getBody());}});}if(z.handle_event_callback){y.onEvent.add(function(t,B,s){if(y.execCallback("handle_event_callback",B,t,s)===false){l.cancel(B);}});}y.onSetContent.add(function(){y.addVisual(y.getBody());});if(z.padd_empty_editor){y.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"");});}if(a){function A(s,t){d(s.dom.select("a"),function(B){var C=B.parentNode;if(s.dom.isBlock(C)&&C.lastChild===B){s.dom.add(C,"br",{_mce_bogus:1});}});}y.onExecCommand.add(function(s,t){if(t==="CreateLink"){A(s);}});y.onSetContent.add(y.selection.onSetContent.add(A));if(!z.readonly){try{v.designMode="Off";v.designMode="On";}catch(r){}}}setTimeout(function(){if(y.removed){return;}y.load({initial:true,format:(z.cleanup_on_startup?"html":"raw")});y.startContent=y.getContent({format:"raw"});y.initialized=true;y.onInit.dispatch(y);y.execCallback("setupcontent_callback",y.id,y.getBody(),y.getDoc());y.execCallback("init_instance_callback",y);y.focus(true);y.nodeChanged({initial:1});if(z.content_css){h.each(o(z.content_css),function(s){y.dom.loadCSS(y.documentBaseURI.toAbsolute(s));});}if(z.auto_focus){setTimeout(function(){var s=h.get(z.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus();},100);}},1);x=null;},focus:function(r){var u,x=this,p=x.settings.content_editable,q,v,s=x.getDoc();if(!r){q=x.selection.getRng();if(q.item){v=q.item(0);}if(!p){x.getWin().focus();}if(v&&v.ownerDocument==s){q=s.body.createControlRange();q.addElement(v);q.select();}}if(h.activeEditor!=x){if((u=h.activeEditor)!=null){u.onDeactivate.dispatch(u,x);}x.onActivate.dispatch(x,u);}h._setActive(x);},execCallback:function(u){var r=this,p=r.settings[u],q;if(!p){return;}if(r.callbackLookup&&(q=r.callbackLookup[u])){p=q.func;q=q.scope;}if(e(p,"string")){q=p.replace(/\.\w+$/,"");q=q?h.resolve(q):0;p=h.resolve(p);r.callbackLookup=r.callbackLookup||{};r.callbackLookup[u]={func:p,scope:q};}return p.apply(q||r,Array.prototype.slice.call(arguments,1));},translate:function(p){var r=this.settings.language||"en",q=h.i18n;if(!p){return"";}return q[r+"."+p]||p.replace(/{\#([^}]+)\}/g,function(s,t){return q[r+"."+t]||"{#"+t+"}";});},getLang:function(p,q){return h.i18n[(this.settings.language||"en")+"."+p]||(e(q)?q:"{#"+p+"}");},getParam:function(r,q,t){var p=h.trim,u=e(this.settings[r])?this.settings[r]:q,s;if(t==="hash"){s={};if(e(u,"string")){d(u.indexOf("=")>0?u.split(/[;,](?![^=;,]*(?:[;,]|$))/):u.split(","),function(x){x=x.split("=");if(x.length>1){s[p(x[0])]=p(x[1]);}else{s[p(x[0])]=p(x);}});}else{s=u;}return s;}return u;},nodeChanged:function(p){var r=this,q=r.selection,u=(i?q.getNode():q.getStart())||r.getBody();if(r.initialized){p=p||{};u=i&&u.ownerDocument!=r.getDoc()?r.getBody():u;p.parents=[];r.dom.getParent(u,function(s){if(s.nodeName=="BODY"){return true;}p.parents.push(s);});r.onNodeChange.dispatch(r,p?p.controlManager||r.controlManager:r.controlManager,u,q.isCollapsed(),p);}},addButton:function(r,p){var q=this;q.buttons=q.buttons||{};q.buttons[r]=p;},addCommand:function(r,p,q){this.execCommands[r]={func:p,scope:q||this};},addQueryStateHandler:function(r,p,q){this.queryStateCommands[r]={func:p,scope:q||this};},addQueryValueHandler:function(r,p,q){this.queryValueCommands[r]={func:p,scope:q||this};},addShortcut:function(s,q,v,p){var u=this,r;if(!u.settings.custom_shortcuts){return false;}u.shortcuts=u.shortcuts||{};if(e(v,"string")){r=v;v=function(){u.execCommand(r,false,null);};}if(e(v,"object")){r=v;v=function(){u.execCommand(r[0],r[1],r[2]);};}d(o(s),function(t){var x={func:v,scope:p||this,desc:q,alt:false,ctrl:false,shift:false};d(o(t,"+"),function(y){switch(y){case"alt":case"ctrl":case"shift":x[y]=true;break;default:x.charCode=y.charCodeAt(0);x.keyCode=y.toUpperCase().charCodeAt(0);}});u.shortcuts[(x.ctrl?"ctrl":"")+","+(x.alt?"alt":"")+","+(x.shift?"shift":"")+","+x.keyCode]=x;});return true;},execCommand:function(z,u,q,v){var y=this,x=0,r,p;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(z)&&(!v||!v.skip_focus)){y.focus();}r={};y.onBeforeExecCommand.dispatch(y,z,u,q,r);if(r.terminate){return false;}if(y.execCallback("execcommand_callback",y.id,y.selection.getNode(),z,u,q)){y.onExecCommand.dispatch(y,z,u,q,v);return true;}if(r=y.execCommands[z]){p=r.func.call(r.scope,u,q);if(p!==true){y.onExecCommand.dispatch(y,z,u,q,v);return p;}}d(y.plugins,function(s){if(s.execCommand&&s.execCommand(z,u,q)){y.onExecCommand.dispatch(y,z,u,q,v);x=1;return false;}});if(x){return true;}if(y.theme&&y.theme.execCommand&&y.theme.execCommand(z,u,q)){y.onExecCommand.dispatch(y,z,u,q,v);return true;}if(h.GlobalCommands.execCommand(y,z,u,q)){y.onExecCommand.dispatch(y,z,u,q,v);return true;}if(y.editorCommands.execCommand(z,u,q)){y.onExecCommand.dispatch(y,z,u,q,v);return true;}y.getDoc().execCommand(z,u,q);y.onExecCommand.dispatch(y,z,u,q,v);},queryCommandState:function(u){var r=this,p,q;if(r._isHidden()){return;}if(p=r.queryStateCommands[u]){q=p.func.call(p.scope);if(q!==true){return q;}}p=r.editorCommands.queryCommandState(u);if(p!==-1){return p;}try{return this.getDoc().queryCommandState(u);}catch(v){}},queryCommandValue:function(u){var r=this,p,q;if(r._isHidden()){return;}if(p=r.queryValueCommands[u]){q=p.func.call(p.scope);if(q!==true){return q;}}p=r.editorCommands.queryCommandValue(u);if(e(p)){return p;}try{return this.getDoc().queryCommandValue(u);}catch(v){}},show:function(){var p=this;n.show(p.getContainer());n.hide(p.id);p.load();},hide:function(){var q=this,p=q.getDoc();if(i&&p){p.execCommand("SelectAll");}q.save();n.hide(q.getContainer());n.setStyle(q.id,"display",q.orgDisplay);},isHidden:function(){return !n.isHidden(this.id);},setProgressState:function(r,q,p){this.onSetProgressState.dispatch(this,r,q,p);return r;},load:function(p){var q=this,s=q.getElement(),r;if(s){p=p||{};p.load=true;r=q.setContent(e(s.value)?s.value:s.innerHTML,p);p.element=s;if(!p.no_events){q.onLoadContent.dispatch(q,p);}p.element=s=null;return r;}},save:function(p){var q=this,u=q.getElement(),s,r;if(!u||!q.initialized){return;}p=p||{};p.save=true;if(!p.no_events){q.undoManager.typing=0;q.undoManager.add();}p.element=u;s=p.content=q.getContent(p);if(!p.no_events){q.onSaveContent.dispatch(q,p);}s=p.content;if(!/TEXTAREA|INPUT/i.test(u.nodeName)){u.innerHTML=s;if(r=n.getParent(q.id,"form")){d(r.elements,function(t){if(t.name==q.id){t.value=s;return false;}});}}else{u.value=s;}p.element=u=null;return s;},setContent:function(r,p){var q=this;p=p||{};p.format=p.format||"html";p.set=true;p.content=r;if(!p.no_events){q.onBeforeSetContent.dispatch(q,p);}if(!h.isIE&&(r.length===0||/^\s+$/.test(r))){p.content=q.dom.setHTML(q.getBody(),'<br _mce_bogus="1" />');p.format="raw";}p.content=q.dom.setHTML(q.getBody(),h.trim(p.content));if(p.format!="raw"&&q.settings.cleanup){p.getInner=true;p.content=q.dom.setHTML(q.getBody(),q.serializer.serialize(q.getBody(),p));}if(!p.no_events){q.onSetContent.dispatch(q,p);}return p.content;},getContent:function(p){var q=this,r;p=p||{};p.format=p.format||"html";p.get=true;if(!p.no_events){q.onBeforeGetContent.dispatch(q,p);}if(p.format!="raw"&&q.settings.cleanup){p.getInner=true;r=q.serializer.serialize(q.getBody(),p);}else{r=q.getBody().innerHTML;}r=r.replace(/^\s*|\s*$/g,"");p.content=r;if(!p.no_events){q.onGetContent.dispatch(q,p);}return p.content;},isDirty:function(){var p=this;return h.trim(p.startContent)!=h.trim(p.getContent({format:"raw",no_events:1}))&&!p.isNotDirty;},getContainer:function(){var p=this;if(!p.container){p.container=n.get(p.editorContainer||p.id+"_parent");}return p.container;},getContentAreaContainer:function(){return this.contentAreaContainer;},getElement:function(){return n.get(this.settings.content_element||this.id);},getWin:function(){var q=this,p;if(!q.contentWindow){p=n.get(q.id+"_ifr");if(p){q.contentWindow=p.contentWindow;}}return q.contentWindow;},getDoc:function(){var q=this,p;if(!q.contentDocument){p=q.getWin();if(p){q.contentDocument=p.document;}}return q.contentDocument;},getBody:function(){return this.bodyElement||this.getDoc().body;},convertURL:function(r,x,v){var q=this,p=q.settings;if(p.urlconverter_callback){return q.execCallback("urlconverter_callback",r,v,true,x);}if(!p.convert_urls||(v&&v.nodeName=="LINK")||r.indexOf("file:")===0){return r;}if(p.relative_urls){return q.documentBaseURI.toRelative(r);}r=q.documentBaseURI.toAbsolute(r,p.remove_script_host);return r;},addVisual:function(r){var q=this,p=q.settings;r=r||q.getBody();if(!e(q.hasVisual)){q.hasVisual=p.visual;}d(q.dom.select("table,a",r),function(s){var t;switch(s.nodeName){case"TABLE":t=q.dom.getAttrib(s,"border");if(!t||t=="0"){if(q.hasVisual){q.dom.addClass(s,p.visual_table_class);}else{q.dom.removeClass(s,p.visual_table_class);}}return;case"A":t=q.dom.getAttrib(s,"name");if(t){if(q.hasVisual){q.dom.addClass(s,"mceItemAnchor");}else{q.dom.removeClass(s,"mceItemAnchor");}}return;}});q.onVisualAid.dispatch(q,r,q.hasVisual);},remove:function(){var q=this,p=q.getContainer();q.removed=1;q.hide();q.execCallback("remove_instance_callback",q);q.onRemove.dispatch(q);q.onExecCommand.listeners=[];h.remove(q);n.remove(p);},destroy:function(p){var q=this;if(q.destroyed){return;}if(!p){h.removeUnload(q.destroy);tinyMCE.onBeforeUnload.remove(q._beforeUnload);if(q.theme&&q.theme.destroy){q.theme.destroy();}q.controlManager.destroy();q.selection.destroy();q.dom.destroy();if(!q.settings.content_editable){l.clear(q.getWin());l.clear(q.getDoc());}l.clear(q.getBody());l.clear(q.formElement);}if(q.formElement){q.formElement.submit=q.formElement._mceOldSubmit;q.formElement._mceOldSubmit=null;}q.contentAreaContainer=q.formElement=q.container=q.settings.content_element=q.bodyElement=q.contentDocument=q.contentWindow=null;if(q.selection){q.selection=q.selection.win=q.selection.dom=q.selection.dom.doc=null;}q.destroyed=1;},_addEvents:function(){var z=this,p,y=z.settings,r=z.dom,u={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function q(B,s){var t=B.type;if(z.removed){return;}if(z.onEvent.dispatch(z,B,s)!==false){z[u[B.fakeType||B.type]].dispatch(z,B,s);}}d(u,function(t,s){switch(s){case"contextmenu":if(h.isOpera){r.bind(z.getBody(),"mousedown",function(B){if(B.ctrlKey){B.fakeType="contextmenu";q(B);}});}else{r.bind(z.getBody(),s,q);}break;case"paste":r.bind(z.getBody(),s,function(B){q(B);});break;case"submit":case"reset":r.bind(z.getElement().form||n.getParent(z.id,"form"),s,q);break;default:r.bind(y.content_editable?z.getBody():z.getDoc(),s,q);}});r.bind(y.content_editable?z.getBody():(a?z.getDoc():z.getWin()),"focus",function(s){z.focus(true);});if(h.isGecko){r.bind(z.getDoc(),"DOMNodeInserted",function(s){var t;s=s.target;if(s.nodeType===1&&s.nodeName==="IMG"&&(t=s.getAttribute("_mce_src"))){s.src=z.documentBaseURI.toAbsolute(t);}});}if(a){function x(){var C=this,D=C.getDoc(),B=C.settings;if(a&&!B.readonly){if(C._isHidden()){try{if(!B.content_editable){D.designMode="On";}}catch(E){}}try{D.execCommand("styleWithCSS",0,false);}catch(E){if(!C._isHidden()){try{D.execCommand("useCSS",0,true);}catch(E){}}}if(!B.table_inline_editing){try{D.execCommand("enableInlineTableEditing",false,false);}catch(E){}}if(!B.object_resizing){try{D.execCommand("enableObjectResizing",false,false);}catch(E){}}}}z.onBeforeExecCommand.add(x);z.onMouseDown.add(x);}if(h.isWebKit){z.onClick.add(function(s,t){t=t.target;if(t.nodeName=="IMG"||(t.nodeName=="A"&&r.hasClass(t,"mceItemAnchor"))){z.selection.getSel().setBaseAndExtent(t,0,t,1);z.nodeChanged();}});}z.onMouseUp.add(z.nodeChanged);z.onKeyUp.add(function(s,B){var t=B.keyCode;if((t>=33&&t<=36)||(t>=37&&t<=40)||t==13||t==45||t==46||t==8||(h.isMac&&(t==91||t==93))||B.ctrlKey){z.nodeChanged();}});z.onReset.add(function(){z.setContent(z.startContent,{format:"raw"});});if(y.custom_shortcuts){if(y.custom_undo_redo_keyboard_shortcuts){z.addShortcut("ctrl+z",z.getLang("undo_desc"),"Undo");z.addShortcut("ctrl+y",z.getLang("redo_desc"),"Redo");}z.addShortcut("ctrl+b",z.getLang("bold_desc"),"Bold");z.addShortcut("ctrl+i",z.getLang("italic_desc"),"Italic");z.addShortcut("ctrl+u",z.getLang("underline_desc"),"Underline");for(p=1;p<=6;p++){z.addShortcut("ctrl+"+p,"",["FormatBlock",false,"h"+p]);}z.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);z.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);z.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function v(s){var t=null;if(!s.altKey&&!s.ctrlKey&&!s.metaKey){return t;}d(z.shortcuts,function(B){if(h.isMac&&B.ctrl!=s.metaKey){return;}else{if(!h.isMac&&B.ctrl!=s.ctrlKey){return;}}if(B.alt!=s.altKey){return;}if(B.shift!=s.shiftKey){return;}if(s.keyCode==B.keyCode||(s.charCode&&s.charCode==B.charCode)){t=B;return false;}});return t;}z.onKeyUp.add(function(t,B){var s=v(B);if(s){return l.cancel(B);}});z.onKeyPress.add(function(t,B){var s=v(B);if(s){return l.cancel(B);}});z.onKeyDown.add(function(t,B){var s=v(B);if(s){s.func.call(s.scope);return l.cancel(B);}});}if(h.isIE){r.bind(z.getDoc(),"controlselect",function(B){var t=z.resizeInfo,s;B=B.target;if(B.nodeName!=="IMG"){return;}if(t){r.unbind(t.node,t.ev,t.cb);}if(!r.hasClass(B,"mceItemNoResize")){ev="resizeend";s=r.bind(B,ev,function(C){var D;C=C.target;if(D=r.getStyle(C,"width")){r.setAttrib(C,"width",D.replace(/[^0-9%]+/g,""));r.setStyle(C,"width","");}if(D=r.getStyle(C,"height")){r.setAttrib(C,"height",D.replace(/[^0-9%]+/g,""));r.setStyle(C,"height","");}});}else{ev="resizestart";s=r.bind(B,"resizestart",l.cancel,l);}t=z.resizeInfo={node:B,ev:ev,cb:s};});z.onKeyDown.add(function(s,t){switch(t.keyCode){case 8:if(z.selection.getRng().item){s.dom.remove(z.selection.getRng().item(0));return l.cancel(t);}}});}if(h.isOpera){z.onClick.add(function(s,t){l.prevent(t);});}if(y.custom_undo_redo){function A(){z.undoManager.typing=0;z.undoManager.add();}r.bind(z.getDoc(),"focusout",function(s){if(!z.removed&&z.undoManager.typing){A();}});z.onKeyUp.add(function(s,t){if((t.keyCode>=33&&t.keyCode<=36)||(t.keyCode>=37&&t.keyCode<=40)||t.keyCode==13||t.keyCode==45||t.ctrlKey){A();}});z.onKeyDown.add(function(s,E){var B,D,t;if(i&&E.keyCode==46){B=z.selection.getRng();if(B.parentElement){D=B.parentElement();if(E.ctrlKey){B.moveEnd("word",1);B.select();}z.selection.getSel().clear();if(B.parentElement()==D){t=z.selection.getBookmark();try{D.innerHTML=D.innerHTML;}catch(C){}z.selection.moveToBookmark(t);}E.preventDefault();return;}}if((E.keyCode>=33&&E.keyCode<=36)||(E.keyCode>=37&&E.keyCode<=40)||E.keyCode==13||E.keyCode==45){if(z.undoManager.typing){A();}return;}if(!z.undoManager.typing){z.undoManager.add();z.undoManager.typing=1;}});z.onMouseDown.add(function(){if(z.undoManager.typing){A();}});}},_isHidden:function(){var p;if(!a){return 0;}p=this.selection.getSel();return(!p||!p.rangeCount||p.rangeCount==0);},_fixNesting:function(q){var r=[],p;q=q.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(s,t,u){var v;if(t==="/"){if(!r.length){return"";}if(u!==r[r.length-1].tag){for(p=r.length-1;p>=0;p--){if(r[p].tag===u){r[p].close=1;break;}}return"";}else{r.pop();if(r.length&&r[r.length-1].close){s=s+"</"+r[r.length-1].tag+">";r.pop();}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(u)){return s;}if(/\/>$/.test(s)){return s;}r.push({tag:u});}return s;});for(p=r.length-1;p>=0;p--){q+="</"+r[p].tag+">";}return q;}});})(tinymce);(function(b){var e=b.each,c,d=true,a=false;b.EditorCommands=function(l){var n=l.dom,o=l.selection,f={state:{},exec:{},value:{}},m=l.settings,k;function p(v,x,u){var y;v=v.toLowerCase();if(y=f.exec[v]){y(v,x,u);return d;}return a;}function h(v){var u;v=v.toLowerCase();if(u=f.state[v]){return u(v);}return -1;}function t(v){var u;v=v.toLowerCase();if(u=f.value[v]){return u(v);}return a;}function j(v,u){u=u||"exec";e(v,function(x,y){e(y.toLowerCase().split(","),function(z){f[u][z]=x;});});}b.extend(this,{execCommand:p,queryCommandState:h,queryCommandValue:t,addCommands:j});function s(v,x,u){if(x===c){x=a;}if(u===c){u=null;}return l.getDoc().execCommand(v,x,u);}function q(u){return l.formatter.match(u);}function i(u,v){l.formatter.toggle(u,v?{value:v}:c);}function g(u){k=o.getBookmark(u);}function r(){o.moveToBookmark(k);}j({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){l.undoManager.add();},"Cut,Copy,Paste":function(u){var v=l.getDoc(),x;try{s(u);}catch(y){x=d;}if(x||!v.queryCommandSupported(u)){if(b.isGecko){l.windowManager.confirm(l.getLang("clipboard_msg"),function(z){if(z){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank");}});}else{l.windowManager.alert(l.getLang("clipboard_no_support"));}}},unlink:function(u){if(o.isCollapsed()){o.select(o.getNode());}s(u);o.collapse(a);},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){var u=v.substring(7);e("left,center,right,full".split(","),function(x){if(u!=x){l.formatter.remove("align"+x);}});i("align"+u);},"InsertUnorderedList,InsertOrderedList":function(u){var v,x;s(u);v=n.getParent(o.getNode(),"ol,ul");if(v){x=v.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)){g();n.split(x,v);r();}}},"Bold,Italic,Underline,Strikethrough":function(u){i(u);},"ForeColor,HiliteColor,FontName":function(v,x,u){i(v,u);},FontSize:function(v,x,u){var z,y;if(u>=1&&u<=7){y=b.explode(m.font_size_style_values);z=b.explode(m.font_size_classes);if(z){u=z[u-1]||u;}else{u=y[u-1]||u;}}i(v,u);},RemoveFormat:function(u){l.formatter.remove(u);},mceBlockQuote:function(u){i("blockquote");},FormatBlock:function(v,x,u){return i(u||"p");},mceCleanup:function(){var u=o.getBookmark();l.setContent(l.getContent({cleanup:d}),{cleanup:d});o.moveToBookmark(u);},mceRemoveNode:function(v,x,u){var y=u||o.getNode();if(y!=l.getBody()){g();l.dom.remove(y,d);r();}},mceSelectNodeDepth:function(x,y,u){var v=0;n.getParent(o.getNode(),function(z){if(z.nodeType==1&&v++==u){o.select(z);return a;}},l.getBody());},mceSelectNode:function(v,x,u){o.select(u);},mceInsertContent:function(v,x,u){o.setContent(u);},mceInsertRawHTML:function(v,x,u){o.setContent("tiny_mce_marker");l.setContent(l.getContent().replace(/tiny_mce_marker/g,function(){return u;}));},mceSetContent:function(v,x,u){l.setContent(u);},"Indent,Outdent":function(v){var y,x,u;y=m.indentation;x=/[a-z%]+$/i.exec(y);y=parseInt(y);if(!h("InsertUnorderedList")&&!h("InsertOrderedList")){e(o.getSelectedBlocks(),function(z){if(v=="outdent"){u=Math.max(0,parseInt(z.style.paddingLeft||0)-y);n.setStyle(z,"paddingLeft",u?u+x:"");}else{n.setStyle(z,"paddingLeft",(parseInt(z.style.paddingLeft||0)+y)+x);}});}else{s(v);}},mceRepaint:function(){var u;if(b.isGecko){try{g(d);if(o.getSel()){o.getSel().selectAllChildren(l.getBody());}o.collapse(d);r();}catch(v){}}},mceToggleFormat:function(v,x,u){l.formatter.toggle(u);},InsertHorizontalRule:function(){o.setContent("<hr />");},mceToggleVisualAid:function(){l.hasVisual=!l.hasVisual;l.addVisual();},mceReplaceContent:function(v,x,u){o.setContent(u.replace(/\{\$selection\}/g,o.getContent({format:"text"})));},mceInsertLink:function(v,x,u){var y=n.getParent(o.getNode(),"a");if(b.is(u,"string")){u={href:u};}if(!y){s("CreateLink",a,"javascript:mctmp(0);");e(n.select("a[href=javascript:mctmp(0);]"),function(z){n.setAttribs(z,u);});}else{if(u.href){n.setAttribs(y,u);}else{l.dom.remove(y,d);}}},selectAll:function(){var v=n.getRoot(),u=n.createRng();u.setStart(v,0);u.setEnd(v,v.childNodes.length);l.selection.setRng(u);}});j({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(u){return q("align"+u.substring(7));},"Bold,Italic,Underline,Strikethrough":function(u){return q(u);},mceBlockQuote:function(){return q("blockquote");},Outdent:function(){var u;if(m.inline_styles){if((u=n.getParent(o.getStart(),n.isBlock))&&parseInt(u.style.paddingLeft)>0){return d;}if((u=n.getParent(o.getEnd(),n.isBlock))&&parseInt(u.style.paddingLeft)>0){return d;}}return h("InsertUnorderedList")||h("InsertOrderedList")||(!m.inline_styles&&!!n.getParent(o.getNode(),"BLOCKQUOTE"));},"InsertUnorderedList,InsertOrderedList":function(u){return n.getParent(o.getNode(),u=="insertunorderedlist"?"UL":"OL");}},"state");j({"FontSize,FontName":function(x){var u=0,v;if(v=n.getParent(o.getNode(),"span")){if(x=="fontsize"){u=v.style.fontSize;}else{u=v.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();}}return u;}},"value");if(m.custom_undo_redo){j({Undo:function(){l.undoManager.undo();},Redo:function(){l.undoManager.redo();}});}};})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(f){var e,d=0,c=[];function g(){return b.trim(f.getContent({format:"raw",no_events:1}));}return e={typing:0,onAdd:new a(e),onUndo:new a(e),onRedo:new a(e),add:function(j){var h,k=f.settings,l;j=j||{};j.content=g();l=c[d];if(l&&l.content==j.content){if(d>0||c.length==1){return null;}}if(k.custom_undo_redo_levels){if(c.length>k.custom_undo_redo_levels){for(h=0;h<c.length-1;h++){c[h]=c[h+1];}c.length--;d=c.length;}}j.bookmark=f.selection.getBookmark(2,true);if(d<c.length-1){if(d==0){c=[];}else{c.length=d+1;}}c.push(j);d=c.length-1;e.onAdd.dispatch(e,j);f.isNotDirty=0;return j;},undo:function(){var j,h;if(e.typing){e.add();e.typing=0;}if(d>0){j=c[--d];f.setContent(j.content,{format:"raw"});f.selection.moveToBookmark(j.bookmark);e.onUndo.dispatch(e,j);}return j;},redo:function(){var h;if(d<c.length-1){h=c[++d];f.setContent(h.content,{format:"raw"});f.selection.moveToBookmark(h.bookmark);e.onRedo.dispatch(e,h);}return h;},clear:function(){c=[];d=e.typing=0;},hasUndo:function(){return d>0||e.typing;},hasRedo:function(){return d<c.length-1;}};};})(tinymce);(function(h){var j=h.dom.Event,i=h.isIE,a=h.isGecko,b=h.isOpera,m=h.each,g=h.extend,e=true,c=false;function f(o){var n,q,p;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(o.nodeName)){if(n){q=o.cloneNode(false);q.appendChild(n);n=q;}else{n=p=o.cloneNode(false);}n.removeAttribute("id");}}while(o=o.parentNode);if(n){return{wrapper:n,inner:p};}}function l(p,o){var n=o.ownerDocument.createRange();n.setStart(p.endContainer,p.endOffset);n.setEndAfter(o);return n.cloneContents().textContent.length==0;}function d(o){o=o.innerHTML;o=o.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");o=o.replace(/<[^>]+>/g,"");return o.replace(/[ \u00a0\t\r\n]+/g,"")=="";}function k(p,r,q){var n,o;if(d(q)){n=r.getParent(q,"ul,ol");if(!r.getParent(n.parentNode,"ul,ol")){r.split(n,q);o=r.create("p",0,'<br _mce_bogus="1" />');r.replace(o,q);p.select(o,1);}return c;}return e;}h.create("tinymce.ForceBlocks",{ForceBlocks:function(r){var q=this,p=r.settings,o;q.editor=r;q.dom=r.dom;o=(p.forced_root_block||"p").toLowerCase();p.element=o.toUpperCase();r.onPreInit.add(q.setup,q);q.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+o+">","gi");q.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,o),"gi");q.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,o),"gi");q.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,o),"gi");q.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi");function n(s,t){if(b){t.content=t.content.replace(q.reOpera,"</"+o+">");}t.content=h._replace(q.rePadd,"<"+o+"$1$2$3$4$5$6>\u00a0</"+o+">",t.content);if(!i&&!b&&t.set){t.content=t.content.replace(q.reNbsp2BR1,"<"+o+"$1$2><br /></"+o+">");t.content=t.content.replace(q.reNbsp2BR2,"<"+o+"$1$2><br /></"+o+">");}else{t.content=h._replace(q.reBR2Nbsp,"<"+o+"$1$2>\u00a0</"+o+">",t.content);}}r.onBeforeSetContent.add(n);r.onPostProcess.add(n);if(p.forced_root_block){r.onInit.add(q.forceRoots,q);r.onSetContent.add(q.forceRoots,q);r.onBeforeGetContent.add(q.forceRoots,q);}},setup:function(){var u=this,n=u.editor,r=n.settings,p=n.dom,o=n.selection;if(r.forced_root_block){n.onBeforeExecCommand.add(u.forceRoots,u);n.onKeyUp.add(u.forceRoots,u);n.onPreProcess.add(u.forceRoots,u);}if(r.force_br_newlines){if(i){n.onKeyPress.add(function(s,v){var t;if(v.keyCode==13&&o.getNode().nodeName!="LI"){o.setContent('<br id="__" /> ',{format:"raw"});t=p.get("__");t.removeAttribute("id");o.select(t);o.collapse();return j.cancel(v);}});}}if(r.force_p_newlines){if(!i){n.onKeyPress.add(function(s,t){if(t.keyCode==13&&!t.shiftKey&&!u.insertPara(t)){j.cancel(t);}});}else{h.addUnload(function(){u._previousFormats=0;});n.onKeyPress.add(function(s,t){u._previousFormats=0;if(t.keyCode==13&&!t.shiftKey&&s.selection.isCollapsed()&&r.keep_styles){u._previousFormats=f(s.selection.getStart());}});n.onKeyUp.add(function(v,x){if(x.keyCode==13&&!x.shiftKey){var t=v.selection.getStart(),s=u._previousFormats;if(!t.hasChildNodes()&&s){t=p.getParent(t,p.isBlock);if(t&&t.nodeName!="LI"){t.innerHTML="";if(u._previousFormats){t.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF";}else{t.innerHTML="\uFEFF";}o.select(t,1);v.getDoc().execCommand("Delete",false,null);u._previousFormats=0;}}}});}if(a){n.onKeyDown.add(function(s,t){if((t.keyCode==8||t.keyCode==46)&&!t.shiftKey){u.backspaceDelete(t,t.keyCode==8);}});}}if(h.isWebKit){function q(x){var s=o.getRng(),z,v=p.create("div",null," "),y,t=p.getViewPort(x.getWin()).h;s.insertNode(z=p.create("br"));s.setStartAfter(z);s.setEndAfter(z);o.setRng(s);if(o.getSel().focusNode==z.previousSibling){o.select(p.insertAfter(p.doc.createTextNode("\u00a0"),z));o.collapse(e);}p.insertAfter(v,z);y=p.getPos(v).y;p.remove(v);if(y>t){x.getWin().scrollTo(0,y);}}n.onKeyPress.add(function(s,t){if(t.keyCode==13&&(t.shiftKey||(r.force_br_newlines&&!p.getParent(o.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){q(s);j.cancel(t);}});}n.onPreProcess.add(function(s,t){m(p.select("p,h1,h2,h3,h4,h5,h6,div",t.node),function(v){if(d(v)){m(p.select("span,em,strong,b,i",t.node),function(x){if(!x.hasChildNodes()){x.appendChild(s.getDoc().createTextNode("\u00a0"));return c;}});}});});if(i){if(r.element!="P"){n.onKeyPress.add(function(s,t){u.lastElm=o.getNode().nodeName;});n.onKeyUp.add(function(v,y){var s,x=o.getNode(),t=v.getBody();if(t.childNodes.length===1&&x.nodeName=="P"){x=p.rename(x,r.element);o.select(x);o.collapse();v.nodeChanged();}else{if(y.keyCode==13&&!y.shiftKey&&u.lastElm!="P"){s=p.getParent(x,"p");if(s){p.rename(s,r.element);v.nodeChanged();}}}});}}},find:function(p,u,r){var o=this.editor,v=o.getDoc().createTreeWalker(p,4,null,c),q=-1;while(p=v.nextNode()){q++;if(u==0&&p==r){return q;}if(u==1&&q==r){return p;}}return -1;},forceRoots:function(o,M){var D=this,o=D.editor,J=o.getBody(),L=o.getDoc(),K=o.selection,C=K.getSel(),u=K.getRng(),N=-2,F,B,A,x,G=-16777215;var p,P,q,I,v,O=J.childNodes,H,E,z;for(H=O.length-1;H>=0;H--){p=O[H];if(p.nodeType===1&&p.getAttribute("_mce_type")){P=null;continue;}if(p.nodeType===3||(!D.dom.isBlock(p)&&p.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(p.nodeName))){if(!P){if(p.nodeType!=3||/[^\s]/g.test(p.nodeValue)){if(N==-2&&u){if(!i||u.setStart){if(u.startContainer.nodeType==1&&(E=u.startContainer.childNodes[u.startOffset])&&E.nodeType==1){z=E.getAttribute("id");E.setAttribute("id","__mce");}else{if(o.dom.getParent(u.startContainer,function(n){return n===J;})){B=u.startOffset;A=u.endOffset;N=D.find(J,0,u.startContainer);F=D.find(J,0,u.endContainer);}}}else{if(u.item){x=L.body.createTextRange();x.moveToElementText(u.item(0));u=x;}x=L.body.createTextRange();x.moveToElementText(J);x.collapse(1);q=x.move("character",G)*-1;x=u.duplicate();x.collapse(1);I=x.move("character",G)*-1;x=u.duplicate();x.collapse(0);v=(x.move("character",G)*-1)-I;N=I-q;F=v;}}P=o.dom.create(o.settings.forced_root_block);p.parentNode.replaceChild(P,p);P.appendChild(p);}}else{if(P.hasChildNodes()){P.insertBefore(p,P.firstChild);}else{P.appendChild(p);}}}else{P=null;}}if(N!=-2){if(!i||u.setStart){P=J.getElementsByTagName(o.settings.element)[0];u=L.createRange();if(N!=-1){u.setStart(D.find(J,1,N),B);}else{u.setStart(P,0);}if(F!=-1){u.setEnd(D.find(J,1,F),A);}else{u.setEnd(P,0);}if(C){C.removeAllRanges();C.addRange(u);}}else{try{u=C.createRange();u.moveToElementText(J);u.collapse(1);u.moveStart("character",N);u.moveEnd("character",F);u.select();}catch(y){}}}else{if((!i||u.setStart)&&(E=o.dom.get("__mce"))){if(z){E.setAttribute("id",z);}else{E.removeAttribute("id");}u=L.createRange();u.setStartBefore(E);u.setEndBefore(E);K.setRng(u);}}},getParentBlock:function(o){var p=this.dom;return p.getParent(o,p.isBlock);},insertPara:function(L){var E=this,I=E.editor,W=I.dom,K=I.getDoc(),O=I.settings,D=I.selection.getSel(),C=D.getRangeAt(0),J=K.body;var N,q,F,V,P,B,Q,M,R,A,p,S,U,X,H,u=W.getViewPort(I.getWin()),v,o,x;N=K.createRange();N.setStart(D.anchorNode,D.anchorOffset);N.collapse(e);q=K.createRange();q.setStart(D.focusNode,D.focusOffset);q.collapse(e);F=N.compareBoundaryPoints(N.START_TO_END,q)<0;V=F?D.anchorNode:D.focusNode;P=F?D.anchorOffset:D.focusOffset;B=F?D.focusNode:D.anchorNode;Q=F?D.focusOffset:D.anchorOffset;if(V===B&&/^(TD|TH)$/.test(V.nodeName)){if(V.firstChild.nodeName=="BR"){W.remove(V.firstChild);}if(V.childNodes.length==0){I.dom.add(V,O.element,null,"<br />");S=I.dom.add(V,O.element,null,"<br />");}else{H=V.innerHTML;V.innerHTML="";I.dom.add(V,O.element,null,H);S=I.dom.add(V,O.element,null,"<br />");}C=K.createRange();C.selectNodeContents(S);C.collapse(1);I.selection.setRng(C);return c;}if(V==J&&B==J&&J.firstChild&&I.dom.isBlock(J.firstChild)){V=B=V.firstChild;P=Q=0;N=K.createRange();N.setStart(V,0);q=K.createRange();q.setStart(B,0);}V=V.nodeName=="HTML"?K.body:V;V=V.nodeName=="BODY"?V.firstChild:V;B=B.nodeName=="HTML"?K.body:B;B=B.nodeName=="BODY"?B.firstChild:B;M=E.getParentBlock(V);R=E.getParentBlock(B);A=M?M.nodeName:O.element;if(H=E.dom.getParent(M,"li,pre")){if(H.nodeName=="LI"){return k(I.selection,E.dom,H);}return e;}if(M&&(M.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(W.getStyle(M,"position",1)))){A=O.element;M=null;}if(R&&(R.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(W.getStyle(M,"position",1)))){A=O.element;R=null;}if(/(TD|TABLE|TH|CAPTION)/.test(A)||(M&&A=="DIV"&&/left|right/gi.test(W.getStyle(M,"float",1)))){A=O.element;M=R=null;}p=(M&&M.nodeName==A)?M.cloneNode(0):I.dom.create(A);S=(R&&R.nodeName==A)?R.cloneNode(0):I.dom.create(A);S.removeAttribute("id");if(/^(H[1-6])$/.test(A)&&l(C,M)){S=I.dom.create(O.element);}H=U=V;do{if(H==J||H.nodeType==9||E.dom.isBlock(H)||/(TD|TABLE|TH|CAPTION)/.test(H.nodeName)){break;}U=H;}while((H=H.previousSibling?H.previousSibling:H.parentNode));H=X=B;do{if(H==J||H.nodeType==9||E.dom.isBlock(H)||/(TD|TABLE|TH|CAPTION)/.test(H.nodeName)){break;}X=H;}while((H=H.nextSibling?H.nextSibling:H.parentNode));if(U.nodeName==A){N.setStart(U,0);}else{N.setStartBefore(U);}N.setEnd(V,P);p.appendChild(N.cloneContents()||K.createTextNode(""));try{q.setEndAfter(X);}catch(G){}q.setStart(B,Q);S.appendChild(q.cloneContents()||K.createTextNode(""));C=K.createRange();if(!U.previousSibling&&U.parentNode.nodeName==A){C.setStartBefore(U.parentNode);}else{if(N.startContainer.nodeName==A&&N.startOffset==0){C.setStartBefore(N.startContainer);}else{C.setStart(N.startContainer,N.startOffset);}}if(!X.nextSibling&&X.parentNode.nodeName==A){C.setEndAfter(X.parentNode);}else{C.setEnd(q.endContainer,q.endOffset);}C.deleteContents();if(b){I.getWin().scrollTo(0,u.y);}if(p.firstChild&&p.firstChild.nodeName==A){p.innerHTML=p.firstChild.innerHTML;}if(S.firstChild&&S.firstChild.nodeName==A){S.innerHTML=S.firstChild.innerHTML;}if(d(p)){p.innerHTML="<br />";}function z(Y,Z){var s=[],y,t,r;Y.innerHTML="";if(O.keep_styles){t=Z;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(t.nodeName)){y=t.cloneNode(c);W.setAttrib(y,"id","");s.push(y);}}while(t=t.parentNode);}if(s.length>0){for(r=s.length-1,y=Y;r>=0;r--){y=y.appendChild(s[r]);}s[0].innerHTML=b?"&nbsp;":"<br />";return s[0];}else{Y.innerHTML=b?"&nbsp;":"<br />";}}if(d(S)){x=z(S,B);}if(b&&parseFloat(opera.version())<9.5){C.insertNode(p);C.insertNode(S);}else{C.insertNode(S);C.insertNode(p);}S.normalize();p.normalize();function T(r){return K.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,c).nextNode()||r;}C=K.createRange();C.selectNodeContents(a?T(x||S):x||S);C.collapse(1);D.removeAllRanges();D.addRange(C);v=I.dom.getPos(S).y;o=S.clientHeight;if(v<u.y||v+o>u.y+u.h){I.getWin().scrollTo(0,v<u.y?v:v-u.h+25);}return c;},backspaceDelete:function(C,B){var u=this,o=u.editor,z=o.getBody(),x=o.dom,y,A=o.selection,s=A.getRng(),q=s.startContainer,y,v,p,D;if(!B&&s.collapsed&&q.nodeType==1&&s.startOffset==q.childNodes.length){D=new h.dom.TreeWalker(q.lastChild,q);for(y=q.lastChild;y;y=D.prev()){if(y.nodeType==3){s.setStart(y,y.nodeValue.length);s.collapse(true);A.setRng(s);return;}}}if(q&&o.dom.isBlock(q)&&!/^(TD|TH)$/.test(q.nodeName)&&B){if(q.childNodes.length==0||(q.childNodes.length==1&&q.firstChild.nodeName=="BR")){y=q;while((y=y.previousSibling)&&!o.dom.isBlock(y)){}if(y){if(q!=z.firstChild){v=o.dom.doc.createTreeWalker(y,NodeFilter.SHOW_TEXT,null,c);while(p=v.nextNode()){y=p;}s=o.getDoc().createRange();s.setStart(y,y.nodeValue?y.nodeValue.length:0);s.setEnd(y,y.nodeValue?y.nodeValue.length:0);A.setRng(s);o.dom.remove(q);}return j.cancel(C);}}}}});})(tinymce);(function(a){var d=a.DOM,c=a.dom.Event,e=a.each,b=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(j,g){var h=this,f;g=g||{};h.editor=j;h.controls={};h.onAdd=new a.util.Dispatcher(h);h.onPostRender=new a.util.Dispatcher(h);h.prefix=g.prefix||j.id+"_";h._cls={};h.onPostRender.add(function(){e(h.controls,function(i){i.postRender();});});},get:function(f){return this.controls[this.prefix+f]||this.controls[f];},setActive:function(f,g){var h=null;if(h=this.get(f)){h.setActive(g);}return h;},setDisabled:function(f,g){var h=null;if(h=this.get(f)){h.setDisabled(g);}return h;},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f);}return g;},createControl:function(i){var h,g=this,f=g.editor;e(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false;}}});switch(i){case"|":case"separator":return g.createSeparator();}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h);}return g.add(h);},createDropMenu:function(g,j,n){var k=this,f=k.editor,i,h,m,l;j=b({"class":"mceDropDown",constrain:f.settings.constrain_menus},j);j["class"]=j["class"]+" "+f.getParam("skin")+"Skin";if(m=f.getParam("skin_variant")){j["class"]+=" "+f.getParam("skin")+"Skin"+m.substring(0,1).toUpperCase()+m.substring(1);}g=k.prefix+g;l=n||k._cls.dropmenu||a.ui.DropMenu;i=k.controls[g]=new l(g,j);i.onAddItem.add(function(r,p){var q=p.settings;q.title=f.getLang(q.title,q.title);if(!q.onclick){q.onclick=function(o){if(q.cmd){f.execCommand(q.cmd,q.ui||false,q.value);}};}});f.onRemove.add(function(){i.destroy();});if(a.isIE){i.onShowMenu.add(function(){f.focus();h=f.selection.getBookmark(1);});i.onHideMenu.add(function(){if(h){f.selection.moveToBookmark(h);h=0;}});}return k.add(i);},createListBox:function(g,j,m){var k=this,f=k.editor,l,i,h;if(k.get(g)){return null;}j.title=f.translate(j.title);j.scope=j.scope||f;if(!j.onselect){j.onselect=function(n){f.execCommand(j.cmd,j.ui||false,n||j.value);};}j=b({title:j.title,"class":"mce_"+g,scope:j.scope,control_manager:k},j);g=k.prefix+g;if(f.settings.use_native_selects){i=new a.ui.NativeListBox(g,j);}else{h=m||k._cls.listbox||a.ui.ListBox;i=new h(g,j);}k.controls[g]=i;if(a.isWebKit){i.onPostRender.add(function(p,o){c.add(o,"mousedown",function(){f.bookmark=f.selection.getBookmark(1);});c.add(o,"focus",function(){f.selection.moveToBookmark(f.bookmark);f.bookmark=null;});});}if(i.hideMenu){f.onMouseDown.add(i.hideMenu,i);}return k.add(i);},createButton:function(g,j,m){var k=this,f=k.editor,h,i,l;if(k.get(g)){return null;}j.title=f.translate(j.title);j.label=f.translate(j.label);j.scope=j.scope||f;if(!j.onclick&&!j.menu_button){j.onclick=function(){f.execCommand(j.cmd,j.ui||false,j.value);};}j=b({title:j.title,"class":"mce_"+g,unavailable_prefix:f.getLang("unavailable",""),scope:j.scope,control_manager:k},j);g=k.prefix+g;if(j.menu_button){l=m||k._cls.menubutton||a.ui.MenuButton;i=new l(g,j);f.onMouseDown.add(i.hideMenu,i);}else{l=k._cls.button||a.ui.Button;i=new l(g,j);}return k.add(i);},createMenuButton:function(f,g,h){g=g||{};g.menu_button=1;return this.createButton(f,g,h);},createSplitButton:function(g,j,m){var k=this,f=k.editor,l,i,h;if(k.get(g)){return null;}j.title=f.translate(j.title);j.scope=j.scope||f;if(!j.onclick){j.onclick=function(n){f.execCommand(j.cmd,j.ui||false,n||j.value);};}if(!j.onselect){j.onselect=function(n){f.execCommand(j.cmd,j.ui||false,n||j.value);};}j=b({title:j.title,"class":"mce_"+g,scope:j.scope,control_manager:k},j);g=k.prefix+g;h=m||k._cls.splitbutton||a.ui.SplitButton;i=k.add(new h(g,j));f.onMouseDown.add(i.hideMenu,i);return i;},createColorSplitButton:function(g,j,n){var k=this,f=k.editor,l,i,h,m;if(k.get(g)){return null;}j.title=f.translate(j.title);j.scope=j.scope||f;if(!j.onclick){j.onclick=function(o){if(a.isIE){m=f.selection.getBookmark(1);}f.execCommand(j.cmd,j.ui||false,o||j.value);};}if(!j.onselect){j.onselect=function(o){f.execCommand(j.cmd,j.ui||false,o||j.value);};}j=b({title:j.title,"class":"mce_"+g,menu_class:f.getParam("skin")+"Skin",scope:j.scope,more_colors_title:f.getLang("more_colors")},j);g=k.prefix+g;h=n||k._cls.colorsplitbutton||a.ui.ColorSplitButton;i=new h(g,j);f.onMouseDown.add(i.hideMenu,i);f.onRemove.add(function(){i.destroy();});if(a.isIE){i.onShowMenu.add(function(){f.focus();m=f.selection.getBookmark(1);});i.onHideMenu.add(function(){if(m){f.selection.moveToBookmark(m);m=0;}});}return k.add(i);},createToolbar:function(g,i,k){var h,j=this,f;g=j.prefix+g;f=k||j._cls.toolbar||a.ui.Toolbar;h=new f(g,i);if(j.get(g)){return null;}return j.add(h);},createSeparator:function(f){var g=f||this._cls.separator||a.ui.Separator;return new g();},setControlType:function(f,g){return this._cls[f.toLowerCase()]=g;},destroy:function(){e(this.controls,function(f){f.destroy();});this.controls=null;}});})(tinymce);(function(b){var a=b.util.Dispatcher,e=b.each,c=b.isIE,d=b.isOpera;b.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={};},open:function(k,j){var l=this,z="",g,h,o=l.editor.settings.dialog_type=="modal",n,r,q,v=b.DOM.getViewPort(),m;k=k||{};j=j||{};r=d?v.w:screen.width;q=d?v.h:screen.height;k.name=k.name||"mc_"+new Date().getTime();k.width=parseInt(k.width||320);k.height=parseInt(k.height||240);k.resizable=true;k.left=k.left||parseInt(r/2)-(k.width/2);k.top=k.top||parseInt(q/2)-(k.height/2);j.inline=false;j.mce_width=k.width;j.mce_height=k.height;j.mce_auto_focus=k.auto_focus;if(o){if(c){k.center=true;k.help=false;k.dialogWidth=k.width+"px";k.dialogHeight=k.height+"px";k.scroll=k.scrollbars||false;}}e(k,function(p,f){if(b.is(p,"boolean")){p=p?"yes":"no";}if(!/^(name|url)$/.test(f)){if(c&&o){z+=(z?";":"")+f+":"+p;}else{z+=(z?",":"")+f+"="+p;}}});l.features=k;l.params=j;l.onOpen.dispatch(l,k,j);m=k.url||k.file;m=b._addVer(m);try{if(c&&o){n=1;window.showModalDialog(m,window,z);}else{n=window.open(m,k.name,z);}}catch(i){}if(!n){alert(l.editor.getLang("popup_blocked"));}},close:function(f){f.close();this.onClose.dispatch(this);},createInstance:function(g,k,h,i,j,m){var l=b.resolve(g);return new l(k,h,i,j,m);},confirm:function(h,f,g,i){i=i||window;f.call(g||this,i.confirm(this._decode(this.editor.getLang(h,h))));},alert:function(i,f,h,j){var g=this;j=j||window;j.alert(g._decode(g.editor.getLang(i,i)));if(f){f.call(h||g);}},resizeBy:function(f,g,h){h.resizeBy(f,g);},_decode:function(f){return b.DOM.decode(f).replace(/\\n/g,"\n");}});}(tinymce));(function(b){function a(){var c={},f={},e={};function d(j,i,h,g){if(typeof(i)=="string"){i=[i];}b.each(i,function(k){j[k.toLowerCase()]={func:h,scope:g};});}b.extend(this,{add:function(i,h,g){d(c,i,h,g);},addQueryStateHandler:function(i,h,g){d(f,i,h,g);},addQueryValueHandler:function(i,h,g){d(e,i,h,g);},execCommand:function(i,k,j,g,h){if(k=c[k.toLowerCase()]){if(k.func.call(i||k.scope,j,g,h)!==false){return true;}}},queryCommandValue:function(){if(cmd=e[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args);}},queryCommandState:function(){if(cmd=f[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args);}}});}b.GlobalCommands=new a();})(tinymce);(function(a){a.Formatter=function(r){var A={},j=a.each,Q=r.dom,L=r.selection,d=a.dom.TreeWalker,H=new a.dom.RangeUtils(Q),q=r.schema.isValid,I=Q.isBlock,B=r.settings.forced_root_block,T=Q.nodeIndex,t="\uFEFF",C=/^(src|href|style)$/,h=false,K=true,l,k={apply:[],remove:[]};function f(U){return U instanceof Array;}function y(U,V){return Q.getParents(U,V,Q.getRoot());}function e(U){return U.nodeType===1&&(U.face==="mceinline"||U.style.fontFamily==="mceinline");}function u(U){return U?A[U]:A;}function E(V,U){if(V){if(typeof(V)!=="string"){j(V,function(X,W){E(W,X);});}else{U=U.length?U:[U];j(U,function(W){if(W.deep===l){W.deep=!W.selector;}if(W.split===l){W.split=!W.selector||W.inline;}if(W.remove===l&&W.selector&&!W.inline){W.remove="none";}if(W.selector&&W.inline){W.mixed=true;W.block_expand=true;}if(typeof(W.classes)==="string"){W.classes=W.classes.split(/\s+/);}});A[V]=U;}}}function c(ad,V,ae){var ab=u(ad),U=ab[0],Z,W,X;function aa(aj){var ai=aj.startContainer,ag=aj.startOffset,ah,af;if(ai.nodeType==1||ai.nodeValue===""){ai=ai.nodeType==1?ai.childNodes[ag]:ai;if(ai){ah=new d(ai,ai.parentNode);for(af=ah.current();af;af=ah.next()){if(af.nodeType==3&&!R(af)){aj.setStart(af,0);break;}}}}return aj;}function Y(af,ag){ag=ag||U;if(af){j(ag.styles,function(ai,ah){Q.setStyle(af,ah,O(ai,V));});j(ag.attributes,function(ai,ah){Q.setAttrib(af,ah,O(ai,V));});j(ag.classes,function(ah){ah=O(ah,V);if(!Q.hasClass(af,ah)){Q.addClass(af,ah);}});}}function ac(ai){var ag=[],af,ah;af=U.inline||U.block;ah=Q.create(af);Y(ah);H.walk(ai,function(al){var aj;function ak(ao){var ap=ao.nodeName.toLowerCase(),an=ao.parentNode.nodeName.toLowerCase(),am;if(v(ap,"br")){aj=0;if(U.block){Q.remove(ao);}return;}if(U.wrapper&&b(ao,ad,V)){aj=0;return;}if(U.block&&!U.wrapper&&m(ap)){ao=Q.rename(ao,af);Y(ao);ag.push(ao);aj=0;return;}if(U.selector){j(ab,function(aq){if(Q.is(ao,aq.selector)&&!e(ao)){Y(ao,aq);am=true;}});if(!U.inline||am){aj=0;return;}}if((U.wrap_links!==false||ap!="a")&&q(af,ap)&&q(an,af)){if(!aj){aj=ah.cloneNode(h);ao.parentNode.insertBefore(aj,ao);ag.push(aj);}aj.appendChild(ao);}else{aj=0;j(a.grep(ao.childNodes),ak);aj=0;}}j(al,ak);});j(ag,function(ak){var aj;function am(an){var ao=0;j(an.childNodes,function(ap){if(!R(ap)&&!M(ap)){ao++;}});return ao;}function al(an){var ap,ao;j(an.childNodes,function(aq){if(aq.nodeType==1&&!M(aq)&&!e(aq)){ap=aq;return h;}});if(ap&&z(ap,U)){ao=ap.cloneNode(h);Y(ao);Q.replace(ao,an,K);Q.remove(ap,1);}return ao||an;}aj=am(ak);if(aj===0){Q.remove(ak,1);return;}if(U.inline||U.wrapper){if(!U.exact&&aj===1){ak=al(ak);}j(ab,function(an){j(Q.select(an.inline,ak),function(ao){P(an,V,ao,an.exact?ao:null);});});if(b(ak.parentNode,ad,V)){Q.remove(ak,1);ak=0;return K;}if(U.merge_with_parents){Q.getParent(ak.parentNode,function(an){if(b(an,ad,V)){Q.remove(ak,1);ak=0;return K;}});}if(ak){ak=F(N(ak),ak);ak=F(ak,N(ak,K));}}});}if(U){if(ae){W=Q.createRng();W.setStartBefore(ae);W.setEndAfter(ae);ac(s(W,ab));}else{if(!L.isCollapsed()||!U.inline){Z=L.getBookmark();ac(s(L.getRng(K),ab));L.moveToBookmark(Z);L.setRng(aa(L.getRng(K)));r.nodeChanged();}else{S("apply",ad,V);}}}}function p(X,U,V){var W=u(X),af=W[0],Y,aa,ac;function Z(aj){var ao=aj.startContainer,am=aj.startOffset,an,ak,al,ap;if(ao.nodeType==3&&am>=ao.nodeValue.length-1){ao=ao.parentNode;am=T(ao)+1;}if(ao.nodeType==1){al=ao.childNodes;ao=al[Math.min(am,al.length-1)];an=new d(ao);if(am>al.length-1){an.next();}for(ak=an.current();ak;ak=an.next()){if(ak.nodeType==3&&!R(ak)){ap=Q.create("a",null,t);ak.parentNode.insertBefore(ap,ak);aj.setStart(ak,0);L.setRng(aj);Q.remove(ap);return;}}}}function ag(al){var am,aj,ak;am=a.grep(al.childNodes);for(aj=0,ak=W.length;aj<ak;aj++){if(P(W[aj],U,al,al)){break;}}if(af.deep){for(aj=0,ak=am.length;aj<ak;aj++){ag(am[aj]);}}}function ab(ak){var aj;j(y(ak.parentNode).reverse(),function(am){var al;if(!aj&&am.id!="_start"&&am.id!="_end"){al=b(am,X,U);if(al&&al.split!==false){aj=am;}}});return aj;}function ah(at,aq,ap,al){var ao,am,an,ar,ak,aj;if(at){aj=at.parentNode;for(ao=aq.parentNode;ao&&ao!=aj;ao=ao.parentNode){am=ao.cloneNode(h);for(ak=0;ak<W.length;ak++){if(P(W[ak],U,am,am)){am=0;break;}}if(am){if(an){am.appendChild(an);}if(!ar){ar=am;}an=am;}}if(al&&(!af.mixed||!I(at))){aq=Q.split(at,aq);}if(an){ap.parentNode.insertBefore(an,ap);ar.appendChild(ap);}}return aq;}function ad(aj){return ah(ab(aj),aj,aj,true);}function ae(al){var aj=Q.get(al?"_start":"_end"),ak=aj[al?"firstChild":"lastChild"];if(M(ak)){ak=ak[al?"firstChild":"lastChild"];}Q.remove(aj,true);return ak;}function ai(al){var ak,aj;al=s(al,W,K);if(af.split){ak=D(al,K);aj=D(al);if(ak!=aj){ak=g(ak,"span",{id:"_start",_mce_type:"bookmark"});aj=g(aj,"span",{id:"_end",_mce_type:"bookmark"});ad(ak);ad(aj);ak=ae(K);aj=ae();}else{ak=aj=ad(ak);}al.startContainer=ak.parentNode;al.startOffset=T(ak);al.endContainer=aj.parentNode;al.endOffset=T(aj)+1;}H.walk(al,function(am){j(am,function(an){ag(an);});});}if(V){ac=Q.createRng();ac.setStartBefore(V);ac.setEndAfter(V);ai(ac);return;}if(!L.isCollapsed()||!af.inline){Y=L.getBookmark();ai(L.getRng(K));L.moveToBookmark(Y);if(n(X,U,L.getStart())){Z(L.getRng(true));}r.nodeChanged();}else{S("remove",X,U);}}function J(W,U,V){if(n(W,U,V)){p(W,U,V);}else{c(W,U,V);}}function b(aa,Z,V,ac){var Y=u(Z),U,W,X;function ab(ag,ad,ai){var ah,af,aj=ad[ai],ae;if(aj){if(aj.length===l){for(ah in aj){if(aj.hasOwnProperty(ah)){if(ai==="attributes"){af=Q.getAttrib(ag,ah);}else{af=o(ag,ah);}if(ac&&!af&&!ad.exact){return;}if((!ac||ad.exact)&&!v(af,O(aj[ah],V))){return;}}}}else{for(ae=0;ae<aj.length;ae++){if(ai==="attributes"?Q.getAttrib(ag,aj[ae]):o(ag,aj[ae])){return ad;}}}}return ad;}if(Y&&aa){for(W=0;W<Y.length;W++){U=Y[W];if(z(aa,U)&&ab(aa,U,"attributes")&&ab(aa,U,"styles")){if(X=U.classes){for(W=0;W<X.length;W++){if(!Q.hasClass(aa,X[W])){return;}}}return U;}}}}function n(Y,U,Z){var X,V;function W(aa){aa=Q.getParent(aa,function(ab){return !!b(ab,Y,U,true);});return b(aa,Y,U);}if(Z){return W(Z);}if(L.isCollapsed()){for(V=k.apply.length-1;V>=0;V--){if(k.apply[V].name==Y){return true;}}for(V=k.remove.length-1;V>=0;V--){if(k.remove[V].name==Y){return false;}}return W(L.getNode());}Z=L.getNode();if(W(Z)){return K;}X=L.getStart();if(X!=Z){if(W(X)){return K;}}return h;}function x(Z,U){var ab,X=[],Y={},V,W,aa;if(L.isCollapsed()){for(W=0;W<Z.length;W++){for(V=k.remove.length-1;V>=0;V--){aa=Z[W];if(k.remove[V].name==aa){Y[aa]=true;break;}}}for(V=k.apply.length-1;V>=0;V--){for(W=0;W<Z.length;W++){aa=Z[W];if(!Y[aa]&&k.apply[V].name==aa){Y[aa]=true;X.push(aa);}}}}ab=L.getStart();Q.getParent(ab,function(ad){var ac,ae;for(ac=0;ac<Z.length;ac++){ae=Z[ac];if(!Y[ae]&&b(ad,ae,U)){Y[ae]=true;X.push(ae);}}});return X;}function G(aa){var Z=u(aa),W,Y,V,X,U;if(Z){W=L.getStart();Y=y(W);for(X=Z.length-1;X>=0;X--){U=Z[X].selector;if(!U){return K;}for(V=Y.length-1;V>=0;V--){if(Q.is(Y[V],U)){return K;}}}}return h;}a.extend(this,{get:u,register:E,apply:c,remove:p,toggle:J,match:n,matchAll:x,matchNode:b,canApply:G});function z(U,V){if(v(U,V.inline)){return K;}if(v(U,V.block)){return K;}if(V.selector){return Q.is(U,V.selector);}}function v(U,V){U=U||"";V=V||"";U=""+(U.nodeName||U);V=""+(V.nodeName||V);return U.toLowerCase()==V.toLowerCase();}function o(U,W){var V=Q.getStyle(U,W);if(W=="color"||W=="backgroundColor"){V=Q.toHex(V);}if(W=="fontWeight"&&V==700){V="bold";}return""+V;}function O(V,U){if(typeof(V)!="string"){V=V(U);}else{if(U){V=V.replace(/%(\w+)/g,function(W,X){return U[X]||W;});}}return V;}function R(U){return U&&U.nodeType===3&&/^([\s\r\n]+|)$/.test(U.nodeValue);}function g(V,X,U){var W=Q.create(X,U);V.parentNode.insertBefore(W,V);W.appendChild(V);return W;}function s(V,U,af){var ad=V.startContainer,ae=V.startOffset,Z=V.endContainer,Y=V.endOffset,aa,ab;function X(al,ah,ak,ai){var aj,ag;ai=ai||Q.getRoot();for(;;){aj=al.parentNode;if(aj==ai||(!U[0].block_expand&&I(aj))){return al;}for(aa=aj[ah];aa&&aa!=al;aa=aa[ak]){if(aa.nodeType==1&&!M(aa)){return al;}if(aa.nodeType==3&&!R(aa)){return al;}}al=al.parentNode;}return al;}if(ad.nodeType==1&&ad.hasChildNodes()){ab=ad.childNodes.length-1;ad=ad.childNodes[ae>ab?ab:ae];if(ad.nodeType==3){ae=0;}}if(Z.nodeType==1&&Z.hasChildNodes()){ab=Z.childNodes.length-1;Z=Z.childNodes[Y>ab?ab:Y-1];if(Z.nodeType==3){Y=Z.nodeValue.length;}}if(M(ad.parentNode)){ad=ad.parentNode;}if(M(ad)){ad=ad.nextSibling||ad;}if(M(Z.parentNode)){Z=Z.parentNode;}if(M(Z)){Z=Z.previousSibling||Z;}if(U[0].inline||U[0].block_expand){ad=X(ad,"firstChild","nextSibling");Z=X(Z,"lastChild","previousSibling");}if(U[0].selector&&U[0].expand!==h&&!U[0].inline){function W(aj,ai){var ak,ah,ag;if(aj.nodeType==3&&aj.nodeValue.length==0&&aj[ai]){aj=aj[ai];}ak=y(aj);for(ah=0;ah<ak.length;ah++){for(ag=0;ag<U.length;ag++){if(Q.is(ak[ah],U[ag].selector)){return ak[ah];}}}return aj;}ad=W(ad,"previousSibling");Z=W(Z,"nextSibling");}if(U[0].block||U[0].selector){function ac(aj,ah,ai){var ag;if(!U[0].wrapper){ag=Q.getParent(aj,U[0].block);}if(!ag){ag=Q.getParent(aj.nodeType==3?aj.parentNode:aj,I);}if(ag&&U[0].wrapper){ag=y(ag,"ul,ol").reverse()[0]||ag;}if(!ag){ag=aj;while(ag[ah]&&!I(ag[ah])){ag=ag[ah];if(v(ag,"br")){break;}}}return ag||aj;}ad=ac(ad,"previousSibling");Z=ac(Z,"nextSibling");if(U[0].block){if(!I(ad)){ad=X(ad,"firstChild","nextSibling");}if(!I(Z)){Z=X(Z,"lastChild","previousSibling");}}}if(ad.nodeType==1){ae=T(ad);ad=ad.parentNode;}if(Z.nodeType==1){Y=T(Z)+1;Z=Z.parentNode;}return{startContainer:ad,startOffset:ae,endContainer:Z,endOffset:Y};}function P(U,V,Z,X){var W,aa,Y;if(!z(Z,U)){return h;}if(U.remove!="all"){j(U.styles,function(ac,ab){ac=O(ac,V);if(typeof(ab)==="number"){ab=ac;X=0;}if(!X||v(o(X,ab),ac)){Q.setStyle(Z,ab,"");}Y=1;});if(Y&&Q.getAttrib(Z,"style")==""){Z.removeAttribute("style");Z.removeAttribute("_mce_style");}j(U.attributes,function(ab,ad){var ac;ab=O(ab,V);if(typeof(ad)==="number"){ad=ab;X=0;}if(!X||v(Q.getAttrib(X,ad),ab)){if(ad=="class"){ab=Q.getAttrib(Z,ad);if(ab){ac="";j(ab.split(/\s+/),function(ae){if(/mce\w+/.test(ae)){ac+=(ac?" ":"")+ae;}});if(ac){Q.setAttrib(Z,ad,ac);return;}}}if(ad=="class"){Z.removeAttribute("className");}if(C.test(ad)){Z.removeAttribute("_mce_"+ad);}Z.removeAttribute(ad);}});j(U.classes,function(ab){ab=O(ab,V);if(!X||Q.hasClass(X,ab)){Q.removeClass(Z,ab);}});aa=Q.getAttribs(Z);for(W=0;W<aa.length;W++){if(aa[W].nodeName.indexOf("_")!==0){return h;}}}if(U.remove!="none"){i(Z,U);return K;}}function i(X,V){var W=X.parentNode,Y;if(V.block){if(!B){function U(aa,Z,ab){aa=N(aa,Z,ab);return !aa||(aa.nodeName=="BR"||I(aa));}if(I(X)&&!I(W)){if(!U(X,h)&&!U(X.firstChild,K,1)){X.insertBefore(Q.create("br"),X.firstChild);}if(!U(X,K)&&!U(X.lastChild,h,1)){X.appendChild(Q.create("br"));}}}else{if(W==Q.getRoot()){if(!V.list_block||!v(X,V.list_block)){j(a.grep(X.childNodes),function(Z){if(q(B,Z.nodeName.toLowerCase())){if(!Y){Y=g(Z,B);}else{Y.appendChild(Z);}}else{Y=0;}});}}}}if(V.selector&&V.inline&&!v(V.inline,X)){return;}Q.remove(X,1);}function N(V,U,W){if(V){U=U?"nextSibling":"previousSibling";for(V=W?V:V[U];V;V=V[U]){if(V.nodeType==1||!R(V)){return V;}}}}function M(U){return U&&U.nodeType==1&&U.getAttribute("_mce_type")=="bookmark";}function F(aa,X){var Y,Z,V;function W(ac,ad){if(ac.nodeName!=ad.nodeName){return h;}function ae(af){var ag={};j(Q.getAttribs(af),function(ah){var ai=ah.nodeName.toLowerCase();if(ai.indexOf("_")!==0&&ai!=="style"){ag[ai]=Q.getAttrib(af,ai);}});return ag;}function ab(ah,ag){var af,ai;for(ai in ah){if(ah.hasOwnProperty(ai)){af=ag[ai];if(af===l){return h;}if(ah[ai]!=af){return h;}delete ag[ai];}}for(ai in ag){if(ag.hasOwnProperty(ai)){return h;}}return K;}if(!ab(ae(ac),ae(ad))){return h;}if(!ab(Q.parseStyle(Q.getAttrib(ac,"style")),Q.parseStyle(Q.getAttrib(ad,"style")))){return h;}return K;}if(aa&&X){function U(ab,ac){for(Z=ab;Z;Z=Z[ac]){if(Z.nodeType==3&&!R(Z)){return ab;}if(Z.nodeType==1&&!M(Z)){return Z;}}return ab;}aa=U(aa,"previousSibling");X=U(X,"nextSibling");if(W(aa,X)){for(Z=aa.nextSibling;Z&&Z!=X;){V=Z;Z=Z.nextSibling;aa.appendChild(V);}Q.remove(X);j(a.grep(X.childNodes),function(ab){aa.appendChild(ab);});return aa;}}return X;}function m(U){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(U);}function D(U,Y){var X,V,W;X=U[Y?"startContainer":"endContainer"];V=U[Y?"startOffset":"endOffset"];if(X.nodeType==1){W=X.childNodes.length-1;if(!Y&&V){V--;}X=X.childNodes[V>W?W:V];}return X;}function S(aa,ac,V){var U,W=k[aa],Z=k[aa=="apply"?"remove":"apply"];function ab(){return k.apply.length||k.remove.length;}function X(){k.apply=[];k.remove=[];}function Y(ad){j(k.apply.reverse(),function(ae){c(ae.name,ae.vars,ad);});j(k.remove.reverse(),function(ae){p(ae.name,ae.vars,ad);});Q.remove(ad,1);X();}for(U=W.length-1;U>=0;U--){if(W[U].name==ac){return;}}W.push({name:ac,vars:V});for(U=Z.length-1;U>=0;U--){if(Z[U].name==ac){Z.splice(U,1);}}if(ab()){r.getDoc().execCommand("FontName",false,"mceinline");k.lastRng=L.getRng();j(Q.select("font,span"),function(ad){var ae;if(e(ad)){ae=L.getBookmark();Y(ad);L.moveToBookmark(ae);r.nodeChanged();}});if(!k.isListening&&ab()){k.isListening=true;j("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(ad){r[ad].addToTop(function(ae,af){if(ab()&&!a.dom.RangeUtils.compareRanges(k.lastRng,L.getRng())){j(Q.select("font,span"),function(ah){var ag,ai;if(e(ah)){ag=ah.firstChild;if(ag){Y(ah);ai=Q.createRng();ai.setStart(ag,ag.nodeValue.length);ai.setEnd(ag,ag.nodeValue.length);L.setRng(ai);ae.nodeChanged();}else{Q.remove(ah);}}});if(af.type=="keyup"||af.type=="mouseup"){X();}}});});}}}};})(tinymce);tinymce.onAddEditor.add(function(g,b){var d,a,c,e=b.settings;if(e.inline_styles){a=g.explode(e.font_size_style_values);function h(i,j){g.each(j,function(l,k){if(l){c.setStyle(i,k,l);}});c.rename(i,"span");}d={font:function(j,i){h(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:a[parseInt(i.size)-1]});},u:function(j,i){h(i,{textDecoration:"underline"});},strike:function(j,i){h(i,{textDecoration:"line-through"});}};function f(j,i){c=j.dom;if(e.convert_fonts_to_spans){g.each(c.select("font,u,strike",i.node),function(k){d[k.nodeName.toLowerCase()](b.dom,k);});}}b.onPreProcess.add(f);b.onInit.add(function(){b.selection.onSetContent.add(f);});}});