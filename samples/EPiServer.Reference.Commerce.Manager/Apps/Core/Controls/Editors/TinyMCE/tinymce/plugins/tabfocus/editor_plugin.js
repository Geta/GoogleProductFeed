(function(){var c=tinymce.DOM,a=tinymce.dom.Event,d=tinymce.each,b=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(h,e){function f(i,j){if(j.keyCode===9){return a.cancel(j);}}function g(k,o){var j,l,p,n,q;function m(i){p=c.getParent(k.id,"form");n=p.elements;if(p){d(n,function(r,s){if(r.id==k.id){j=s;return false;}});if(i>0){for(l=j+1;l<n.length;l++){if(n[l].type!="hidden"){return n[l];}}}else{for(l=j-1;l>=0;l--){if(n[l].type!="hidden"){return n[l];}}}}return null;}if(o.keyCode===9){q=b(k.getParam("tab_focus",k.getParam("tabfocus_elements",":prev,:next")));if(q.length==1){q[1]=q[0];q[0]=":prev";}if(o.shiftKey){if(q[0]==":prev"){n=m(-1);}else{n=c.get(q[0]);}}else{if(q[1]==":next"){n=m(1);}else{n=c.get(q[1]);}}if(n){if(k=tinymce.get(n.id||n.name)){k.focus();}else{window.setTimeout(function(){window.focus();n.focus();},10);}return a.cancel(o);}}}h.onKeyUp.add(f);if(tinymce.isGecko){h.onKeyPress.add(g);h.onKeyDown.add(f);}else{h.onKeyDown.add(g);}h.onInit.add(function(){d(c.select("a:first,a:last",h.getContainer()),function(i){a.add(i,"focus",function(){h.focus();});});});},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion};}});tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin);})();