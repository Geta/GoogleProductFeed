(function(a){a.onAddEditor.addToTop(function(c,b){b.settings.inline_styles=false;});a.create("tinymce.plugins.LegacyOutput",{init:function(b){b.onInit.add(function(){var e="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",c=a.explode(b.settings.font_size_style_values),d=b.serializer;b.formatter.register({alignleft:{selector:e,attributes:{align:"left"}},aligncenter:{selector:e,attributes:{align:"center"}},alignright:{selector:e,attributes:{align:"right"}},alignfull:{selector:e,attributes:{align:"full"}},bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"},strikethrough:{inline:"strike"},fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(f){return a.inArray(c,f.value)+1;}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});d._setup();a.each("b,i,u,strike".split(","),function(g){var f=d.rules[g];if(!f){d.addRules(g);}});if(!d.rules.font){d.addRules("font[face|size|color|style]");}a.each(e.split(","),function(h){var g=d.rules[h],f;if(g){a.each(g.attribs,function(j,i){if(i.name=="align"){f=true;return false;}});if(!f){g.attribs.push({name:"align"});}}});b.onNodeChange.add(function(g,j){var h,k,i,f;k=g.dom.getParent(g.selection.getNode(),"font");if(k){i=k.face;f=k.size;}if(h=j.get("fontselect")){h.select(function(l){return l==i;});}if(h=j.get("fontsizeselect")){h.select(function(m){var l=a.inArray(c,m.fontSize);return l+1==f;});}});});},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:a.majorVersion+"."+a.minorVersion};}});a.PluginManager.add("legacyoutput",a.plugins.LegacyOutput);})(tinymce);